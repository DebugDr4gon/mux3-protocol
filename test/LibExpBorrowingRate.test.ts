import { ethers, network } from "hardhat"
import { expect } from "chai"
import { toWei, toUnit, fromUnit, fromWei, createContract } from "../scripts/deployUtils"
import { TestLibExpBorrowingRate } from "../typechain"
const U = ethers.utils
const B = ethers.BigNumber
import "ethereum-waffle" // BigNumber closeTo

describe("LibExpBorrowingRate", () => {
  let testLibExpBorrowingRate: TestLibExpBorrowingRate

  before(async () => {
    testLibExpBorrowingRate = (await createContract("TestLibExpBorrowingRate")) as TestLibExpBorrowingRate
  })

  it("getBorrowingRate config 1", async () => {
    const cases = [
      { r: "0", y: "0.101374892132543734" },
      { r: "5000000.0", y: "0.101889908242558447" },
      { r: "10000000.0", y: "0.102597842463962724" },
      { r: "15000000.0", y: "0.103570959327862269" },
      { r: "20000000.0", y: "0.104908592687254498" },
      { r: "25000000.0", y: "0.106747285521112928" },
      { r: "30000000.0", y: "0.109274727972771352" },
      { r: "35000000.0", y: "0.112748916390115778" },
      { r: "40000000.0", y: "0.117524489084675138" },
      { r: "45000000.0", y: "0.124088927112032676" },
      { r: "50000000.0", y: "0.133112315377928198" },
      { r: "55000000.0", y: "0.145515743585761609" },
      { r: "60000000.0", y: "0.162565329259509506" },
      { r: "65000000.0", y: "0.186001460527063955" },
      { r: "70000000.0", y: "0.218216451512783405" },
      { r: "75000000.0", y: "0.262498745051851834" },
      { r: "80000000.0", y: "0.323368590458590732" },
      { r: "85000000.0", y: "0.407039461674224223" },
      { r: "90000000.0", y: "0.522052316449900577" },
      { r: "95000000.0", y: "0.680147440493251709" },
      { r: "100000000.0", y: "0.897462872711951576" },
      { r: "105000000.0", y: "1.196181744442938122" },
      { r: "110000000.0", y: "1.606796689811529566" },
      { r: "115000000.0", y: "2.171222473770332506" },
      { r: "120000000.0", y: "2.947074568758106583" },
    ]
    const global = { baseApy: toWei("0.10") }
    const pool = {
      poolId: "0x0000000000000000000000000000000000000001",
      k: toWei("6.36306"),
      b: toWei("-6.58938"),
      poolSizeUsd: toWei("100000000"),
      reservedUsd: toWei("0"),
      highPriority: false,
    }
    for (const c of cases) {
      const [fr] = await testLibExpBorrowingRate.getBorrowingRates(global, [{ ...pool, reservedUsd: toWei(c.r) }])
      expect(fr).to.be.closeTo(toWei(c.y), B.from("5000"))
    }
  })

  it("getBorrowingRate config 2", async () => {
    const cases = [
      { r: "0", y: "0.054249581547578932" },
      { r: "5000000.0", y: "0.059719630114047205" },
      { r: "10000000.0", y: "0.065741230055953823" },
      { r: "15000000.0", y: "0.072369994941633972" },
      { r: "20000000.0", y: "0.079667145920367513" },
      { r: "25000000.0", y: "0.087700077141304719" },
      { r: "30000000.0", y: "0.096542978184241152" },
      { r: "35000000.0", y: "0.106277519250813746" },
      { r: "40000000.0", y: "0.116993605444324023" },
      { r: "45000000.0", y: "0.128790207104475252" },
      { r: "50000000.0", y: "0.141776273865729885" },
      { r: "55000000.0", y: "0.156071740881236515" },
      { r: "60000000.0", y: "0.171808636505488860" },
      { r: "65000000.0", y: "0.189132301665919184" },
      { r: "70000000.0", y: "0.208202732185151035" },
      { r: "75000000.0", y: "0.229196056451170055" },
      { r: "80000000.0", y: "0.252306162082701124" },
      { r: "85000000.0", y: "0.277746486613152432" },
      { r: "90000000.0", y: "0.305751988731309821" },
      { r: "95000000.0", y: "0.336581318284528586" },
      { r: "100000000.0", y: "0.370519205085877656" },
      { r: "105000000.0", y: "0.407879088587493721" },
      { r: "110000000.0", y: "0.449006012706966273" },
      { r: "115000000.0", y: "0.494279812542441244" },
      { r: "120000000.0", y: "0.544118622407927965" },
    ]
    const global = { baseApy: toWei("0.00") }
    const pool = {
      poolId: "0x0000000000000000000000000000000000000001",
      k: toWei("1.92131"),
      b: toWei("-2.91416"),
      poolSizeUsd: toWei("100000000"),
      reservedUsd: toWei("0"),
      highPriority: false,
    }
    for (const c of cases) {
      const [fr] = await testLibExpBorrowingRate.getBorrowingRates(global, [{ ...pool, reservedUsd: toWei(c.r) }])
      expect(fr).to.be.closeTo(toWei(c.y), B.from("5000"))
    }
  })

  it("calculateC/calculateXi: pools share the same parameters", async () => {
    const global = { baseApy: toWei("0.10") }
    const pools = [
      {
        poolId: "0x0000000000000000000000000000000000000001",
        k: toWei("6.36306"),
        b: toWei("-6.58938"),
        poolSizeUsd: toWei("30000000"),
        reservedUsd: toWei("0"),
        highPriority: false,
      },
      {
        poolId: "0x0000000000000000000000000000000000000002",
        k: toWei("6.36306"),
        b: toWei("-6.58938"),
        poolSizeUsd: toWei("30000000"),
        reservedUsd: toWei("0"),
        highPriority: false,
      },
      {
        poolId: "0x0000000000000000000000000000000000000003",
        k: toWei("6.36306"),
        b: toWei("-6.58938"),
        poolSizeUsd: toWei("30000000"),
        reservedUsd: toWei("0"),
        highPriority: false,
      },
    ]
    // case 1
    {
      const fr = await testLibExpBorrowingRate.getBorrowingRates(global, pools)
      // 0.10 + Exp[k1 * u1 + b1]
      expect(fr[0]).to.be.closeTo(toWei("0.101374892132543700"), B.from("5000"))
      expect(fr[1]).to.be.closeTo(toWei("0.101374892132543700"), B.from("5000"))
      expect(fr[2]).to.be.closeTo(toWei("0.101374892132543700"), B.from("5000"))
      const x = toWei("10000")
      const xi = await testLibExpBorrowingRate.testDistributeEquation(pools, x)
      expect(xi[0]).to.be.closeTo(toWei("3333.333333333333333333"), toWei("0.0000001"))
      expect(xi[1]).to.be.closeTo(toWei("3333.333333333333333333"), toWei("0.0000001"))
      expect(xi[2]).to.be.closeTo(toWei("3333.333333333333333333"), toWei("0.0000001"))
    }
    // case 2
    {
      pools[0].reservedUsd = toWei("3333")
      pools[1].reservedUsd = toWei("1111")
      pools[2].reservedUsd = toWei("0")
      const x = toWei("10000")
      const xi = await testLibExpBorrowingRate.testDistributeEquation(pools, x)
      expect(xi[0]).to.be.closeTo(toWei("1481.666666666666666667"), toWei("0.0000001"))
      expect(xi[1]).to.be.closeTo(toWei("3703.666666666666666667"), toWei("0.0000001"))
      expect(xi[2]).to.be.closeTo(toWei("4814.666666666666666667"), toWei("0.0000001"))
    }
  })

  it("calculateC/calculateXi: different parameters", async () => {
    const global = { baseApy: toWei("0.10") }
    const pools = [
      {
        k: toWei("6.36306"),
        b: toWei("-6.58938"),
        poolSizeUsd: toWei("50000000"),
        reservedUsd: toWei("0"),
        highPriority: false,
        poolId: "0x0000000000000000000000000000000000000001",
      },
      {
        k: toWei("3.46024"),
        b: toWei("-2.34434"),
        poolSizeUsd: toWei("20000000"),
        reservedUsd: toWei("0"),
        highPriority: false,
        poolId: "0x0000000000000000000000000000000000000002",
      },
      {
        k: toWei("1.92131"),
        b: toWei("-2.91416"),
        poolSizeUsd: toWei("10000000"),
        reservedUsd: toWei("0"),
        highPriority: false,
        poolId: "0x0000000000000000000000000000000000000003",
      },
    ]
    // case 1
    {
      const fr = await testLibExpBorrowingRate.getBorrowingRates(global, pools)
      // 0.10 + Exp[k1 * u1 + b1]
      expect(fr[0]).to.be.closeTo(toWei("0.101374892132543700"), B.from("5000"))
      expect(fr[1]).to.be.closeTo(toWei("0.195910482164018800"), B.from("5000"))
      expect(fr[2]).to.be.closeTo(toWei("0.154249581547579000"), B.from("5000"))
      const x = toWei("60000000")
      const xi = await testLibExpBorrowingRate.testDistributeEquation(pools, x)
      expect(xi[0]).to.be.closeTo(toWei("43230968.006925221223354566"), toWei("0.0000001"))
      expect(xi[1]).to.be.closeTo(toWei("7262992.542268235516320082"), toWei("0.0000001"))
      expect(xi[2]).to.be.closeTo(toWei("9506039.450806543260325351"), toWei("0.0000001"))
    }
    // case 2 is based on the result of case 1
    {
      pools[0].reservedUsd = toWei("43230968.006925221223354566")
      pools[1].reservedUsd = toWei("7262992.542268235516320082")
      pools[2].reservedUsd = toWei("9506039.450806543260325351")
      const fr = await testLibExpBorrowingRate.getBorrowingRates(global, pools)
      // 0.10 + Exp[k1 * u1 + b1]
      expect(fr[0]).to.be.closeTo(toWei("0.436972102391632332"), B.from("5000"))
      expect(fr[1]).to.be.closeTo(toWei("0.436972102391632332"), B.from("5000"))
      expect(fr[2]).to.be.closeTo(toWei("0.436972102391632332"), B.from("5000"))
      const x = toWei("60000000")
      const xi = await testLibExpBorrowingRate.testDistributeEquation(pools, x)
      expect(xi[0]).to.be.closeTo(toWei("25021584.517826939925947077"), toWei("0.0000001"))
      expect(xi[1]).to.be.closeTo(toWei("18404948.047765922405983032"), toWei("0.0000001"))
      expect(xi[2]).to.be.closeTo(toWei("16573467.434407137668069891"), toWei("0.0000001"))
    }
  })

  function eqState(a, b, caseName) {
    expect(a.conf.poolId).to.be.eq(b.conf.poolId, caseName)
    expect(a.conf.k).to.be.eq(b.conf.k, caseName)
    expect(a.conf.b).to.be.eq(b.conf.b, caseName)
    expect(a.conf.highPriority).to.be.eq(b.conf.highPriority, caseName)
    expect(a.conf.poolSizeUsd).to.be.eq(b.conf.poolSizeUsd, caseName)
    expect(a.conf.reservedUsd).to.be.eq(b.conf.reservedUsd, caseName)
    expect(a.k).to.be.eq(b.k, caseName)
    expect(a.b).to.be.eq(b.b, caseName)
    expect(a.maxX).to.be.eq(b.maxX, caseName)
    expect(a.allocated).to.be.eq(b.allocated, caseName)
  }

  it("sort", async () => {
    const p1 = {
      conf: {
        poolId: "0x0000000000000000000000000000000000000001",
        k: toWei("1"),
        b: toWei("2"),
        highPriority: false,
        poolSizeUsd: toWei("3"),
        reservedUsd: toWei("4"),
      },
      k: toWei("5"),
      b: toWei("6"),
      maxX: toWei("7"),
      allocated: toWei("8"),
    }
    const p2 = {
      conf: {
        poolId: "0x0000000000000000000000000000000000000011",
        k: toWei("11"),
        b: toWei("12"),
        highPriority: false,
        poolSizeUsd: toWei("13"),
        reservedUsd: toWei("14"),
      },
      k: toWei("15"),
      b: toWei("16"),
      maxX: toWei("17"),
      allocated: toWei("18"),
    }
    const p3 = {
      conf: {
        poolId: "0x0000000000000000000000000000000000000021",
        k: toWei("21"),
        b: toWei("22"),
        highPriority: false,
        poolSizeUsd: toWei("23"),
        reservedUsd: toWei("24"),
      },
      k: toWei("25"),
      b: toWei("26"),
      maxX: toWei("27"),
      allocated: toWei("28"),
    }
    {
      const result = await testLibExpBorrowingRate.sort([p3, p2, p1], 3)
      eqState(result[0], p1, "case 1")
      eqState(result[1], p2, "case 1")
      eqState(result[2], p3, "case 1")
    }
    {
      const result = await testLibExpBorrowingRate.sort([p1, p3, p2], 3)
      eqState(result[0], p1, "case 2")
      eqState(result[1], p2, "case 2")
      eqState(result[2], p3, "case 2")
    }
    {
      const result = await testLibExpBorrowingRate.sort([p3, p1, p2], 2)
      eqState(result[0], p1, "case 3")
      eqState(result[1], p3, "case 3")
      eqState(result[2], p2, "case 3")
    }
  })

  function getIndexByPoolId(poolId: string) {
    if (poolId === "0x0000000000000000000000000000000000000001") {
      return 0
    } else if (poolId === "0x0000000000000000000000000000000000000002") {
      return 1
    } else if (poolId === "0x0000000000000000000000000000000000000003") {
      return 2
    } else {
      throw new Error("Invalid poolId: " + poolId)
    }
  }

  it("full allocate: from zero. reserveRate = 100%", async () => {
    const pools = [
      {
        k: toWei("2.2"),
        b: toWei("-3"),
        poolSizeUsd: toWei("1000000"),
        reservedUsd: toWei("0"),
        highPriority: false,
        poolId: "0x0000000000000000000000000000000000000001",
      },
      {
        k: toWei("6"),
        b: toWei("-6"),
        poolSizeUsd: toWei("1000000"),
        reservedUsd: toWei("0"),
        highPriority: false,
        poolId: "0x0000000000000000000000000000000000000002",
      },
      {
        k: toWei("10"),
        b: toWei("-7"),
        poolSizeUsd: toWei("1000000"),
        reservedUsd: toWei("0"),
        highPriority: false,
        poolId: "0x0000000000000000000000000000000000000003",
      },
    ]
    const cases = [
      { x_total: "10000", xi: ["0", "0", "10000"] },
      { x_total: "20000", xi: ["0", "0", "20000"] },
      { x_total: "30000", xi: ["0", "0", "30000"] },
      { x_total: "40000", xi: ["0", "0", "40000"] },
      { x_total: "50000", xi: ["0", "0", "50000"] },
      { x_total: "60000", xi: ["0", "0", "60000"] },
      { x_total: "70000", xi: ["0", "0", "70000"] },
      { x_total: "80000", xi: ["0", "0", "80000"] },
      { x_total: "90000", xi: ["0", "0", "90000"] },
      { x_total: "100000", xi: ["0", "0", "100000"] },
      { x_total: "110000", xi: ["0", "6249.999999999999833333", "103750.000000000000166667"] },
      { x_total: "120000", xi: ["0", "12499.999999999999833333", "107500.000000000000166667"] },
      { x_total: "130000", xi: ["0", "18749.999999999999833333", "111250.000000000000166667"] },
      { x_total: "140000", xi: ["0", "24999.999999999999833333", "115000.000000000000166667"] },
      { x_total: "150000", xi: ["0", "31249.999999999999833333", "118750.000000000000166667"] },
      { x_total: "160000", xi: ["0", "37499.999999999999833333", "122500.000000000000166667"] },
      { x_total: "170000", xi: ["0", "43749.999999999999833333", "126250.000000000000166667"] },
      { x_total: "180000", xi: ["0", "49999.999999999999833333", "130000.000000000000166667"] },
      { x_total: "190000", xi: ["0", "56249.999999999999833333", "133750.000000000000166667"] },
      { x_total: "200000", xi: ["0", "62499.999999999999833333", "137500.000000000000166667"] },
      { x_total: "210000", xi: ["0", "68749.999999999999833333", "141250.000000000000166667"] },
      { x_total: "220000", xi: ["0", "74999.999999999999833333", "145000.000000000000166667"] },
      { x_total: "230000", xi: ["0", "81249.999999999999833333", "148750.000000000000166667"] },
      { x_total: "240000", xi: ["0", "87499.999999999999833333", "152500.000000000000166667"] },
      { x_total: "250000", xi: ["0", "93749.999999999999833333", "156250.000000000000166667"] },
      { x_total: "260000", xi: ["0", "99999.999999999999833333", "160000.000000000000166667"] },
      { x_total: "270000", xi: ["0", "106249.999999999999833333", "163750.000000000000166667"] },
      { x_total: "280000", xi: ["0", "112499.999999999999833333", "167500.000000000000166667"] },
      { x_total: "290000", xi: ["0", "118749.999999999999833333", "171250.000000000000166667"] },
      { x_total: "300000", xi: ["0", "124999.999999999999833333", "175000.000000000000166667"] },
      { x_total: "310000", xi: ["0", "131249.999999999999833333", "178750.000000000000166667"] },
      { x_total: "320000", xi: ["0", "137499.999999999999833333", "182500.000000000000166667"] },
      { x_total: "330000", xi: ["0", "143749.999999999999833333", "186250.000000000000166667"] },
      { x_total: "340000", xi: ["0", "149999.999999999999833333", "190000.000000000000166667"] },
      { x_total: "350000", xi: ["0", "156249.999999999999833333", "193750.000000000000166667"] },
      { x_total: "360000", xi: ["0", "162499.999999999999833333", "197500.000000000000166667"] },
      { x_total: "370000", xi: ["0", "168749.999999999999833333", "201250.000000000000166667"] },
      { x_total: "380000", xi: ["0", "174999.999999999999833333", "205000.000000000000166667"] },
      { x_total: "390000", xi: ["0", "181249.999999999999833333", "208750.000000000000166667"] },
      { x_total: "400000", xi: ["0", "187499.999999999999833333", "212500.000000000000166667"] },
      { x_total: "410000", xi: ["0", "193749.999999999999833333", "216250.000000000000166667"] },
      { x_total: "420000", xi: ["0", "199999.999999999999833333", "220000.000000000000166667"] },
      { x_total: "430000", xi: ["0", "206249.999999999999833333", "223750.000000000000166667"] },
      { x_total: "440000", xi: ["0", "212499.999999999999833333", "227500.000000000000166667"] },
      { x_total: "450000", xi: ["0", "218749.999999999999833333", "231250.000000000000166667"] },
      { x_total: "460000", xi: ["0", "224999.999999999999833333", "235000.000000000000166667"] },
      { x_total: "470000", xi: ["0", "231249.999999999999833333", "238750.000000000000166667"] },
      { x_total: "480000", xi: ["0", "237499.999999999999833333", "242500.000000000000166667"] },
      { x_total: "490000", xi: ["0", "243749.999999999999833333", "246250.000000000000166667"] },
      { x_total: "500000", xi: ["0", "249999.999999999999833333", "250000.000000000000166667"] },
      { x_total: "510000", xi: ["0", "256249.999999999999833333", "253750.000000000000166667"] },
      { x_total: "520000", xi: ["0", "262499.999999999999833333", "257500.000000000000166667"] },
      { x_total: "530000", xi: ["0", "268749.999999999999833333", "261250.000000000000166667"] },
      { x_total: "540000", xi: ["0", "274999.999999999999833333", "265000.000000000000166667"] },
      { x_total: "550000", xi: ["0", "281249.999999999999833333", "268750.000000000000166667"] },
      { x_total: "560000", xi: ["0", "287499.999999999999833333", "272500.000000000000166667"] },
      { x_total: "570000", xi: ["0", "293749.999999999999833333", "276250.000000000000166667"] },
      { x_total: "580000", xi: ["0", "299999.999999999999833333", "280000.000000000000166667"] },
      { x_total: "590000", xi: ["0", "306249.999999999999833333", "283750.000000000000166667"] },
      { x_total: "600000", xi: ["0", "312499.999999999999833333", "287500.000000000000166667"] },
      { x_total: "610000", xi: ["0", "318749.999999999999833333", "291250.000000000000166667"] },
      { x_total: "620000", xi: ["0", "324999.999999999999833333", "295000.000000000000166667"] },
      { x_total: "630000", xi: ["0", "331249.999999999999833333", "298750.000000000000166667"] },
      { x_total: "640000", xi: ["0", "337499.999999999999833333", "302500.000000000000166667"] },
      { x_total: "650000", xi: ["0", "343749.999999999999833333", "306250.000000000000166667"] },
      { x_total: "660000", xi: ["0", "349999.999999999999833333", "310000.000000000000166667"] },
      { x_total: "670000", xi: ["0", "356249.999999999999833333", "313750.000000000000166667"] },
      { x_total: "680000", xi: ["0", "362499.999999999999833333", "317500.000000000000166667"] },
      { x_total: "690000", xi: ["0", "368749.999999999999833333", "321250.000000000000166667"] },
      { x_total: "700000", xi: ["0", "374999.999999999999833333", "325000.000000000000166667"] },
      { x_total: "710000", xi: ["0", "381249.999999999999833333", "328750.000000000000166667"] },
      { x_total: "720000", xi: ["0", "387499.999999999999833333", "332500.000000000000166667"] },
      { x_total: "730000", xi: ["0", "393749.999999999999833333", "336250.000000000000166667"] },
      { x_total: "740000", xi: ["0", "399999.999999999999833333", "340000.000000000000166667"] },
      { x_total: "750000", xi: ["0", "406249.999999999999833333", "343750.000000000000166667"] },
      { x_total: "760000", xi: ["0", "412499.999999999999833333", "347500.000000000000166667"] },
      { x_total: "770000", xi: ["0", "418749.999999999999833333", "351250.000000000000166667"] },
      { x_total: "780000", xi: ["0", "424999.999999999999833333", "355000.000000000000166667"] },
      { x_total: "790000", xi: ["0", "431249.999999999999833333", "358750.000000000000166667"] },
      { x_total: "800000", xi: ["0", "437499.999999999999833333", "362500.000000000000166667"] },
      { x_total: "810000", xi: ["0", "443749.999999999999833333", "366250.000000000000166667"] },
      { x_total: "820000", xi: ["0", "449999.999999999999833333", "370000.000000000000166667"] },
      { x_total: "830000", xi: ["0", "456249.999999999999833333", "373750.000000000000166667"] },
      { x_total: "840000", xi: ["0", "462499.999999999999833333", "377500.000000000000166667"] },
      { x_total: "850000", xi: ["0", "468749.999999999999833333", "381250.000000000000166667"] },
      { x_total: "860000", xi: ["0", "474999.999999999999833333", "385000.000000000000166667"] },
      { x_total: "870000", xi: ["0", "481249.999999999999833333", "388750.000000000000166667"] },
      { x_total: "880000", xi: ["0", "487499.999999999999833333", "392500.000000000000166667"] },
      { x_total: "890000", xi: ["0", "493749.999999999999833333", "396250.000000000000166667"] },
      { x_total: "900000", xi: ["0", "499999.999999999999833333", "400000.000000000000166667"] },
      { x_total: "910000", xi: ["6302.52100840336090909", "502310.924369747899", "401386.55462184874009091"] },
      { x_total: "920000", xi: ["12605.042016806722272727", "504621.848739495798166666", "402773.109243697479560607"] },
      { x_total: "930000", xi: ["18907.563025210083636363", "506932.773109243697333333", "404159.663865546219030304"] },
      { x_total: "940000", xi: ["25210.084033613445", "509243.6974789915965", "405546.2184873949585"] },
      { x_total: "950000", xi: ["31512.605042016806363636", "511554.621848739495666666", "406932.773109243697969698"] },
      { x_total: "960000", xi: ["37815.126050420167727272", "513865.546218487394833333", "408319.327731092437439395"] },
      { x_total: "970000", xi: ["44117.647058823529090909", "516176.470588235294", "409705.882352941176909091"] },
      { x_total: "980000", xi: ["50420.168067226890454545", "518487.394957983193166666", "411092.436974789916378789"] },
      { x_total: "990000", xi: ["56722.689075630251818181", "520798.319327731092333333", "412478.991596638655848486"] },
      { x_total: "1000000", xi: ["63025.210084033613181818", "523109.2436974789915", "413865.546218487395318182"] },
      { x_total: "1010000", xi: ["69327.731092436974545454", "525420.168067226890666666", "415252.10084033613478788"] },
      { x_total: "1020000", xi: ["75630.25210084033590909", "527731.092436974789833333", "416638.655462184874257577"] },
      { x_total: "1030000", xi: ["81932.773109243697272727", "530042.016806722689", "418025.210084033613727273"] },
      {
        x_total: "1040000",
        xi: ["88235.294117647058636363", "532352.941176470588166666", "419411.764705882353196971"],
      },
      { x_total: "1050000", xi: ["94537.81512605042", "534663.865546218487333333", "420798.319327731092666667"] },
      { x_total: "1060000", xi: ["100840.336134453781363636", "536974.7899159663865", "422184.873949579832136364"] },
      {
        x_total: "1070000",
        xi: ["107142.857142857142727272", "539285.714285714285666666", "423571.428571428571606062"],
      },
      {
        x_total: "1080000",
        xi: ["113445.378151260504090909", "541596.638655462184833333", "424957.983193277311075758"],
      },
      { x_total: "1090000", xi: ["119747.899159663865454545", "543907.563025210084", "426344.537815126050545455"] },
      {
        x_total: "1100000",
        xi: ["126050.420168067226818181", "546218.487394957983166666", "427731.092436974790015153"],
      },
      {
        x_total: "1110000",
        xi: ["132352.941176470588181818", "548529.411764705882333333", "429117.647058823529484849"],
      },
      { x_total: "1120000", xi: ["138655.462184873949545454", "550840.3361344537815", "430504.201680672268954546"] },
      {
        x_total: "1130000",
        xi: ["144957.98319327731090909", "553151.260504201680666666", "431890.756302521008424244"],
      },
      {
        x_total: "1140000",
        xi: ["151260.504201680671818181", "555462.184873949579666666", "433277.310924369748515153"],
      },
      {
        x_total: "1150000",
        xi: ["157563.025210084033181818", "557773.109243697478833333", "434663.865546218487984849"],
      },
      { x_total: "1160000", xi: ["163865.546218487394545454", "560084.033613445378", "436050.420168067227454546"] },
      {
        x_total: "1170000",
        xi: ["170168.06722689075590909", "562394.957983193277166666", "437436.974789915966924244"],
      },
      {
        x_total: "1180000",
        xi: ["176470.588235294117272727", "564705.882352941176333333", "438823.52941176470639394"],
      },
      { x_total: "1190000", xi: ["182773.109243697478636363", "567016.8067226890755", "440210.084033613445863637"] },
      { x_total: "1200000", xi: ["189075.63025210084", "569327.731092436974666666", "441596.638655462185333334"] },
      {
        x_total: "1210000",
        xi: ["195378.151260504201363636", "571638.655462184873833333", "442983.193277310924803031"],
      },
      { x_total: "1220000", xi: ["201680.672268907562727272", "573949.579831932773", "444369.747899159664272728"] },
      {
        x_total: "1230000",
        xi: ["207983.193277310924090909", "576260.504201680672166666", "445756.302521008403742425"],
      },
      {
        x_total: "1240000",
        xi: ["214285.714285714285454545", "578571.428571428571333333", "447142.857142857143212122"],
      },
      { x_total: "1250000", xi: ["220588.235294117646818181", "580882.3529411764705", "448529.411764705882681819"] },
      {
        x_total: "1260000",
        xi: ["226890.756302521008181818", "583193.277310924369666666", "449915.966386554622151516"],
      },
      {
        x_total: "1270000",
        xi: ["233193.277310924369545454", "585504.201680672268833333", "451302.521008403361621213"],
      },
      { x_total: "1280000", xi: ["239495.79831932773090909", "587815.126050420168", "452689.07563025210109091"] },
      {
        x_total: "1290000",
        xi: ["245798.319327731092272727", "590126.050420168067166666", "454075.630252100840560607"],
      },
      {
        x_total: "1300000",
        xi: ["252100.840336134453636363", "592436.974789915966333333", "455462.184873949580030304"],
      },
      { x_total: "1310000", xi: ["258403.361344537815", "594747.8991596638655", "456848.7394957983195"] },
      {
        x_total: "1320000",
        xi: ["264705.882352941176363636", "597058.823529411764666666", "458235.294117647058969698"],
      },
      {
        x_total: "1330000",
        xi: ["271008.403361344537727272", "599369.747899159663833333", "459621.848739495798439395"],
      },
      { x_total: "1340000", xi: ["277310.924369747899090909", "601680.672268907563", "461008.403361344537909091"] },
      {
        x_total: "1350000",
        xi: ["283613.445378151260454545", "603991.596638655462166666", "462394.957983193277378789"],
      },
      {
        x_total: "1360000",
        xi: ["289915.966386554621818181", "606302.521008403361333333", "463781.512605042016848486"],
      },
      { x_total: "1370000", xi: ["296218.487394957983181818", "608613.4453781512605", "465168.067226890756318182"] },
      { x_total: "1380000", xi: ["302521.008403361344090909", "610924.3697478991595", "466554.621848739496409091"] },
      {
        x_total: "1390000",
        xi: ["308823.529411764705454545", "613235.294117647058666666", "467941.176470588235878789"],
      },
      {
        x_total: "1400000",
        xi: ["315126.050420168066818181", "615546.218487394957833333", "469327.731092436975348486"],
      },
      { x_total: "1410000", xi: ["321428.571428571428181818", "617857.142857142857", "470714.285714285714818182"] },
      {
        x_total: "1420000",
        xi: ["327731.092436974789545454", "620168.067226890756166666", "472100.84033613445428788"],
      },
      {
        x_total: "1430000",
        xi: ["334033.61344537815090909", "622478.991596638655333333", "473487.394957983193757577"],
      },
      { x_total: "1440000", xi: ["340336.134453781512272727", "624789.9159663865545", "474873.949579831933227273"] },
      {
        x_total: "1450000",
        xi: ["346638.655462184873636363", "627100.840336134453666666", "476260.504201680672696971"],
      },
      { x_total: "1460000", xi: ["352941.176470588235", "629411.764705882352833333", "477647.058823529412166667"] },
      { x_total: "1470000", xi: ["359243.697478991596363636", "631722.689075630252", "479033.613445378151636364"] },
      {
        x_total: "1480000",
        xi: ["365546.218487394957727272", "634033.613445378151166666", "480420.168067226891106062"],
      },
      {
        x_total: "1490000",
        xi: ["371848.739495798319090909", "636344.537815126050333333", "481806.722689075630575758"],
      },
      { x_total: "1500000", xi: ["378151.260504201680454545", "638655.4621848739495", "483193.277310924370045455"] },
      {
        x_total: "1510000",
        xi: ["384453.781512605041818181", "640966.386554621848666666", "484579.831932773109515153"],
      },
      {
        x_total: "1520000",
        xi: ["390756.302521008403181818", "643277.310924369747833333", "485966.386554621848984849"],
      },
      { x_total: "1530000", xi: ["397058.823529411764545454", "645588.235294117647", "487352.941176470588454546"] },
      {
        x_total: "1540000",
        xi: ["403361.34453781512590909", "647899.159663865546166666", "488739.495798319327924244"],
      },
      {
        x_total: "1550000",
        xi: ["409663.865546218487272727", "650210.084033613445333333", "490126.05042016806739394"],
      },
      { x_total: "1560000", xi: ["415966.386554621848636363", "652521.0084033613445", "491512.605042016806863637"] },
      { x_total: "1570000", xi: ["422268.90756302521", "654831.932773109243666666", "492899.159663865546333334"] },
      {
        x_total: "1580000",
        xi: ["428571.428571428571363636", "657142.857142857142833333", "494285.714285714285803031"],
      },
      { x_total: "1590000", xi: ["434873.949579831932727272", "659453.781512605042", "495672.268907563025272728"] },
      {
        x_total: "1600000",
        xi: ["441176.470588235294090909", "661764.705882352941166666", "497058.823529411764742425"],
      },
      {
        x_total: "1610000",
        xi: ["447478.991596638655454545", "664075.630252100840333333", "498445.378151260504212122"],
      },
      {
        x_total: "1620000",
        xi: ["453781.512605042016363636", "666386.554621848739333333", "499831.932773109244303031"],
      },
      { x_total: "1630000", xi: ["460084.033613445377727272", "668697.4789915966385", "501218.487394957983772728"] },
      {
        x_total: "1640000",
        xi: ["466386.554621848739090909", "671008.403361344537666666", "502605.042016806723242425"],
      },
      {
        x_total: "1650000",
        xi: ["472689.075630252100454545", "673319.327731092436833333", "503991.596638655462712122"],
      },
      { x_total: "1660000", xi: ["478991.596638655461818181", "675630.252100840336", "505378.151260504202181819"] },
      {
        x_total: "1670000",
        xi: ["485294.117647058823181818", "677941.176470588235166666", "506764.705882352941651516"],
      },
      {
        x_total: "1680000",
        xi: ["491596.638655462184545454", "680252.100840336134333333", "508151.260504201681121213"],
      },
      { x_total: "1690000", xi: ["497899.15966386554590909", "682563.0252100840335", "509537.81512605042059091"] },
      {
        x_total: "1700000",
        xi: ["504201.680672268907272727", "684873.949579831932666666", "510924.369747899160060607"],
      },
      {
        x_total: "1710000",
        xi: ["510504.201680672268636363", "687184.873949579831833333", "512310.924369747899530304"],
      },
      { x_total: "1720000", xi: ["516806.72268907563", "689495.798319327731", "513697.478991596639"] },
      {
        x_total: "1730000",
        xi: ["523109.243697478991363636", "691806.722689075630166666", "515084.033613445378469698"],
      },
      {
        x_total: "1740000",
        xi: ["529411.764705882352727272", "694117.647058823529333333", "516470.588235294117939395"],
      },
      { x_total: "1750000", xi: ["535714.285714285714090909", "696428.5714285714285", "517857.142857142857409091"] },
      {
        x_total: "1760000",
        xi: ["542016.806722689075454545", "698739.495798319327666666", "519243.697478991596878789"],
      },
      {
        x_total: "1770000",
        xi: ["548319.327731092436818181", "701050.420168067226833333", "520630.252100840336348486"],
      },
      { x_total: "1780000", xi: ["554621.848739495798181818", "703361.344537815126", "522016.806722689075818182"] },
      {
        x_total: "1790000",
        xi: ["560924.369747899159545454", "705672.268907563025166666", "523403.36134453781528788"],
      },
      {
        x_total: "1800000",
        xi: ["567226.89075630252090909", "707983.193277310924333333", "524789.915966386554757577"],
      },
      { x_total: "1810000", xi: ["573529.411764705882272727", "710294.1176470588235", "526176.470588235294227273"] },
      {
        x_total: "1820000",
        xi: ["579831.932773109243636363", "712605.042016806722666666", "527563.025210084033696971"],
      },
      { x_total: "1830000", xi: ["586134.453781512605", "714915.966386554621833333", "528949.579831932773166667"] },
      { x_total: "1840000", xi: ["592436.974789915966363636", "717226.890756302521", "530336.134453781512636364"] },
      {
        x_total: "1850000",
        xi: ["598739.495798319327727272", "719537.815126050420166666", "531722.689075630252106062"],
      },
      {
        x_total: "1860000",
        xi: ["605042.016806722688636363", "721848.739495798319166666", "533109.243697478992196971"],
      },
      { x_total: "1870000", xi: ["611344.53781512605", "724159.663865546218333333", "534495.798319327731666667"] },
      { x_total: "1880000", xi: ["617647.058823529411363636", "726470.5882352941175", "535882.352941176471136364"] },
      {
        x_total: "1890000",
        xi: ["623949.579831932772727272", "728781.512605042016666666", "537268.907563025210606062"],
      },
      {
        x_total: "1900000",
        xi: ["630252.100840336134090909", "731092.436974789915833333", "538655.462184873950075758"],
      },
      { x_total: "1910000", xi: ["636554.621848739495454545", "733403.361344537815", "540042.016806722689545455"] },
      {
        x_total: "1920000",
        xi: ["642857.142857142856818181", "735714.285714285714166666", "541428.571428571429015153"],
      },
      {
        x_total: "1930000",
        xi: ["649159.663865546218181818", "738025.210084033613333333", "542815.126050420168484849"],
      },
      { x_total: "1940000", xi: ["655462.184873949579545454", "740336.1344537815125", "544201.680672268907954546"] },
      {
        x_total: "1950000",
        xi: ["661764.70588235294090909", "742647.058823529411666666", "545588.235294117647424244"],
      },
      {
        x_total: "1960000",
        xi: ["668067.226890756302272727", "744957.983193277310833333", "546974.78991596638689394"],
      },
      { x_total: "1970000", xi: ["674369.747899159663636363", "747268.90756302521", "548361.344537815126363637"] },
      { x_total: "1980000", xi: ["680672.268907563025", "749579.831932773109166666", "549747.899159663865833334"] },
      {
        x_total: "1990000",
        xi: ["686974.789915966386363636", "751890.756302521008333333", "551134.453781512605303031"],
      },
      { x_total: "2000000", xi: ["693277.310924369747727272", "754201.6806722689075", "552521.008403361344772728"] },
      {
        x_total: "2010000",
        xi: ["699579.831932773109090909", "756512.605042016806666666", "553907.563025210084242425"],
      },
      {
        x_total: "2020000",
        xi: ["705882.352941176470454545", "758823.529411764705833333", "555294.117647058823712122"],
      },
      { x_total: "2030000", xi: ["712184.873949579831818181", "761134.453781512605", "556680.672268907563181819"] },
      {
        x_total: "2040000",
        xi: ["718487.394957983193181818", "763445.378151260504166666", "558067.226890756302651516"],
      },
      {
        x_total: "2050000",
        xi: ["724789.915966386554545454", "765756.302521008403333333", "559453.781512605042121213"],
      },
      { x_total: "2060000", xi: ["731092.43697478991590909", "768067.2268907563025", "560840.33613445378159091"] },
      {
        x_total: "2070000",
        xi: ["737394.957983193277272727", "770378.151260504201666666", "562226.890756302521060607"],
      },
      {
        x_total: "2080000",
        xi: ["743697.478991596638636363", "772689.075630252100833333", "563613.445378151260530304"],
      },
      {
        x_total: "2090000",
        xi: ["749999.999999999999545454", "774999.999999999999833333", "565000.000000000000621213"],
      },
      { x_total: "2100000", xi: ["756302.52100840336090909", "777310.924369747899", "566386.55462184874009091"] },
      {
        x_total: "2110000",
        xi: ["762605.042016806722272727", "779621.848739495798166666", "567773.109243697479560607"],
      },
      {
        x_total: "2120000",
        xi: ["768907.563025210083636363", "781932.773109243697333333", "569159.663865546219030304"],
      },
      { x_total: "2130000", xi: ["775210.084033613445", "784243.6974789915965", "570546.2184873949585"] },
      {
        x_total: "2140000",
        xi: ["781512.605042016806363636", "786554.621848739495666666", "571932.773109243697969698"],
      },
      {
        x_total: "2150000",
        xi: ["787815.126050420167727272", "788865.546218487394833333", "573319.327731092437439395"],
      },
      { x_total: "2160000", xi: ["794117.647058823529090909", "791176.470588235294", "574705.882352941176909091"] },
      {
        x_total: "2170000",
        xi: ["800420.168067226890454545", "793487.394957983193166666", "576092.436974789916378789"],
      },
      {
        x_total: "2180000",
        xi: ["806722.689075630251818181", "795798.319327731092333333", "577478.991596638655848486"],
      },
      { x_total: "2190000", xi: ["813025.210084033613181818", "798109.2436974789915", "578865.546218487395318182"] },
      {
        x_total: "2200000",
        xi: ["819327.731092436974545454", "800420.168067226890666666", "580252.10084033613478788"],
      },
      {
        x_total: "2210000",
        xi: ["825630.25210084033590909", "802731.092436974789833333", "581638.655462184874257577"],
      },
      { x_total: "2220000", xi: ["831932.773109243697272727", "805042.016806722689", "583025.210084033613727273"] },
      {
        x_total: "2230000",
        xi: ["838235.294117647058636363", "807352.941176470588166666", "584411.764705882353196971"],
      },
      { x_total: "2240000", xi: ["844537.81512605042", "809663.865546218487333333", "585798.319327731092666667"] },
      { x_total: "2250000", xi: ["850840.336134453781363636", "811974.7899159663865", "587184.873949579832136364"] },
      {
        x_total: "2260000",
        xi: ["857142.857142857142727272", "814285.714285714285666666", "588571.428571428571606062"],
      },
      {
        x_total: "2270000",
        xi: ["863445.378151260504090909", "816596.638655462184833333", "589957.983193277311075758"],
      },
      { x_total: "2280000", xi: ["869747.899159663865454545", "818907.563025210084", "591344.537815126050545455"] },
      {
        x_total: "2290000",
        xi: ["876050.420168067226818181", "821218.487394957983166666", "592731.092436974790015153"],
      },
      {
        x_total: "2300000",
        xi: ["882352.941176470588181818", "823529.411764705882333333", "594117.647058823529484849"],
      },
      { x_total: "2310000", xi: ["888655.462184873949545454", "825840.3361344537815", "595504.201680672268954546"] },
      {
        x_total: "2320000",
        xi: ["894957.98319327731090909", "828151.260504201680666666", "596890.756302521008424244"],
      },
      {
        x_total: "2330000",
        xi: ["901260.504201680671818181", "830462.184873949579666666", "598277.310924369748515153"],
      },
      {
        x_total: "2340000",
        xi: ["907563.025210084033181818", "832773.109243697478833333", "599663.865546218487984849"],
      },
      { x_total: "2350000", xi: ["913865.546218487394545454", "835084.033613445378", "601050.420168067227454546"] },
      {
        x_total: "2360000",
        xi: ["920168.06722689075590909", "837394.957983193277166666", "602436.974789915966924244"],
      },
      {
        x_total: "2370000",
        xi: ["926470.588235294117272727", "839705.882352941176333333", "603823.52941176470639394"],
      },
      { x_total: "2380000", xi: ["932773.109243697478636363", "842016.8067226890755", "605210.084033613445863637"] },
      { x_total: "2390000", xi: ["939075.63025210084", "844327.731092436974666666", "606596.638655462185333334"] },
      {
        x_total: "2400000",
        xi: ["945378.151260504201363636", "846638.655462184873833333", "607983.193277310924803031"],
      },
      { x_total: "2410000", xi: ["951680.672268907562727272", "848949.579831932773", "609369.747899159664272728"] },
      {
        x_total: "2420000",
        xi: ["957983.193277310924090909", "851260.504201680672166666", "610756.302521008403742425"],
      },
      {
        x_total: "2430000",
        xi: ["964285.714285714285454545", "853571.428571428571333333", "612142.857142857143212122"],
      },
      { x_total: "2440000", xi: ["970588.235294117646818181", "855882.3529411764705", "613529.411764705882681819"] },
      {
        x_total: "2450000",
        xi: ["976890.756302521008181818", "858193.277310924369666666", "614915.966386554622151516"],
      },
      {
        x_total: "2460000",
        xi: ["983193.277310924369545454", "860504.201680672268833333", "616302.521008403361621213"],
      },
      { x_total: "2470000", xi: ["989495.79831932773090909", "862815.126050420168", "617689.07563025210109091"] },
      {
        x_total: "2480000",
        xi: ["995798.319327731092272727", "865126.050420168067166666", "619075.630252100840560607"],
      },
      { x_total: "2490000", xi: ["1000000", "868750.0000000000001", "621249.9999999999999"] },
      { x_total: "2500000", xi: ["1000000", "874999.999999999999833333", "625000.000000000000166667"] },
      { x_total: "2510000", xi: ["1000000", "881250.0000000000001", "628749.9999999999999"] },
      { x_total: "2520000", xi: ["1000000", "887500.0000000000001", "632499.9999999999999"] },
      { x_total: "2530000", xi: ["1000000", "893749.999999999999833333", "636250.000000000000166667"] },
      { x_total: "2540000", xi: ["1000000", "900000.0000000000001", "639999.9999999999999"] },
      { x_total: "2550000", xi: ["1000000", "906250.0000000000001", "643749.9999999999999"] },
      { x_total: "2560000", xi: ["1000000", "912499.999999999999833333", "647500.000000000000166667"] },
      { x_total: "2570000", xi: ["1000000", "918749.999999999999833333", "651250.000000000000166667"] },
      { x_total: "2580000", xi: ["1000000", "925000.0000000000001", "654999.9999999999999"] },
      { x_total: "2590000", xi: ["1000000", "931250.0000000000001", "658749.9999999999999"] },
      { x_total: "2600000", xi: ["1000000", "937499.999999999999833333", "662500.000000000000166667"] },
      { x_total: "2610000", xi: ["1000000", "943750.0000000000001", "666249.9999999999999"] },
      { x_total: "2620000", xi: ["1000000", "950000.0000000000001", "669999.9999999999999"] },
      { x_total: "2630000", xi: ["1000000", "956249.999999999999833333", "673750.000000000000166667"] },
      { x_total: "2640000", xi: ["1000000", "962500.0000000000001", "677499.9999999999999"] },
      { x_total: "2650000", xi: ["1000000", "968750.0000000000001", "681249.9999999999999"] },
      { x_total: "2660000", xi: ["1000000", "974999.999999999999833333", "685000.000000000000166667"] },
      { x_total: "2670000", xi: ["1000000", "981250.0000000000001", "688749.9999999999999"] },
      { x_total: "2680000", xi: ["1000000", "987500.0000000000001", "692499.9999999999999"] },
      { x_total: "2690000", xi: ["1000000", "993749.999999999999833333", "696250.000000000000166667"] },
      { x_total: "2700000", xi: ["1000000", "1000000", "700000"] },
      { x_total: "2710000", xi: ["1000000", "1000000", "710000"] },
      { x_total: "2720000", xi: ["1000000", "1000000", "720000"] },
      { x_total: "2730000", xi: ["1000000", "1000000", "730000"] },
      { x_total: "2740000", xi: ["1000000", "1000000", "740000"] },
      { x_total: "2750000", xi: ["1000000", "1000000", "750000"] },
      { x_total: "2760000", xi: ["1000000", "1000000", "760000"] },
      { x_total: "2770000", xi: ["1000000", "1000000", "770000"] },
      { x_total: "2780000", xi: ["1000000", "1000000", "780000"] },
      { x_total: "2790000", xi: ["1000000", "1000000", "790000"] },
      { x_total: "2800000", xi: ["1000000", "1000000", "800000"] },
      { x_total: "2810000", xi: ["1000000", "1000000", "810000"] },
      { x_total: "2820000", xi: ["1000000", "1000000", "820000"] },
      { x_total: "2830000", xi: ["1000000", "1000000", "830000"] },
      { x_total: "2840000", xi: ["1000000", "1000000", "840000"] },
      { x_total: "2850000", xi: ["1000000", "1000000", "850000"] },
      { x_total: "2860000", xi: ["1000000", "1000000", "860000"] },
      { x_total: "2870000", xi: ["1000000", "1000000", "870000"] },
      { x_total: "2880000", xi: ["1000000", "1000000", "880000"] },
      { x_total: "2890000", xi: ["1000000", "1000000", "890000"] },
      { x_total: "2900000", xi: ["1000000", "1000000", "900000"] },
      { x_total: "2910000", xi: ["1000000", "1000000", "910000"] },
      { x_total: "2920000", xi: ["1000000", "1000000", "920000"] },
      { x_total: "2930000", xi: ["1000000", "1000000", "930000"] },
      { x_total: "2940000", xi: ["1000000", "1000000", "940000"] },
      { x_total: "2950000", xi: ["1000000", "1000000", "950000"] },
      { x_total: "2960000", xi: ["1000000", "1000000", "960000"] },
      { x_total: "2970000", xi: ["1000000", "1000000", "970000"] },
      { x_total: "2980000", xi: ["1000000", "1000000", "980000"] },
      { x_total: "2990000", xi: ["1000000", "1000000", "990000"] },
      { x_total: "3000000", xi: ["1000000", "1000000", "1000000"] },
    ]
    for (const test of cases) {
      const result = await testLibExpBorrowingRate.allocate(pools, toWei(test.x_total))
      expect(result.length).to.equal(test.xi.length)
      for (let i = 0; i < test.xi.length; i++) {
        const expectedIndex = getIndexByPoolId(result[i].poolId)
        expect(result[i].xi).to.be.closeTo(toWei(test.xi[expectedIndex]), toWei("0.0000001"), `case ${test}`)
      }
    }

    // insufficient liquidity
    await expect(testLibExpBorrowingRate.allocate(pools, toWei("3000001"))).to.be.revertedWith("ExpBorrow: full")
  })

  it("full allocate: consume step by step. reserveRate = 100%", async () => {
    const pools = [
      {
        k: toWei("2.2"),
        b: toWei("-3"),
        poolSizeUsd: toWei("1000000"),
        reservedUsd: toWei("0"),
        highPriority: false,
        poolId: "0x0000000000000000000000000000000000000001",
      },
      {
        k: toWei("6"),
        b: toWei("-6"),
        poolSizeUsd: toWei("1000000"),
        reservedUsd: toWei("0"),
        highPriority: false,
        poolId: "0x0000000000000000000000000000000000000002",
      },
      {
        k: toWei("10"),
        b: toWei("-7"),
        poolSizeUsd: toWei("1000000"),
        reservedUsd: toWei("0"),
        highPriority: false,
        poolId: "0x0000000000000000000000000000000000000003",
      },
    ]
    const cases = [
      { x_total: "10000", reserve: ["0", "0", "0"], xi: ["0", "0", "10000"] },
      { x_total: "20000", reserve: ["0", "0", "10000"], xi: ["0", "0", "10000"] },
      { x_total: "30000", reserve: ["0", "0", "20000"], xi: ["0", "0", "10000"] },
      { x_total: "40000", reserve: ["0", "0", "30000"], xi: ["0", "0", "10000"] },
      { x_total: "50000", reserve: ["0", "0", "40000"], xi: ["0", "0", "10000"] },
      { x_total: "60000", reserve: ["0", "0", "50000"], xi: ["0", "0", "10000"] },
      { x_total: "70000", reserve: ["0", "0", "60000"], xi: ["0", "0", "10000"] },
      { x_total: "80000", reserve: ["0", "0", "70000"], xi: ["0", "0", "10000"] },
      { x_total: "90000", reserve: ["0", "0", "80000"], xi: ["0", "0", "10000"] },
      { x_total: "100000", reserve: ["0", "0", "90000"], xi: ["0", "0", "10000"] },
      { x_total: "110000", reserve: ["0", "0", "100000"], xi: ["0", "6250.0000000000001", "3749.9999999999999"] },
      {
        x_total: "120000",
        reserve: ["0", "6250.0000000000001", "103749.9999999999999"],
        xi: ["0", "6249.999999999999833333", "3750.000000000000166667"],
      },
      {
        x_total: "130000",
        reserve: ["0", "12499.999999999999933333", "107500.000000000000066667"],
        xi: ["0", "6250.0000000000001", "3749.9999999999999"],
      },
      {
        x_total: "140000",
        reserve: ["0", "18750.000000000000033333", "111249.999999999999966667"],
        xi: ["0", "6249.999999999999833333", "3750.000000000000166667"],
      },
      {
        x_total: "150000",
        reserve: ["0", "24999.999999999999866666", "115000.000000000000133334"],
        xi: ["0", "6250.0000000000002", "3749.9999999999998"],
      },
      {
        x_total: "160000",
        reserve: ["0", "31250.000000000000066666", "118749.999999999999933334"],
        xi: ["0", "6249.999999999999833333", "3750.000000000000166667"],
      },
      {
        x_total: "170000",
        reserve: ["0", "37499.999999999999899999", "122500.000000000000100001"],
        xi: ["0", "6250.0000000000002", "3749.9999999999998"],
      },
      {
        x_total: "180000",
        reserve: ["0", "43750.000000000000099999", "126249.999999999999900001"],
        xi: ["0", "6249.999999999999833333", "3750.000000000000166667"],
      },
      {
        x_total: "190000",
        reserve: ["0", "49999.999999999999933332", "130000.000000000000066668"],
        xi: ["0", "6250.0000000000001", "3749.9999999999999"],
      },
      {
        x_total: "200000",
        reserve: ["0", "56250.000000000000033332", "133749.999999999999966668"],
        xi: ["0", "6249.999999999999833333", "3750.000000000000166667"],
      },
      {
        x_total: "210000",
        reserve: ["0", "62499.999999999999866665", "137500.000000000000133335"],
        xi: ["0", "6250.0000000000002", "3749.9999999999998"],
      },
      {
        x_total: "220000",
        reserve: ["0", "68750.000000000000066665", "141249.999999999999933335"],
        xi: ["0", "6249.999999999999833333", "3750.000000000000166667"],
      },
      {
        x_total: "230000",
        reserve: ["0", "74999.999999999999899998", "145000.000000000000100002"],
        xi: ["0", "6250.0000000000002", "3749.9999999999998"],
      },
      {
        x_total: "240000",
        reserve: ["0", "81250.000000000000099998", "148749.999999999999900002"],
        xi: ["0", "6249.999999999999833333", "3750.000000000000166667"],
      },
      {
        x_total: "250000",
        reserve: ["0", "87499.999999999999933331", "152500.000000000000066669"],
        xi: ["0", "6250.0000000000001", "3749.9999999999999"],
      },
      {
        x_total: "260000",
        reserve: ["0", "93750.000000000000033331", "156249.999999999999966669"],
        xi: ["0", "6249.999999999999833333", "3750.000000000000166667"],
      },
      {
        x_total: "270000",
        reserve: ["0", "99999.999999999999866664", "160000.000000000000133336"],
        xi: ["0", "6250.0000000000002", "3749.9999999999998"],
      },
      {
        x_total: "280000",
        reserve: ["0", "106250.000000000000066664", "163749.999999999999933336"],
        xi: ["0", "6249.999999999999833333", "3750.000000000000166667"],
      },
      {
        x_total: "290000",
        reserve: ["0", "112499.999999999999899997", "167500.000000000000100003"],
        xi: ["0", "6250.0000000000002", "3749.9999999999998"],
      },
      {
        x_total: "300000",
        reserve: ["0", "118750.000000000000099997", "171249.999999999999900003"],
        xi: ["0", "6249.999999999999833333", "3750.000000000000166667"],
      },
      {
        x_total: "310000",
        reserve: ["0", "124999.99999999999993333", "175000.00000000000006667"],
        xi: ["0", "6250.0000000000001", "3749.9999999999999"],
      },
      {
        x_total: "320000",
        reserve: ["0", "131250.00000000000003333", "178749.99999999999996667"],
        xi: ["0", "6249.999999999999833333", "3750.000000000000166667"],
      },
      {
        x_total: "330000",
        reserve: ["0", "137499.999999999999866663", "182500.000000000000133337"],
        xi: ["0", "6250.0000000000002", "3749.9999999999998"],
      },
      {
        x_total: "340000",
        reserve: ["0", "143750.000000000000066663", "186249.999999999999933337"],
        xi: ["0", "6249.999999999999833333", "3750.000000000000166667"],
      },
      {
        x_total: "350000",
        reserve: ["0", "149999.999999999999899996", "190000.000000000000100004"],
        xi: ["0", "6250.0000000000002", "3749.9999999999998"],
      },
      {
        x_total: "360000",
        reserve: ["0", "156250.000000000000099996", "193749.999999999999900004"],
        xi: ["0", "6249.999999999999833333", "3750.000000000000166667"],
      },
      {
        x_total: "370000",
        reserve: ["0", "162499.999999999999933329", "197500.000000000000066671"],
        xi: ["0", "6250.0000000000001", "3749.9999999999999"],
      },
      {
        x_total: "380000",
        reserve: ["0", "168750.000000000000033329", "201249.999999999999966671"],
        xi: ["0", "6249.999999999999833333", "3750.000000000000166667"],
      },
      {
        x_total: "390000",
        reserve: ["0", "174999.999999999999866662", "205000.000000000000133338"],
        xi: ["0", "6250.0000000000002", "3749.9999999999998"],
      },
      {
        x_total: "400000",
        reserve: ["0", "181250.000000000000066662", "208749.999999999999933338"],
        xi: ["0", "6249.999999999999833333", "3750.000000000000166667"],
      },
      {
        x_total: "410000",
        reserve: ["0", "187499.999999999999899995", "212500.000000000000100005"],
        xi: ["0", "6250.0000000000002", "3749.9999999999998"],
      },
      {
        x_total: "420000",
        reserve: ["0", "193750.000000000000099995", "216249.999999999999900005"],
        xi: ["0", "6249.999999999999833333", "3750.000000000000166667"],
      },
      {
        x_total: "430000",
        reserve: ["0", "199999.999999999999933328", "220000.000000000000066672"],
        xi: ["0", "6250.0000000000001", "3749.9999999999999"],
      },
      {
        x_total: "440000",
        reserve: ["0", "206250.000000000000033328", "223749.999999999999966672"],
        xi: ["0", "6249.999999999999833333", "3750.000000000000166667"],
      },
      {
        x_total: "450000",
        reserve: ["0", "212499.999999999999866661", "227500.000000000000133339"],
        xi: ["0", "6250.0000000000002", "3749.9999999999998"],
      },
      {
        x_total: "460000",
        reserve: ["0", "218750.000000000000066661", "231249.999999999999933339"],
        xi: ["0", "6249.999999999999833333", "3750.000000000000166667"],
      },
      {
        x_total: "470000",
        reserve: ["0", "224999.999999999999899994", "235000.000000000000100006"],
        xi: ["0", "6250.0000000000002", "3749.9999999999998"],
      },
      {
        x_total: "480000",
        reserve: ["0", "231250.000000000000099994", "238749.999999999999900006"],
        xi: ["0", "6249.999999999999833333", "3750.000000000000166667"],
      },
      {
        x_total: "490000",
        reserve: ["0", "237499.999999999999933327", "242500.000000000000066673"],
        xi: ["0", "6250.0000000000001", "3749.9999999999999"],
      },
      {
        x_total: "500000",
        reserve: ["0", "243750.000000000000033327", "246249.999999999999966673"],
        xi: ["0", "6249.999999999999833333", "3750.000000000000166667"],
      },
      {
        x_total: "510000",
        reserve: ["0", "249999.99999999999986666", "250000.00000000000013334"],
        xi: ["0", "6250.0000000000002", "3749.9999999999998"],
      },
      {
        x_total: "520000",
        reserve: ["0", "256250.00000000000006666", "253749.99999999999993334"],
        xi: ["0", "6249.999999999999833333", "3750.000000000000166667"],
      },
      {
        x_total: "530000",
        reserve: ["0", "262499.999999999999899993", "257500.000000000000100007"],
        xi: ["0", "6250.0000000000002", "3749.9999999999998"],
      },
      {
        x_total: "540000",
        reserve: ["0", "268750.000000000000099993", "261249.999999999999900007"],
        xi: ["0", "6249.999999999999833333", "3750.000000000000166667"],
      },
      {
        x_total: "550000",
        reserve: ["0", "274999.999999999999933326", "265000.000000000000066674"],
        xi: ["0", "6250.0000000000001", "3749.9999999999999"],
      },
      {
        x_total: "560000",
        reserve: ["0", "281250.000000000000033326", "268749.999999999999966674"],
        xi: ["0", "6249.999999999999833333", "3750.000000000000166667"],
      },
      {
        x_total: "570000",
        reserve: ["0", "287499.999999999999866659", "272500.000000000000133341"],
        xi: ["0", "6250.0000000000002", "3749.9999999999998"],
      },
      {
        x_total: "580000",
        reserve: ["0", "293750.000000000000066659", "276249.999999999999933341"],
        xi: ["0", "6249.999999999999833333", "3750.000000000000166667"],
      },
      {
        x_total: "590000",
        reserve: ["0", "299999.999999999999899992", "280000.000000000000100008"],
        xi: ["0", "6250.0000000000002", "3749.9999999999998"],
      },
      {
        x_total: "600000",
        reserve: ["0", "306250.000000000000099992", "283749.999999999999900008"],
        xi: ["0", "6249.999999999999833333", "3750.000000000000166667"],
      },
      {
        x_total: "610000",
        reserve: ["0", "312499.999999999999933325", "287500.000000000000066675"],
        xi: ["0", "6250.0000000000001", "3749.9999999999999"],
      },
      {
        x_total: "620000",
        reserve: ["0", "318750.000000000000033325", "291249.999999999999966675"],
        xi: ["0", "6249.999999999999833333", "3750.000000000000166667"],
      },
      {
        x_total: "630000",
        reserve: ["0", "324999.999999999999866658", "295000.000000000000133342"],
        xi: ["0", "6250.0000000000002", "3749.9999999999998"],
      },
      {
        x_total: "640000",
        reserve: ["0", "331250.000000000000066658", "298749.999999999999933342"],
        xi: ["0", "6249.999999999999833333", "3750.000000000000166667"],
      },
      {
        x_total: "650000",
        reserve: ["0", "337499.999999999999899991", "302500.000000000000100009"],
        xi: ["0", "6250.0000000000002", "3749.9999999999998"],
      },
      {
        x_total: "660000",
        reserve: ["0", "343750.000000000000099991", "306249.999999999999900009"],
        xi: ["0", "6249.999999999999833333", "3750.000000000000166667"],
      },
      {
        x_total: "670000",
        reserve: ["0", "349999.999999999999933324", "310000.000000000000066676"],
        xi: ["0", "6250.0000000000001", "3749.9999999999999"],
      },
      {
        x_total: "680000",
        reserve: ["0", "356250.000000000000033324", "313749.999999999999966676"],
        xi: ["0", "6249.999999999999833333", "3750.000000000000166667"],
      },
      {
        x_total: "690000",
        reserve: ["0", "362499.999999999999866657", "317500.000000000000133343"],
        xi: ["0", "6250.0000000000002", "3749.9999999999998"],
      },
      {
        x_total: "700000",
        reserve: ["0", "368750.000000000000066657", "321249.999999999999933343"],
        xi: ["0", "6249.999999999999833333", "3750.000000000000166667"],
      },
      {
        x_total: "710000",
        reserve: ["0", "374999.99999999999989999", "325000.00000000000010001"],
        xi: ["0", "6250.0000000000002", "3749.9999999999998"],
      },
      {
        x_total: "720000",
        reserve: ["0", "381250.00000000000009999", "328749.99999999999990001"],
        xi: ["0", "6249.999999999999833333", "3750.000000000000166667"],
      },
      {
        x_total: "730000",
        reserve: ["0", "387499.999999999999933323", "332500.000000000000066677"],
        xi: ["0", "6250.0000000000001", "3749.9999999999999"],
      },
      {
        x_total: "740000",
        reserve: ["0", "393750.000000000000033323", "336249.999999999999966677"],
        xi: ["0", "6249.999999999999833333", "3750.000000000000166667"],
      },
      {
        x_total: "750000",
        reserve: ["0", "399999.999999999999866656", "340000.000000000000133344"],
        xi: ["0", "6250.0000000000002", "3749.9999999999998"],
      },
      {
        x_total: "760000",
        reserve: ["0", "406250.000000000000066656", "343749.999999999999933344"],
        xi: ["0", "6249.999999999999833333", "3750.000000000000166667"],
      },
      {
        x_total: "770000",
        reserve: ["0", "412499.999999999999899989", "347500.000000000000100011"],
        xi: ["0", "6250.0000000000002", "3749.9999999999998"],
      },
      {
        x_total: "780000",
        reserve: ["0", "418750.000000000000099989", "351249.999999999999900011"],
        xi: ["0", "6249.999999999999833333", "3750.000000000000166667"],
      },
      {
        x_total: "790000",
        reserve: ["0", "424999.999999999999933322", "355000.000000000000066678"],
        xi: ["0", "6250.0000000000001", "3749.9999999999999"],
      },
      {
        x_total: "800000",
        reserve: ["0", "431250.000000000000033322", "358749.999999999999966678"],
        xi: ["0", "6249.999999999999833333", "3750.000000000000166667"],
      },
      {
        x_total: "810000",
        reserve: ["0", "437499.999999999999866655", "362500.000000000000133345"],
        xi: ["0", "6250.0000000000002", "3749.9999999999998"],
      },
      {
        x_total: "820000",
        reserve: ["0", "443750.000000000000066655", "366249.999999999999933345"],
        xi: ["0", "6249.999999999999833333", "3750.000000000000166667"],
      },
      {
        x_total: "830000",
        reserve: ["0", "449999.999999999999899988", "370000.000000000000100012"],
        xi: ["0", "6250.0000000000002", "3749.9999999999998"],
      },
      {
        x_total: "840000",
        reserve: ["0", "456250.000000000000099988", "373749.999999999999900012"],
        xi: ["0", "6249.999999999999833333", "3750.000000000000166667"],
      },
      {
        x_total: "850000",
        reserve: ["0", "462499.999999999999933321", "377500.000000000000066679"],
        xi: ["0", "6250.0000000000001", "3749.9999999999999"],
      },
      {
        x_total: "860000",
        reserve: ["0", "468750.000000000000033321", "381249.999999999999966679"],
        xi: ["0", "6249.999999999999833333", "3750.000000000000166667"],
      },
      {
        x_total: "870000",
        reserve: ["0", "474999.999999999999866654", "385000.000000000000133346"],
        xi: ["0", "6250.0000000000002", "3749.9999999999998"],
      },
      {
        x_total: "880000",
        reserve: ["0", "481250.000000000000066654", "388749.999999999999933346"],
        xi: ["0", "6249.999999999999833333", "3750.000000000000166667"],
      },
      {
        x_total: "890000",
        reserve: ["0", "487499.999999999999899987", "392500.000000000000100013"],
        xi: ["0", "6250.0000000000002", "3749.9999999999998"],
      },
      {
        x_total: "900000",
        reserve: ["0", "493750.000000000000099987", "396249.999999999999900013"],
        xi: ["0", "6249.999999999999833333", "3750.000000000000166667"],
      },
      {
        x_total: "910000",
        reserve: ["0", "499999.99999999999993332", "400000.00000000000006668"],
        xi: ["6302.52100840336090909", "2310.92436974789969091", "1386.5546218487394"],
      },
      {
        x_total: "920000",
        reserve: ["6302.52100840336090909", "502310.92436974789962423", "401386.55462184873946668"],
        xi: ["6302.521008403361833334", "2310.924369747898666666", "1386.5546218487395"],
      },
      {
        x_total: "930000",
        reserve: ["12605.042016806722742424", "504621.848739495798290896", "402773.10924369747896668"],
        xi: ["6302.52100840336090909", "2310.92436974789959091", "1386.5546218487395"],
      },
      {
        x_total: "940000",
        reserve: ["18907.563025210083651514", "506932.773109243697881806", "404159.66386554621846668"],
        xi: ["6302.521008403361833334", "2310.924369747898666666", "1386.5546218487395"],
      },
      {
        x_total: "950000",
        reserve: ["25210.084033613445484848", "509243.697478991596548472", "405546.21848739495796668"],
        xi: ["6302.52100840336090909", "2310.92436974789959091", "1386.5546218487395"],
      },
      {
        x_total: "960000",
        reserve: ["31512.605042016806393938", "511554.621848739496139382", "406932.77310924369746668"],
        xi: ["6302.521008403361666667", "2310.924369747898833333", "1386.5546218487395"],
      },
      {
        x_total: "970000",
        reserve: ["37815.126050420168060605", "513865.546218487394972715", "408319.32773109243696668"],
        xi: ["6302.5210084033616", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "980000",
        reserve: ["44117.647058823529660605", "516176.470588235293972715", "409705.88235294117636668"],
        xi: ["6302.52100840336090909", "2310.92436974789949091", "1386.5546218487396"],
      },
      {
        x_total: "990000",
        reserve: ["50420.168067226890569695", "518487.394957983193463625", "411092.43697478991596668"],
        xi: ["6302.5210084033615", "2310.924369747899", "1386.5546218487395"],
      },
      {
        x_total: "1000000",
        reserve: ["56722.689075630252069695", "520798.319327731092463625", "412478.99159663865546668"],
        xi: ["6302.5210084033616", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1010000",
        reserve: ["63025.210084033613669695", "523109.243697478991463625", "413865.54621848739486668"],
        xi: ["6302.52100840336090909", "2310.92436974789949091", "1386.5546218487396"],
      },
      {
        x_total: "1020000",
        reserve: ["69327.731092436974578785", "525420.168067226890954535", "415252.10084033613446668"],
        xi: ["6302.5210084033615", "2310.924369747899", "1386.5546218487395"],
      },
      {
        x_total: "1030000",
        reserve: ["75630.252100840336078785", "527731.092436974789954535", "416638.65546218487396668"],
        xi: ["6302.5210084033616", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1040000",
        reserve: ["81932.773109243697678785", "530042.016806722688954535", "418025.21008403361336668"],
        xi: ["6302.52100840336090909", "2310.92436974789959091", "1386.5546218487395"],
      },
      {
        x_total: "1050000",
        reserve: ["88235.294117647058587875", "532352.941176470588545445", "419411.76470588235286668"],
        xi: ["6302.521008403361833334", "2310.924369747898666666", "1386.5546218487395"],
      },
      {
        x_total: "1060000",
        reserve: ["94537.815126050420421209", "534663.865546218487212111", "420798.31932773109236668"],
        xi: ["6302.52100840336090909", "2310.92436974789959091", "1386.5546218487395"],
      },
      {
        x_total: "1070000",
        reserve: ["100840.336134453781330299", "536974.789915966386803021", "422184.87394957983186668"],
        xi: ["6302.521008403361666667", "2310.924369747898833333", "1386.5546218487395"],
      },
      {
        x_total: "1080000",
        reserve: ["107142.857142857142996966", "539285.714285714285636354", "423571.42857142857136668"],
        xi: ["6302.52100840336090909", "2310.92436974789959091", "1386.5546218487395"],
      },
      {
        x_total: "1090000",
        reserve: ["113445.378151260503906056", "541596.638655462185227264", "424957.98319327731086668"],
        xi: ["6302.521008403361833334", "2310.924369747898666666", "1386.5546218487395"],
      },
      {
        x_total: "1100000",
        reserve: ["119747.89915966386573939", "543907.56302521008389393", "426344.53781512605036668"],
        xi: ["6302.52100840336090909", "2310.92436974789959091", "1386.5546218487395"],
      },
      {
        x_total: "1110000",
        reserve: ["126050.42016806722664848", "546218.48739495798348484", "427731.09243697478986668"],
        xi: ["6302.521008403361666667", "2310.924369747898833333", "1386.5546218487395"],
      },
      {
        x_total: "1120000",
        reserve: ["132352.941176470588315147", "548529.411764705882318173", "429117.64705882352936668"],
        xi: ["6302.52100840336090909", "2310.92436974789959091", "1386.5546218487395"],
      },
      {
        x_total: "1130000",
        reserve: ["138655.462184873949224237", "550840.336134453781909083", "430504.20168067226886668"],
        xi: ["6302.521008403361833334", "2310.924369747898666666", "1386.5546218487395"],
      },
      {
        x_total: "1140000",
        reserve: ["144957.983193277311057571", "553151.260504201680575749", "431890.75630252100836668"],
        xi: ["6302.52100840336090909", "2310.92436974789959091", "1386.5546218487395"],
      },
      {
        x_total: "1150000",
        reserve: ["151260.504201680671966661", "555462.184873949580166659", "433277.31092436974786668"],
        xi: ["6302.521008403361666667", "2310.924369747898833333", "1386.5546218487395"],
      },
      {
        x_total: "1160000",
        reserve: ["157563.025210084033633328", "557773.109243697478999992", "434663.86554621848736668"],
        xi: ["6302.5210084033616", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1170000",
        reserve: ["163865.546218487395233328", "560084.033613445377999992", "436050.42016806722676668"],
        xi: ["6302.52100840336090909", "2310.92436974789949091", "1386.5546218487396"],
      },
      {
        x_total: "1180000",
        reserve: ["170168.067226890756142418", "562394.957983193277490902", "437436.97478991596636668"],
        xi: ["6302.5210084033615", "2310.924369747899", "1386.5546218487395"],
      },
      {
        x_total: "1190000",
        reserve: ["176470.588235294117642418", "564705.882352941176490902", "438823.52941176470586668"],
        xi: ["6302.5210084033616", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1200000",
        reserve: ["182773.109243697479242418", "567016.806722689075490902", "440210.08403361344526668"],
        xi: ["6302.52100840336090909", "2310.92436974789949091", "1386.5546218487396"],
      },
      {
        x_total: "1210000",
        reserve: ["189075.630252100840151508", "569327.731092436974981812", "441596.63865546218486668"],
        xi: ["6302.5210084033615", "2310.924369747899", "1386.5546218487395"],
      },
      {
        x_total: "1220000",
        reserve: ["195378.151260504201651508", "571638.655462184873981812", "442983.19327731092436668"],
        xi: ["6302.5210084033616", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1230000",
        reserve: ["201680.672268907563251508", "573949.579831932772981812", "444369.74789915966376668"],
        xi: ["6302.52100840336090909", "2310.92436974789949091", "1386.5546218487396"],
      },
      {
        x_total: "1240000",
        reserve: ["207983.193277310924160598", "576260.504201680672472722", "445756.30252100840336668"],
        xi: ["6302.5210084033615", "2310.924369747899", "1386.5546218487395"],
      },
      {
        x_total: "1250000",
        reserve: ["214285.714285714285660598", "578571.428571428571472722", "447142.85714285714286668"],
        xi: ["6302.5210084033616", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1260000",
        reserve: ["220588.235294117647260598", "580882.352941176470472722", "448529.41176470588226668"],
        xi: ["6302.52100840336090909", "2310.92436974789959091", "1386.5546218487395"],
      },
      {
        x_total: "1270000",
        reserve: ["226890.756302521008169688", "583193.277310924370063632", "449915.96638655462176668"],
        xi: ["6302.521008403361833334", "2310.924369747898666666", "1386.5546218487395"],
      },
      {
        x_total: "1280000",
        reserve: ["233193.277310924370003022", "585504.201680672268730298", "451302.52100840336126668"],
        xi: ["6302.52100840336090909", "2310.92436974789949091", "1386.5546218487396"],
      },
      {
        x_total: "1290000",
        reserve: ["239495.798319327730912112", "587815.126050420168221208", "452689.07563025210086668"],
        xi: ["6302.5210084033615", "2310.924369747899", "1386.5546218487395"],
      },
      {
        x_total: "1300000",
        reserve: ["245798.319327731092412112", "590126.050420168067221208", "454075.63025210084036668"],
        xi: ["6302.5210084033616", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1310000",
        reserve: ["252100.840336134454012112", "592436.974789915966221208", "455462.18487394957976668"],
        xi: ["6302.52100840336090909", "2310.92436974789959091", "1386.5546218487395"],
      },
      {
        x_total: "1320000",
        reserve: ["258403.361344537814921202", "594747.899159663865812118", "456848.73949579831926668"],
        xi: ["6302.521008403361666667", "2310.924369747898833333", "1386.5546218487395"],
      },
      {
        x_total: "1330000",
        reserve: ["264705.882352941176587869", "597058.823529411764645451", "458235.29411764705876668"],
        xi: ["6302.52100840336090909", "2310.92436974789959091", "1386.5546218487395"],
      },
      {
        x_total: "1340000",
        reserve: ["271008.403361344537496959", "599369.747899159664236361", "459621.84873949579826668"],
        xi: ["6302.521008403361833334", "2310.924369747898666666", "1386.5546218487395"],
      },
      {
        x_total: "1350000",
        reserve: ["277310.924369747899330293", "601680.672268907562903027", "461008.40336134453776668"],
        xi: ["6302.52100840336090909", "2310.92436974789959091", "1386.5546218487395"],
      },
      {
        x_total: "1360000",
        reserve: ["283613.445378151260239383", "603991.596638655462493937", "462394.95798319327726668"],
        xi: ["6302.521008403361666667", "2310.924369747898833333", "1386.5546218487395"],
      },
      {
        x_total: "1370000",
        reserve: ["289915.96638655462190605", "606302.52100840336132727", "463781.51260504201676668"],
        xi: ["6302.52100840336090909", "2310.92436974789959091", "1386.5546218487395"],
      },
      {
        x_total: "1380000",
        reserve: ["296218.48739495798281514", "608613.44537815126091818", "465168.06722689075626668"],
        xi: ["6302.521008403361833334", "2310.924369747898666666", "1386.5546218487395"],
      },
      {
        x_total: "1390000",
        reserve: ["302521.008403361344648474", "610924.369747899159584846", "466554.62184873949576668"],
        xi: ["6302.52100840336090909", "2310.92436974789959091", "1386.5546218487395"],
      },
      {
        x_total: "1400000",
        reserve: ["308823.529411764705557564", "613235.294117647059175756", "467941.17647058823526668"],
        xi: ["6302.521008403361833334", "2310.924369747898666666", "1386.5546218487395"],
      },
      {
        x_total: "1410000",
        reserve: ["315126.050420168067390898", "615546.218487394957842422", "469327.73109243697476668"],
        xi: ["6302.52100840336090909", "2310.92436974789959091", "1386.5546218487395"],
      },
      {
        x_total: "1420000",
        reserve: ["321428.571428571428299988", "617857.142857142857433332", "470714.28571428571426668"],
        xi: ["6302.521008403361666667", "2310.924369747898833333", "1386.5546218487395"],
      },
      {
        x_total: "1430000",
        reserve: ["327731.092436974789966655", "620168.067226890756266665", "472100.84033613445376668"],
        xi: ["6302.5210084033616", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1440000",
        reserve: ["334033.613445378151566655", "622478.991596638655266665", "473487.39495798319316668"],
        xi: ["6302.52100840336090909", "2310.92436974789949091", "1386.5546218487396"],
      },
      {
        x_total: "1450000",
        reserve: ["340336.134453781512475745", "624789.915966386554757575", "474873.94957983193276668"],
        xi: ["6302.5210084033615", "2310.924369747899", "1386.5546218487395"],
      },
      {
        x_total: "1460000",
        reserve: ["346638.655462184873975745", "627100.840336134453757575", "476260.50420168067226668"],
        xi: ["6302.5210084033616", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1470000",
        reserve: ["352941.176470588235575745", "629411.764705882352757575", "477647.05882352941166668"],
        xi: ["6302.52100840336090909", "2310.92436974789949091", "1386.5546218487396"],
      },
      {
        x_total: "1480000",
        reserve: ["359243.697478991596484835", "631722.689075630252248485", "479033.61344537815126668"],
        xi: ["6302.5210084033615", "2310.924369747899", "1386.5546218487395"],
      },
      {
        x_total: "1490000",
        reserve: ["365546.218487394957984835", "634033.613445378151248485", "480420.16806722689076668"],
        xi: ["6302.5210084033616", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1500000",
        reserve: ["371848.739495798319584835", "636344.537815126050248485", "481806.72268907563016668"],
        xi: ["6302.52100840336090909", "2310.92436974789949091", "1386.5546218487396"],
      },
      {
        x_total: "1510000",
        reserve: ["378151.260504201680493925", "638655.462184873949739395", "483193.27731092436976668"],
        xi: ["6302.5210084033615", "2310.924369747899", "1386.5546218487395"],
      },
      {
        x_total: "1520000",
        reserve: ["384453.781512605041993925", "640966.386554621848739395", "484579.83193277310926668"],
        xi: ["6302.5210084033616", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1530000",
        reserve: ["390756.302521008403593925", "643277.310924369747739395", "485966.38655462184866668"],
        xi: ["6302.52100840336090909", "2310.92436974789959091", "1386.5546218487395"],
      },
      {
        x_total: "1540000",
        reserve: ["397058.823529411764503015", "645588.235294117647330305", "487352.94117647058816668"],
        xi: ["6302.521008403361666667", "2310.924369747898833333", "1386.5546218487395"],
      },
      {
        x_total: "1550000",
        reserve: ["403361.344537815126169682", "647899.159663865546163638", "488739.49579831932766668"],
        xi: ["6302.52100840336090909", "2310.92436974789959091", "1386.5546218487395"],
      },
      {
        x_total: "1560000",
        reserve: ["409663.865546218487078772", "650210.084033613445754548", "490126.05042016806716668"],
        xi: ["6302.521008403361833334", "2310.924369747898666666", "1386.5546218487395"],
      },
      {
        x_total: "1570000",
        reserve: ["415966.386554621848912106", "652521.008403361344421214", "491512.60504201680666668"],
        xi: ["6302.52100840336090909", "2310.92436974789959091", "1386.5546218487395"],
      },
      {
        x_total: "1580000",
        reserve: ["422268.907563025209821196", "654831.932773109244012124", "492899.15966386554616668"],
        xi: ["6302.521008403361833334", "2310.924369747898666666", "1386.5546218487395"],
      },
      {
        x_total: "1590000",
        reserve: ["428571.42857142857165453", "657142.85714285714267879", "494285.71428571428566668"],
        xi: ["6302.52100840336090909", "2310.92436974789959091", "1386.5546218487395"],
      },
      {
        x_total: "1600000",
        reserve: ["434873.94957983193256362", "659453.7815126050422697", "495672.26890756302516668"],
        xi: ["6302.521008403361666667", "2310.924369747898833333", "1386.5546218487395"],
      },
      {
        x_total: "1610000",
        reserve: ["441176.470588235294230287", "661764.705882352941103033", "497058.82352941176466668"],
        xi: ["6302.52100840336090909", "2310.92436974789959091", "1386.5546218487395"],
      },
      {
        x_total: "1620000",
        reserve: ["447478.991596638655139377", "664075.630252100840693943", "498445.37815126050416668"],
        xi: ["6302.521008403361833334", "2310.924369747898666666", "1386.5546218487395"],
      },
      {
        x_total: "1630000",
        reserve: ["453781.512605042016972711", "666386.554621848739360609", "499831.93277310924366668"],
        xi: ["6302.52100840336090909", "2310.92436974789959091", "1386.5546218487395"],
      },
      {
        x_total: "1640000",
        reserve: ["460084.033613445377881801", "668697.478991596638951519", "501218.48739495798316668"],
        xi: ["6302.521008403361666667", "2310.924369747898833333", "1386.5546218487395"],
      },
      {
        x_total: "1650000",
        reserve: ["466386.554621848739548468", "671008.403361344537784852", "502605.04201680672266668"],
        xi: ["6302.52100840336090909", "2310.92436974789959091", "1386.5546218487395"],
      },
      {
        x_total: "1660000",
        reserve: ["472689.075630252100457558", "673319.327731092437375762", "503991.59663865546216668"],
        xi: ["6302.521008403361833334", "2310.924369747898666666", "1386.5546218487395"],
      },
      {
        x_total: "1670000",
        reserve: ["478991.596638655462290892", "675630.252100840336042428", "505378.15126050420166668"],
        xi: ["6302.52100840336090909", "2310.92436974789959091", "1386.5546218487395"],
      },
      {
        x_total: "1680000",
        reserve: ["485294.117647058823199982", "677941.176470588235633338", "506764.70588235294116668"],
        xi: ["6302.521008403361666667", "2310.924369747898833333", "1386.5546218487395"],
      },
      {
        x_total: "1690000",
        reserve: ["491596.638655462184866649", "680252.100840336134466671", "508151.26050420168066668"],
        xi: ["6302.5210084033616", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1700000",
        reserve: ["497899.159663865546466649", "682563.025210084033466671", "509537.81512605042006668"],
        xi: ["6302.52100840336090909", "2310.92436974789949091", "1386.5546218487396"],
      },
      {
        x_total: "1710000",
        reserve: ["504201.680672268907375739", "684873.949579831932957581", "510924.36974789915966668"],
        xi: ["6302.5210084033615", "2310.924369747899", "1386.5546218487395"],
      },
      {
        x_total: "1720000",
        reserve: ["510504.201680672268875739", "687184.873949579831957581", "512310.92436974789916668"],
        xi: ["6302.5210084033616", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1730000",
        reserve: ["516806.722689075630475739", "689495.798319327730957581", "513697.47899159663856668"],
        xi: ["6302.52100840336090909", "2310.92436974789949091", "1386.5546218487396"],
      },
      {
        x_total: "1740000",
        reserve: ["523109.243697478991384829", "691806.722689075630448491", "515084.03361344537816668"],
        xi: ["6302.5210084033615", "2310.924369747899", "1386.5546218487395"],
      },
      {
        x_total: "1750000",
        reserve: ["529411.764705882352884829", "694117.647058823529448491", "516470.58823529411766668"],
        xi: ["6302.5210084033616", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1760000",
        reserve: ["535714.285714285714484829", "696428.571428571428448491", "517857.14285714285706668"],
        xi: ["6302.52100840336090909", "2310.92436974789959091", "1386.5546218487395"],
      },
      {
        x_total: "1770000",
        reserve: ["542016.806722689075393919", "698739.495798319328039401", "519243.69747899159656668"],
        xi: ["6302.521008403361833334", "2310.924369747898666666", "1386.5546218487395"],
      },
      {
        x_total: "1780000",
        reserve: ["548319.327731092437227253", "701050.420168067226706067", "520630.25210084033606668"],
        xi: ["6302.52100840336090909", "2310.92436974789959091", "1386.5546218487395"],
      },
      {
        x_total: "1790000",
        reserve: ["554621.848739495798136343", "703361.344537815126296977", "522016.80672268907556668"],
        xi: ["6302.521008403361666667", "2310.924369747898833333", "1386.5546218487395"],
      },
      {
        x_total: "1800000",
        reserve: ["560924.36974789915980301", "705672.26890756302513031", "523403.36134453781506668"],
        xi: ["6302.52100840336090909", "2310.92436974789959091", "1386.5546218487395"],
      },
      {
        x_total: "1810000",
        reserve: ["567226.8907563025207121", "707983.19327731092472122", "524789.91596638655456668"],
        xi: ["6302.521008403361833334", "2310.924369747898666666", "1386.5546218487395"],
      },
      {
        x_total: "1820000",
        reserve: ["573529.411764705882545434", "710294.117647058823387886", "526176.47058823529406668"],
        xi: ["6302.52100840336090909", "2310.92436974789959091", "1386.5546218487395"],
      },
      {
        x_total: "1830000",
        reserve: ["579831.932773109243454524", "712605.042016806722978796", "527563.02521008403356668"],
        xi: ["6302.521008403361666667", "2310.924369747898833333", "1386.5546218487395"],
      },
      {
        x_total: "1840000",
        reserve: ["586134.453781512605121191", "714915.966386554621812129", "528949.57983193277306668"],
        xi: ["6302.52100840336090909", "2310.92436974789959091", "1386.5546218487395"],
      },
      {
        x_total: "1850000",
        reserve: ["592436.974789915966030281", "717226.890756302521403039", "530336.13445378151256668"],
        xi: ["6302.521008403361833334", "2310.924369747898666666", "1386.5546218487395"],
      },
      {
        x_total: "1860000",
        reserve: ["598739.495798319327863615", "719537.815126050420069705", "531722.68907563025206668"],
        xi: ["6302.52100840336090909", "2310.92436974789959091", "1386.5546218487395"],
      },
      {
        x_total: "1870000",
        reserve: ["605042.016806722688772705", "721848.739495798319660615", "533109.24369747899156668"],
        xi: ["6302.521008403361666667", "2310.924369747898833333", "1386.5546218487395"],
      },
      {
        x_total: "1880000",
        reserve: ["611344.537815126050439372", "724159.663865546218493948", "534495.79831932773106668"],
        xi: ["6302.5210084033616", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1890000",
        reserve: ["617647.058823529412039372", "726470.588235294117493948", "535882.35294117647046668"],
        xi: ["6302.52100840336090909", "2310.92436974789949091", "1386.5546218487396"],
      },
      {
        x_total: "1900000",
        reserve: ["623949.579831932772948462", "728781.512605042016984858", "537268.90756302521006668"],
        xi: ["6302.5210084033615", "2310.924369747899", "1386.5546218487395"],
      },
      {
        x_total: "1910000",
        reserve: ["630252.100840336134448462", "731092.436974789915984858", "538655.46218487394956668"],
        xi: ["6302.5210084033616", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1920000",
        reserve: ["636554.621848739496048462", "733403.361344537814984858", "540042.01680672268896668"],
        xi: ["6302.52100840336090909", "2310.92436974789949091", "1386.5546218487396"],
      },
      {
        x_total: "1930000",
        reserve: ["642857.142857142856957552", "735714.285714285714475768", "541428.57142857142856668"],
        xi: ["6302.5210084033615", "2310.924369747899", "1386.5546218487395"],
      },
      {
        x_total: "1940000",
        reserve: ["649159.663865546218457552", "738025.210084033613475768", "542815.12605042016806668"],
        xi: ["6302.5210084033616", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1950000",
        reserve: ["655462.184873949580057552", "740336.134453781512475768", "544201.68067226890746668"],
        xi: ["6302.52100840336090909", "2310.92436974789949091", "1386.5546218487396"],
      },
      {
        x_total: "1960000",
        reserve: ["661764.705882352940966642", "742647.058823529411966678", "545588.23529411764706668"],
        xi: ["6302.5210084033615", "2310.924369747899", "1386.5546218487395"],
      },
      {
        x_total: "1970000",
        reserve: ["668067.226890756302466642", "744957.983193277310966678", "546974.78991596638656668"],
        xi: ["6302.5210084033616", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1980000",
        reserve: ["674369.747899159664066642", "747268.907563025209966678", "548361.34453781512596668"],
        xi: ["6302.52100840336090909", "2310.92436974789959091", "1386.5546218487395"],
      },
      {
        x_total: "1990000",
        reserve: ["680672.268907563024975732", "749579.831932773109557588", "549747.89915966386546668"],
        xi: ["6302.521008403361833334", "2310.924369747898666666", "1386.5546218487395"],
      },
      {
        x_total: "2000000",
        reserve: ["686974.789915966386809066", "751890.756302521008224254", "551134.45378151260496668"],
        xi: ["6302.52100840336090909", "2310.92436974789959091", "1386.5546218487395"],
      },
      {
        x_total: "2010000",
        reserve: ["693277.310924369747718156", "754201.680672268907815164", "552521.00840336134446668"],
        xi: ["6302.521008403361666667", "2310.924369747898833333", "1386.5546218487395"],
      },
      {
        x_total: "2020000",
        reserve: ["699579.831932773109384823", "756512.605042016806648497", "553907.56302521008396668"],
        xi: ["6302.52100840336090909", "2310.92436974789959091", "1386.5546218487395"],
      },
      {
        x_total: "2030000",
        reserve: ["705882.352941176470293913", "758823.529411764706239407", "555294.11764705882346668"],
        xi: ["6302.521008403361833334", "2310.924369747898666666", "1386.5546218487395"],
      },
      {
        x_total: "2040000",
        reserve: ["712184.873949579832127247", "761134.453781512604906073", "556680.67226890756296668"],
        xi: ["6302.52100840336090909", "2310.92436974789959091", "1386.5546218487395"],
      },
      {
        x_total: "2050000",
        reserve: ["718487.394957983193036337", "763445.378151260504496983", "558067.22689075630246668"],
        xi: ["6302.521008403361666667", "2310.924369747898833333", "1386.5546218487395"],
      },
      {
        x_total: "2060000",
        reserve: ["724789.915966386554703004", "765756.302521008403330316", "559453.78151260504196668"],
        xi: ["6302.52100840336090909", "2310.92436974789959091", "1386.5546218487395"],
      },
      {
        x_total: "2070000",
        reserve: ["731092.436974789915612094", "768067.226890756302921226", "560840.33613445378146668"],
        xi: ["6302.521008403361833334", "2310.924369747898666666", "1386.5546218487395"],
      },
      {
        x_total: "2080000",
        reserve: ["737394.957983193277445428", "770378.151260504201587892", "562226.89075630252096668"],
        xi: ["6302.52100840336090909", "2310.92436974789959091", "1386.5546218487395"],
      },
      {
        x_total: "2090000",
        reserve: ["743697.478991596638354518", "772689.075630252101178802", "563613.44537815126046668"],
        xi: ["6302.521008403361833334", "2310.924369747898666666", "1386.5546218487395"],
      },
      {
        x_total: "2100000",
        reserve: ["750000.000000000000187852", "774999.999999999999845468", "564999.99999999999996668"],
        xi: ["6302.52100840336090909", "2310.92436974789959091", "1386.5546218487395"],
      },
      {
        x_total: "2110000",
        reserve: ["756302.521008403361096942", "777310.924369747899436378", "566386.55462184873946668"],
        xi: ["6302.521008403361666667", "2310.924369747898833333", "1386.5546218487395"],
      },
      {
        x_total: "2120000",
        reserve: ["762605.042016806722763609", "779621.848739495798269711", "567773.10924369747896668"],
        xi: ["6302.52100840336090909", "2310.92436974789959091", "1386.5546218487395"],
      },
      {
        x_total: "2130000",
        reserve: ["768907.563025210083672699", "781932.773109243697860621", "569159.66386554621846668"],
        xi: ["6302.521008403361833334", "2310.924369747898666666", "1386.5546218487395"],
      },
      {
        x_total: "2140000",
        reserve: ["775210.084033613445506033", "784243.697478991596527287", "570546.21848739495796668"],
        xi: ["6302.52100840336090909", "2310.92436974789959091", "1386.5546218487395"],
      },
      {
        x_total: "2150000",
        reserve: ["781512.605042016806415123", "786554.621848739496118197", "571932.77310924369746668"],
        xi: ["6302.521008403361666667", "2310.924369747898833333", "1386.5546218487395"],
      },
      {
        x_total: "2160000",
        reserve: ["787815.12605042016808179", "788865.54621848739495153", "573319.32773109243696668"],
        xi: ["6302.5210084033616", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2170000",
        reserve: ["794117.64705882352968179", "791176.47058823529395153", "574705.88235294117636668"],
        xi: ["6302.52100840336090909", "2310.92436974789949091", "1386.5546218487396"],
      },
      {
        x_total: "2180000",
        reserve: ["800420.16806722689059088", "793487.39495798319344244", "576092.43697478991596668"],
        xi: ["6302.5210084033615", "2310.924369747899", "1386.5546218487395"],
      },
      {
        x_total: "2190000",
        reserve: ["806722.68907563025209088", "795798.31932773109244244", "577478.99159663865546668"],
        xi: ["6302.5210084033616", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2200000",
        reserve: ["813025.21008403361369088", "798109.24369747899144244", "578865.54621848739486668"],
        xi: ["6302.52100840336090909", "2310.92436974789949091", "1386.5546218487396"],
      },
      {
        x_total: "2210000",
        reserve: ["819327.73109243697459997", "800420.16806722689093335", "580252.10084033613446668"],
        xi: ["6302.5210084033615", "2310.924369747899", "1386.5546218487395"],
      },
      {
        x_total: "2220000",
        reserve: ["825630.25210084033609997", "802731.09243697478993335", "581638.65546218487396668"],
        xi: ["6302.5210084033616", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2230000",
        reserve: ["831932.77310924369769997", "805042.01680672268893335", "583025.21008403361336668"],
        xi: ["6302.52100840336090909", "2310.92436974789959091", "1386.5546218487395"],
      },
      {
        x_total: "2240000",
        reserve: ["838235.29411764705860906", "807352.94117647058852426", "584411.76470588235286668"],
        xi: ["6302.521008403361833334", "2310.924369747898666666", "1386.5546218487395"],
      },
      {
        x_total: "2250000",
        reserve: ["844537.815126050420442394", "809663.865546218487190926", "585798.31932773109236668"],
        xi: ["6302.52100840336090909", "2310.92436974789959091", "1386.5546218487395"],
      },
      {
        x_total: "2260000",
        reserve: ["850840.336134453781351484", "811974.789915966386781836", "587184.87394957983186668"],
        xi: ["6302.521008403361666667", "2310.924369747898833333", "1386.5546218487395"],
      },
      {
        x_total: "2270000",
        reserve: ["857142.857142857143018151", "814285.714285714285615169", "588571.42857142857136668"],
        xi: ["6302.52100840336090909", "2310.92436974789959091", "1386.5546218487395"],
      },
      {
        x_total: "2280000",
        reserve: ["863445.378151260503927241", "816596.638655462185206079", "589957.98319327731086668"],
        xi: ["6302.521008403361833334", "2310.924369747898666666", "1386.5546218487395"],
      },
      {
        x_total: "2290000",
        reserve: ["869747.899159663865760575", "818907.563025210083872745", "591344.53781512605036668"],
        xi: ["6302.52100840336090909", "2310.92436974789959091", "1386.5546218487395"],
      },
      {
        x_total: "2300000",
        reserve: ["876050.420168067226669665", "821218.487394957983463655", "592731.09243697478986668"],
        xi: ["6302.521008403361666667", "2310.924369747898833333", "1386.5546218487395"],
      },
      {
        x_total: "2310000",
        reserve: ["882352.941176470588336332", "823529.411764705882296988", "594117.64705882352936668"],
        xi: ["6302.52100840336090909", "2310.92436974789959091", "1386.5546218487395"],
      },
      {
        x_total: "2320000",
        reserve: ["888655.462184873949245422", "825840.336134453781887898", "595504.20168067226886668"],
        xi: ["6302.521008403361833334", "2310.924369747898666666", "1386.5546218487395"],
      },
      {
        x_total: "2330000",
        reserve: ["894957.983193277311078756", "828151.260504201680554564", "596890.75630252100836668"],
        xi: ["6302.52100840336090909", "2310.92436974789959091", "1386.5546218487395"],
      },
      {
        x_total: "2340000",
        reserve: ["901260.504201680671987846", "830462.184873949580145474", "598277.31092436974786668"],
        xi: ["6302.521008403361666667", "2310.924369747898833333", "1386.5546218487395"],
      },
      {
        x_total: "2350000",
        reserve: ["907563.025210084033654513", "832773.109243697478978807", "599663.86554621848736668"],
        xi: ["6302.52100840336090909", "2310.92436974789959091", "1386.5546218487395"],
      },
      {
        x_total: "2360000",
        reserve: ["913865.546218487394563603", "835084.033613445378569717", "601050.42016806722686668"],
        xi: ["6302.521008403361833334", "2310.924369747898666666", "1386.5546218487395"],
      },
      {
        x_total: "2370000",
        reserve: ["920168.067226890756396937", "837394.957983193277236383", "602436.97478991596636668"],
        xi: ["6302.52100840336090909", "2310.92436974789959091", "1386.5546218487395"],
      },
      {
        x_total: "2380000",
        reserve: ["926470.588235294117306027", "839705.882352941176827293", "603823.52941176470586668"],
        xi: ["6302.521008403361666667", "2310.924369747898833333", "1386.5546218487395"],
      },
      {
        x_total: "2390000",
        reserve: ["932773.109243697478972694", "842016.806722689075660626", "605210.08403361344536668"],
        xi: ["6302.5210084033616", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2400000",
        reserve: ["939075.630252100840572694", "844327.731092436974660626", "606596.63865546218476668"],
        xi: ["6302.52100840336090909", "2310.92436974789949091", "1386.5546218487396"],
      },
      {
        x_total: "2410000",
        reserve: ["945378.151260504201481784", "846638.655462184874151536", "607983.19327731092436668"],
        xi: ["6302.5210084033615", "2310.924369747899", "1386.5546218487395"],
      },
      {
        x_total: "2420000",
        reserve: ["951680.672268907562981784", "848949.579831932773151536", "609369.74789915966386668"],
        xi: ["6302.5210084033616", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2430000",
        reserve: ["957983.193277310924581784", "851260.504201680672151536", "610756.30252100840326668"],
        xi: ["6302.52100840336090909", "2310.92436974789949091", "1386.5546218487396"],
      },
      {
        x_total: "2440000",
        reserve: ["964285.714285714285490874", "853571.428571428571642446", "612142.85714285714286668"],
        xi: ["6302.5210084033615", "2310.924369747899", "1386.5546218487395"],
      },
      {
        x_total: "2450000",
        reserve: ["970588.235294117646990874", "855882.352941176470642446", "613529.41176470588236668"],
        xi: ["6302.5210084033616", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2460000",
        reserve: ["976890.756302521008590874", "858193.277310924369642446", "614915.96638655462176668"],
        xi: ["6302.52100840336090909", "2310.92436974789959091", "1386.5546218487395"],
      },
      {
        x_total: "2470000",
        reserve: ["983193.277310924369499964", "860504.201680672269233356", "616302.52100840336126668"],
        xi: ["6302.521008403361833334", "2310.924369747898666666", "1386.5546218487395"],
      },
      {
        x_total: "2480000",
        reserve: ["989495.798319327731333298", "862815.126050420167900022", "617689.07563025210076668"],
        xi: ["6302.52100840336090909", "2310.92436974789959091", "1386.5546218487395"],
      },
      {
        x_total: "2490000",
        reserve: ["995798.319327731092242388", "865126.050420168067490932", "619075.63025210084026668"],
        xi: ["4201.680672268907757612", "3623.949579831932542388", "2174.3697478991597"],
      },
      {
        x_total: "2500000",
        reserve: ["1000000", "868750.00000000000003332", "621249.99999999999996668"],
        xi: ["0", "6250", "3750"],
      },
      {
        x_total: "2510000",
        reserve: ["1000000", "875000.00000000000003332", "624999.99999999999996668"],
        xi: ["0", "6249.999999999999833333", "3750.000000000000166667"],
      },
      {
        x_total: "2520000",
        reserve: ["1000000", "881249.999999999999866653", "628750.000000000000133347"],
        xi: ["0", "6250.0000000000002", "3749.9999999999998"],
      },
      {
        x_total: "2530000",
        reserve: ["1000000", "887500.000000000000066653", "632499.999999999999933347"],
        xi: ["0", "6249.999999999999833333", "3750.000000000000166667"],
      },
      {
        x_total: "2540000",
        reserve: ["1000000", "893749.999999999999899986", "636250.000000000000100014"],
        xi: ["0", "6250.0000000000002", "3749.9999999999998"],
      },
      {
        x_total: "2550000",
        reserve: ["1000000", "900000.000000000000099986", "639999.999999999999900014"],
        xi: ["0", "6249.999999999999833333", "3750.000000000000166667"],
      },
      {
        x_total: "2560000",
        reserve: ["1000000", "906249.999999999999933319", "643750.000000000000066681"],
        xi: ["0", "6250.0000000000001", "3749.9999999999999"],
      },
      {
        x_total: "2570000",
        reserve: ["1000000", "912500.000000000000033319", "647499.999999999999966681"],
        xi: ["0", "6249.999999999999833333", "3750.000000000000166667"],
      },
      {
        x_total: "2580000",
        reserve: ["1000000", "918749.999999999999866652", "651250.000000000000133348"],
        xi: ["0", "6250.0000000000002", "3749.9999999999998"],
      },
      {
        x_total: "2590000",
        reserve: ["1000000", "925000.000000000000066652", "654999.999999999999933348"],
        xi: ["0", "6249.999999999999833333", "3750.000000000000166667"],
      },
      {
        x_total: "2600000",
        reserve: ["1000000", "931249.999999999999899985", "658750.000000000000100015"],
        xi: ["0", "6250.0000000000002", "3749.9999999999998"],
      },
      {
        x_total: "2610000",
        reserve: ["1000000", "937500.000000000000099985", "662499.999999999999900015"],
        xi: ["0", "6249.999999999999833333", "3750.000000000000166667"],
      },
      {
        x_total: "2620000",
        reserve: ["1000000", "943749.999999999999933318", "666250.000000000000066682"],
        xi: ["0", "6250.0000000000001", "3749.9999999999999"],
      },
      {
        x_total: "2630000",
        reserve: ["1000000", "950000.000000000000033318", "669999.999999999999966682"],
        xi: ["0", "6249.999999999999833333", "3750.000000000000166667"],
      },
      {
        x_total: "2640000",
        reserve: ["1000000", "956249.999999999999866651", "673750.000000000000133349"],
        xi: ["0", "6250.0000000000002", "3749.9999999999998"],
      },
      {
        x_total: "2650000",
        reserve: ["1000000", "962500.000000000000066651", "677499.999999999999933349"],
        xi: ["0", "6249.999999999999833333", "3750.000000000000166667"],
      },
      {
        x_total: "2660000",
        reserve: ["1000000", "968749.999999999999899984", "681250.000000000000100016"],
        xi: ["0", "6250.0000000000002", "3749.9999999999998"],
      },
      {
        x_total: "2670000",
        reserve: ["1000000", "975000.000000000000099984", "684999.999999999999900016"],
        xi: ["0", "6249.999999999999833333", "3750.000000000000166667"],
      },
      {
        x_total: "2680000",
        reserve: ["1000000", "981249.999999999999933317", "688750.000000000000066683"],
        xi: ["0", "6250.0000000000001", "3749.9999999999999"],
      },
      {
        x_total: "2690000",
        reserve: ["1000000", "987500.000000000000033317", "692499.999999999999966683"],
        xi: ["0", "6249.999999999999833333", "3750.000000000000166667"],
      },
      {
        x_total: "2700000",
        reserve: ["1000000", "993749.99999999999986665", "696250.00000000000013335"],
        xi: ["0", "6250.00000000000013335", "3749.99999999999986665"],
      },
      { x_total: "2710000", reserve: ["1000000", "1000000", "700000"], xi: ["0", "0", "10000"] },
      { x_total: "2720000", reserve: ["1000000", "1000000", "710000"], xi: ["0", "0", "10000"] },
      { x_total: "2730000", reserve: ["1000000", "1000000", "720000"], xi: ["0", "0", "10000"] },
      { x_total: "2740000", reserve: ["1000000", "1000000", "730000"], xi: ["0", "0", "10000"] },
      { x_total: "2750000", reserve: ["1000000", "1000000", "740000"], xi: ["0", "0", "10000"] },
      { x_total: "2760000", reserve: ["1000000", "1000000", "750000"], xi: ["0", "0", "10000"] },
      { x_total: "2770000", reserve: ["1000000", "1000000", "760000"], xi: ["0", "0", "10000"] },
      { x_total: "2780000", reserve: ["1000000", "1000000", "770000"], xi: ["0", "0", "10000"] },
      { x_total: "2790000", reserve: ["1000000", "1000000", "780000"], xi: ["0", "0", "10000"] },
      { x_total: "2800000", reserve: ["1000000", "1000000", "790000"], xi: ["0", "0", "10000"] },
      { x_total: "2810000", reserve: ["1000000", "1000000", "800000"], xi: ["0", "0", "10000"] },
      { x_total: "2820000", reserve: ["1000000", "1000000", "810000"], xi: ["0", "0", "10000"] },
      { x_total: "2830000", reserve: ["1000000", "1000000", "820000"], xi: ["0", "0", "10000"] },
      { x_total: "2840000", reserve: ["1000000", "1000000", "830000"], xi: ["0", "0", "10000"] },
      { x_total: "2850000", reserve: ["1000000", "1000000", "840000"], xi: ["0", "0", "10000"] },
      { x_total: "2860000", reserve: ["1000000", "1000000", "850000"], xi: ["0", "0", "10000"] },
      { x_total: "2870000", reserve: ["1000000", "1000000", "860000"], xi: ["0", "0", "10000"] },
      { x_total: "2880000", reserve: ["1000000", "1000000", "870000"], xi: ["0", "0", "10000"] },
      { x_total: "2890000", reserve: ["1000000", "1000000", "880000"], xi: ["0", "0", "10000"] },
      { x_total: "2900000", reserve: ["1000000", "1000000", "890000"], xi: ["0", "0", "10000"] },
      { x_total: "2910000", reserve: ["1000000", "1000000", "900000"], xi: ["0", "0", "10000"] },
      { x_total: "2920000", reserve: ["1000000", "1000000", "910000"], xi: ["0", "0", "10000"] },
      { x_total: "2930000", reserve: ["1000000", "1000000", "920000"], xi: ["0", "0", "10000"] },
      { x_total: "2940000", reserve: ["1000000", "1000000", "930000"], xi: ["0", "0", "10000"] },
      { x_total: "2950000", reserve: ["1000000", "1000000", "940000"], xi: ["0", "0", "10000"] },
      { x_total: "2960000", reserve: ["1000000", "1000000", "950000"], xi: ["0", "0", "10000"] },
      { x_total: "2970000", reserve: ["1000000", "1000000", "960000"], xi: ["0", "0", "10000"] },
      { x_total: "2980000", reserve: ["1000000", "1000000", "970000"], xi: ["0", "0", "10000"] },
      { x_total: "2990000", reserve: ["1000000", "1000000", "980000"], xi: ["0", "0", "10000"] },
      { x_total: "3000000", reserve: ["1000000", "1000000", "990000"], xi: ["0", "0", "10000"] },
    ]
    const step = 10000
    let progress = 0
    for (const test of cases) {
      progress += step
      expect(progress.toString()).to.equal(test.x_total)
      for (let i = 0; i < test.reserve.length; i++) {
        pools[i].reservedUsd = toWei(test.reserve[i])
      }
      const result = await testLibExpBorrowingRate.allocate(pools, toWei(step.toString()))
      expect(result.length).to.equal(test.xi.length)
      for (let i = 0; i < test.xi.length; i++) {
        const expectedIndex = getIndexByPoolId(result[i].poolId)
        expect(result[i].xi).to.be.closeTo(toWei(test.xi[expectedIndex]), toWei("0.0000001"), `case ${test}`)
      }
    }
    {
      // insufficient liquidity
      pools[0].reservedUsd = toWei("1000000")
      pools[1].reservedUsd = toWei("1000000")
      pools[2].reservedUsd = toWei("1000000")
      await expect(testLibExpBorrowingRate.allocate(pools, toWei("1"))).to.be.revertedWith("ExpBorrow: full")
    }
  })
})
