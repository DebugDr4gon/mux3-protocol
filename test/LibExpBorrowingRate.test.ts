import { ethers } from "hardhat"
import { expect } from "chai"
import { toWei, createContract } from "../scripts/deployUtils"
import { TestLibExpBorrowingRate } from "../typechain"
const U = ethers.utils
const B = ethers.BigNumber
import "ethereum-waffle" // BigNumber closeTo

describe("LibExpBorrowingRate", () => {
  let testLibExpBorrowingRate: TestLibExpBorrowingRate

  before(async () => {
    testLibExpBorrowingRate = (await createContract("TestLibExpBorrowingRate")) as TestLibExpBorrowingRate
  })

  it("divRoundUp", async () => {
    expect(await testLibExpBorrowingRate.testDivRoundUp(toWei("1"), toWei("3"))).to.equal(toWei("0.333333333333333334"))
    expect(await testLibExpBorrowingRate.testDivRoundUp(toWei("5252.100840336134125107"), toWei("1.25"))).to.equal(
      toWei("4201.680672268907300086")
    )
  })

  it("alignAllocationToLotSize: simple", async () => {
    {
      const allocations = await testLibExpBorrowingRate.testAlignAllocationToLotSize(
        toWei("10"),
        [toWei("2.3"), toWei("4.6"), toWei("3.1")],
        toWei("1")
      )
      expect(allocations[0]).to.equal(toWei("2"))
      expect(allocations[1]).to.equal(toWei("5"))
      expect(allocations[2]).to.equal(toWei("3"))
    }
  })
  it("alignAllocationToLotSize:round(0.5) = 1", async () => {
    {
      const allocations = await testLibExpBorrowingRate.testAlignAllocationToLotSize(
        toWei("1"),
        [toWei("0"), toWei("0.5"), toWei("0.5")],
        toWei("1")
      )
      expect(allocations[0]).to.equal(toWei("0"))
      expect(allocations[1]).to.equal(toWei("1"))
      expect(allocations[2]).to.equal(toWei("0"))
    }
  })
  it("alignAllocationToLotSize: size > sum(allocation)", async () => {
    {
      const allocations = await testLibExpBorrowingRate.testAlignAllocationToLotSize(
        toWei("1"),
        [toWei("0.333"), toWei("0.333"), toWei("0.333")],
        toWei("0.1")
      )
      expect(allocations[0]).to.equal(toWei("0.4"))
      expect(allocations[1]).to.equal(toWei("0.3"))
      expect(allocations[2]).to.equal(toWei("0.3"))
    }
  })
  it("alignAllocationToLotSize: size < sum(allocation)", async () => {
    {
      const allocations = await testLibExpBorrowingRate.testAlignAllocationToLotSize(
        toWei("1"),
        [toWei("0.334"), toWei("0.334"), toWei("0.334")],
        toWei("0.1")
      )
      expect(allocations[0]).to.equal(toWei("0.4"))
      expect(allocations[1]).to.equal(toWei("0.3"))
      expect(allocations[2]).to.equal(toWei("0.3"))
    }
  })
  it("alignAllocationToLotSize: size << sum(allocation), we ignore it", async () => {
    {
      const allocations = await testLibExpBorrowingRate.testAlignAllocationToLotSize(
        toWei("100"),
        [toWei("50.00001"), toWei("51.00001")],
        toWei("1")
      )
      expect(allocations[0]).to.equal(toWei("50"))
      expect(allocations[1]).to.equal(toWei("51"))
    }
  })

  it("getBorrowingRate config 1", async () => {
    const cases = [
      { r: "0", y: "0.101374892132543734" },
      { r: "5000000.0", y: "0.101889908242558447" },
      { r: "10000000.0", y: "0.102597842463962724" },
      { r: "15000000.0", y: "0.103570959327862269" },
      { r: "20000000.0", y: "0.104908592687254498" },
      { r: "25000000.0", y: "0.106747285521112928" },
      { r: "30000000.0", y: "0.109274727972771352" },
      { r: "35000000.0", y: "0.112748916390115778" },
      { r: "40000000.0", y: "0.117524489084675138" },
      { r: "45000000.0", y: "0.124088927112032676" },
      { r: "50000000.0", y: "0.133112315377928198" },
      { r: "55000000.0", y: "0.145515743585761609" },
      { r: "60000000.0", y: "0.162565329259509506" },
      { r: "65000000.0", y: "0.186001460527063955" },
      { r: "70000000.0", y: "0.218216451512783405" },
      { r: "75000000.0", y: "0.262498745051851834" },
      { r: "80000000.0", y: "0.323368590458590732" },
      { r: "85000000.0", y: "0.407039461674224223" },
      { r: "90000000.0", y: "0.522052316449900577" },
      { r: "95000000.0", y: "0.680147440493251709" },
      { r: "100000000.0", y: "0.897462872711951576" },
      { r: "105000000.0", y: "1.196181744442938122" },
      { r: "110000000.0", y: "1.606796689811529566" },
      { r: "115000000.0", y: "2.171222473770332506" },
      { r: "120000000.0", y: "2.947074568758106583" },
    ]
    const global = { baseApy: toWei("0.10") }
    const pool = {
      poolId: toWei("1"),
      k: toWei("6.36306"),
      b: toWei("-6.58938"),
      poolSizeUsd: toWei("100000000"),
      reservedUsd: toWei("0"),
      reserveRate: toWei("1.00"),
    }
    for (const c of cases) {
      const [fr] = await testLibExpBorrowingRate.getBorrowingRates(global, [{ ...pool, reservedUsd: toWei(c.r) }])
      expect(fr).to.be.closeTo(toWei(c.y), B.from("5000"))
    }
  })

  it("getBorrowingRate config 2", async () => {
    const cases = [
      { r: "0", y: "0.054249581547578932" },
      { r: "5000000.0", y: "0.059719630114047205" },
      { r: "10000000.0", y: "0.065741230055953823" },
      { r: "15000000.0", y: "0.072369994941633972" },
      { r: "20000000.0", y: "0.079667145920367513" },
      { r: "25000000.0", y: "0.087700077141304719" },
      { r: "30000000.0", y: "0.096542978184241152" },
      { r: "35000000.0", y: "0.106277519250813746" },
      { r: "40000000.0", y: "0.116993605444324023" },
      { r: "45000000.0", y: "0.128790207104475252" },
      { r: "50000000.0", y: "0.141776273865729885" },
      { r: "55000000.0", y: "0.156071740881236515" },
      { r: "60000000.0", y: "0.171808636505488860" },
      { r: "65000000.0", y: "0.189132301665919184" },
      { r: "70000000.0", y: "0.208202732185151035" },
      { r: "75000000.0", y: "0.229196056451170055" },
      { r: "80000000.0", y: "0.252306162082701124" },
      { r: "85000000.0", y: "0.277746486613152432" },
      { r: "90000000.0", y: "0.305751988731309821" },
      { r: "95000000.0", y: "0.336581318284528586" },
      { r: "100000000.0", y: "0.370519205085877656" },
      { r: "105000000.0", y: "0.407879088587493721" },
      { r: "110000000.0", y: "0.449006012706966273" },
      { r: "115000000.0", y: "0.494279812542441244" },
      { r: "120000000.0", y: "0.544118622407927965" },
    ]
    const global = { baseApy: toWei("0.00") }
    const pool = {
      poolId: toWei("1"),
      k: toWei("1.92131"),
      b: toWei("-2.91416"),
      poolSizeUsd: toWei("100000000"),
      reservedUsd: toWei("0"),
      reserveRate: toWei("1.00"),
    }
    for (const c of cases) {
      const [fr] = await testLibExpBorrowingRate.getBorrowingRates(global, [{ ...pool, reservedUsd: toWei(c.r) }])
      expect(fr).to.be.closeTo(toWei(c.y), B.from("5000"))
    }
  })

  it("calculateC/calculateXi: pools share the same parameters", async () => {
    const global = { baseApy: toWei("0.10") }
    const pools = [
      {
        poolId: toWei("1"),
        k: toWei("6.36306"),
        b: toWei("-6.58938"),
        poolSizeUsd: toWei("30000000"),
        reservedUsd: toWei("0"),
        reserveRate: toWei("1.00"),
      },
      {
        poolId: toWei("2"),
        k: toWei("6.36306"),
        b: toWei("-6.58938"),
        poolSizeUsd: toWei("30000000"),
        reservedUsd: toWei("0"),
        reserveRate: toWei("1.00"),
      },
      {
        poolId: toWei("3"),
        k: toWei("6.36306"),
        b: toWei("-6.58938"),
        poolSizeUsd: toWei("30000000"),
        reservedUsd: toWei("0"),
        reserveRate: toWei("1.00"),
      },
    ]
    // case 1
    {
      const fr = await testLibExpBorrowingRate.getBorrowingRates(global, pools)
      // 0.10 + Exp[k1 * u1 + b1]
      expect(fr[0]).to.be.closeTo(toWei("0.101374892132543700"), B.from("5000"))
      expect(fr[1]).to.be.closeTo(toWei("0.101374892132543700"), B.from("5000"))
      expect(fr[2]).to.be.closeTo(toWei("0.101374892132543700"), B.from("5000"))
      const x = toWei("10000")
      const xi = await testLibExpBorrowingRate.testDistributeEquation(pools, x)
      expect(xi[0]).to.be.closeTo(toWei("3333.333333333333333333"), toWei("0.0000001"))
      expect(xi[1]).to.be.closeTo(toWei("3333.333333333333333333"), toWei("0.0000001"))
      expect(xi[2]).to.be.closeTo(toWei("3333.333333333333333333"), toWei("0.0000001"))
    }
    // case 2
    {
      pools[0].reservedUsd = toWei("3333")
      pools[1].reservedUsd = toWei("1111")
      pools[2].reservedUsd = toWei("0")
      const x = toWei("10000")
      const xi = await testLibExpBorrowingRate.testDistributeEquation(pools, x)
      expect(xi[0]).to.be.closeTo(toWei("1481.666666666666666667"), toWei("0.0000001"))
      expect(xi[1]).to.be.closeTo(toWei("3703.666666666666666667"), toWei("0.0000001"))
      expect(xi[2]).to.be.closeTo(toWei("4814.666666666666666667"), toWei("0.0000001"))
    }
  })

  it("calculateC/calculateXi: different parameters", async () => {
    const global = { baseApy: toWei("0.10") }
    const pools = [
      {
        k: toWei("6.36306"),
        b: toWei("-6.58938"),
        poolSizeUsd: toWei("50000000"),
        reservedUsd: toWei("0"),
        poolId: toWei("1"),
        reserveRate: toWei("1.00"),
      },
      {
        k: toWei("3.46024"),
        b: toWei("-2.34434"),
        poolSizeUsd: toWei("20000000"),
        reservedUsd: toWei("0"),
        poolId: toWei("2"),
        reserveRate: toWei("1.00"),
      },
      {
        k: toWei("1.92131"),
        b: toWei("-2.91416"),
        poolSizeUsd: toWei("10000000"),
        reservedUsd: toWei("0"),
        poolId: toWei("3"),
        reserveRate: toWei("1.00"),
      },
    ]
    // case 1
    {
      const fr = await testLibExpBorrowingRate.getBorrowingRates(global, pools)
      // 0.10 + Exp[k1 * u1 + b1]
      expect(fr[0]).to.be.closeTo(toWei("0.101374892132543700"), B.from("5000"))
      expect(fr[1]).to.be.closeTo(toWei("0.195910482164018800"), B.from("5000"))
      expect(fr[2]).to.be.closeTo(toWei("0.154249581547579000"), B.from("5000"))
      const x = toWei("60000000")
      const xi = await testLibExpBorrowingRate.testDistributeEquation(pools, x)
      expect(xi[0]).to.be.closeTo(toWei("43230968.006925221223354566"), toWei("0.0000001"))
      expect(xi[1]).to.be.closeTo(toWei("7262992.542268235516320082"), toWei("0.0000001"))
      expect(xi[2]).to.be.closeTo(toWei("9506039.450806543260325351"), toWei("0.0000001"))
    }
    // case 2 is based on the result of case 1
    {
      pools[0].reservedUsd = toWei("43230968.006925221223354566")
      pools[1].reservedUsd = toWei("7262992.542268235516320082")
      pools[2].reservedUsd = toWei("9506039.450806543260325351")
      const fr = await testLibExpBorrowingRate.getBorrowingRates(global, pools)
      // 0.10 + Exp[k1 * u1 + b1]
      expect(fr[0]).to.be.closeTo(toWei("0.436972102391632332"), B.from("5000"))
      expect(fr[1]).to.be.closeTo(toWei("0.436972102391632332"), B.from("5000"))
      expect(fr[2]).to.be.closeTo(toWei("0.436972102391632332"), B.from("5000"))
      const x = toWei("60000000")
      const xi = await testLibExpBorrowingRate.testDistributeEquation(pools, x)
      expect(xi[0]).to.be.closeTo(toWei("25021584.517826939925947077"), toWei("0.0000001"))
      expect(xi[1]).to.be.closeTo(toWei("18404948.047765922405983032"), toWei("0.0000001"))
      expect(xi[2]).to.be.closeTo(toWei("16573467.434407137668069891"), toWei("0.0000001"))
    }
  })

  function eqState(a, b, caseName) {
    expect(a.conf.poolId).to.be.eq(b.conf.poolId, caseName)
    expect(a.conf.k).to.be.eq(b.conf.k, caseName)
    expect(a.conf.b).to.be.eq(b.conf.b, caseName)
    expect(a.conf.poolSizeUsd).to.be.eq(b.conf.poolSizeUsd, caseName)
    expect(a.conf.reservedUsd).to.be.eq(b.conf.reservedUsd, caseName)
    expect(a.conf.reserveRate).to.be.eq(b.conf.reserveRate, caseName)
    expect(a.k).to.be.eq(b.k, caseName)
    expect(a.b).to.be.eq(b.b, caseName)
    expect(a.maxX).to.be.eq(b.maxX, caseName)
    expect(a.allocated).to.be.eq(b.allocated, caseName)
  }

  it("sort", async () => {
    const p1 = {
      conf: {
        poolId: toWei("1"),
        k: toWei("1"),
        b: toWei("2"),
        poolSizeUsd: toWei("3"),
        reservedUsd: toWei("4"),
        reserveRate: toWei("1.00"),
      },
      k: toWei("5"),
      b: toWei("6"),
      maxX: toWei("7"),
      allocated: toWei("8"),
    }
    const p2 = {
      conf: {
        poolId: "0x0000000000000000000000000000000000000011",
        k: toWei("11"),
        b: toWei("12"),
        poolSizeUsd: toWei("13"),
        reservedUsd: toWei("14"),
        reserveRate: toWei("1.00"),
      },
      k: toWei("15"),
      b: toWei("16"),
      maxX: toWei("17"),
      allocated: toWei("18"),
    }
    const p3 = {
      conf: {
        poolId: "0x0000000000000000000000000000000000000021",
        k: toWei("21"),
        b: toWei("22"),
        poolSizeUsd: toWei("23"),
        reservedUsd: toWei("24"),
        reserveRate: toWei("1.00"),
      },
      k: toWei("25"),
      b: toWei("26"),
      maxX: toWei("27"),
      allocated: toWei("28"),
    }
    {
      const result = await testLibExpBorrowingRate.sort([p3, p2, p1], 3)
      eqState(result[0], p1, "case 1")
      eqState(result[1], p2, "case 1")
      eqState(result[2], p3, "case 1")
    }
    {
      const result = await testLibExpBorrowingRate.sort([p1, p3, p2], 3)
      eqState(result[0], p1, "case 2")
      eqState(result[1], p2, "case 2")
      eqState(result[2], p3, "case 2")
    }
    {
      const result = await testLibExpBorrowingRate.sort([p3, p1, p2], 2)
      eqState(result[0], p1, "case 3")
      eqState(result[1], p3, "case 3")
      eqState(result[2], p2, "case 3")
    }
  })

  function getIndexByPoolId(poolId: ethers.BigNumber) {
    if (poolId.eq(toWei("1"))) {
      return 0
    } else if (poolId.eq(toWei("2"))) {
      return 1
    } else if (poolId.eq(toWei("3"))) {
      return 2
    } else {
      throw new Error("unrecognized poolId: " + poolId)
    }
  }

  it("full allocate: from zero. reserveRate = 100%", async () => {
    const pools = [
      {
        k: toWei("2.2"),
        b: toWei("-3"),
        poolSizeUsd: toWei("1000000"),
        reservedUsd: toWei("0"),
        poolId: toWei("1"),
        reserveRate: toWei("1.00"),
      },
      {
        k: toWei("6"),
        b: toWei("-6"),
        poolSizeUsd: toWei("1000000"),
        reservedUsd: toWei("0"),
        poolId: toWei("2"),
        reserveRate: toWei("1.00"),
      },
      {
        k: toWei("10"),
        b: toWei("-7"),
        poolSizeUsd: toWei("1000000"),
        reservedUsd: toWei("0"),
        poolId: toWei("3"),
        reserveRate: toWei("1.00"),
      },
    ]
    const cases = [
      { x_total: "10000", xi: ["0", "0", "10000"] },
      { x_total: "20000", xi: ["0", "0", "20000"] },
      { x_total: "30000", xi: ["0", "0", "30000"] },
      { x_total: "40000", xi: ["0", "0", "40000"] },
      { x_total: "50000", xi: ["0", "0", "50000"] },
      { x_total: "60000", xi: ["0", "0", "60000"] },
      { x_total: "70000", xi: ["0", "0", "70000"] },
      { x_total: "80000", xi: ["0", "0", "80000"] },
      { x_total: "90000", xi: ["0", "0", "90000"] },
      { x_total: "100000", xi: ["0", "0", "100000"] },
      { x_total: "110000", xi: ["0", "6249.999999999999833333", "103749.9999999999999"] },
      { x_total: "120000", xi: ["0", "12499.999999999999833333", "107499.9999999999999"] },
      { x_total: "130000", xi: ["0", "18749.999999999999833333", "111249.9999999999999"] },
      { x_total: "140000", xi: ["0", "24999.999999999999833333", "114999.9999999999999"] },
      { x_total: "150000", xi: ["0", "31249.999999999999833333", "118749.9999999999999"] },
      { x_total: "160000", xi: ["0", "37499.999999999999833333", "122499.9999999999999"] },
      { x_total: "170000", xi: ["0", "43749.999999999999833333", "126249.9999999999999"] },
      { x_total: "180000", xi: ["0", "49999.999999999999833333", "129999.9999999999999"] },
      { x_total: "190000", xi: ["0", "56249.999999999999833333", "133749.9999999999999"] },
      { x_total: "200000", xi: ["0", "62499.999999999999833333", "137499.9999999999999"] },
      { x_total: "210000", xi: ["0", "68749.999999999999833333", "141249.9999999999999"] },
      { x_total: "220000", xi: ["0", "74999.999999999999833333", "144999.9999999999999"] },
      { x_total: "230000", xi: ["0", "81249.999999999999833333", "148749.9999999999999"] },
      { x_total: "240000", xi: ["0", "87499.999999999999833333", "152499.9999999999999"] },
      { x_total: "250000", xi: ["0", "93749.999999999999833333", "156249.9999999999999"] },
      { x_total: "260000", xi: ["0", "99999.999999999999833333", "159999.9999999999999"] },
      { x_total: "270000", xi: ["0", "106249.999999999999833333", "163749.9999999999999"] },
      { x_total: "280000", xi: ["0", "112499.999999999999833333", "167499.9999999999999"] },
      { x_total: "290000", xi: ["0", "118749.999999999999833333", "171249.9999999999999"] },
      { x_total: "300000", xi: ["0", "124999.999999999999833333", "174999.9999999999999"] },
      { x_total: "310000", xi: ["0", "131249.999999999999833333", "178749.9999999999999"] },
      { x_total: "320000", xi: ["0", "137499.999999999999833333", "182499.9999999999999"] },
      { x_total: "330000", xi: ["0", "143749.999999999999833333", "186249.9999999999999"] },
      { x_total: "340000", xi: ["0", "149999.999999999999833333", "189999.9999999999999"] },
      { x_total: "350000", xi: ["0", "156249.999999999999833333", "193749.9999999999999"] },
      { x_total: "360000", xi: ["0", "162499.999999999999833333", "197499.9999999999999"] },
      { x_total: "370000", xi: ["0", "168749.999999999999833333", "201249.9999999999999"] },
      { x_total: "380000", xi: ["0", "174999.999999999999833333", "204999.9999999999999"] },
      { x_total: "390000", xi: ["0", "181249.999999999999833333", "208749.9999999999999"] },
      { x_total: "400000", xi: ["0", "187499.999999999999833333", "212499.9999999999999"] },
      { x_total: "410000", xi: ["0", "193749.999999999999833333", "216249.9999999999999"] },
      { x_total: "420000", xi: ["0", "199999.999999999999833333", "219999.9999999999999"] },
      { x_total: "430000", xi: ["0", "206249.999999999999833333", "223749.9999999999999"] },
      { x_total: "440000", xi: ["0", "212499.999999999999833333", "227499.9999999999999"] },
      { x_total: "450000", xi: ["0", "218749.999999999999833333", "231249.9999999999999"] },
      { x_total: "460000", xi: ["0", "224999.999999999999833333", "234999.9999999999999"] },
      { x_total: "470000", xi: ["0", "231249.999999999999833333", "238749.9999999999999"] },
      { x_total: "480000", xi: ["0", "237499.999999999999833333", "242499.9999999999999"] },
      { x_total: "490000", xi: ["0", "243749.999999999999833333", "246249.9999999999999"] },
      { x_total: "500000", xi: ["0", "249999.999999999999833333", "249999.9999999999999"] },
      { x_total: "510000", xi: ["0", "256249.999999999999833333", "253749.9999999999999"] },
      { x_total: "520000", xi: ["0", "262499.999999999999833333", "257499.9999999999999"] },
      { x_total: "530000", xi: ["0", "268749.999999999999833333", "261249.9999999999999"] },
      { x_total: "540000", xi: ["0", "274999.999999999999833333", "264999.9999999999999"] },
      { x_total: "550000", xi: ["0", "281249.999999999999833333", "268749.9999999999999"] },
      { x_total: "560000", xi: ["0", "287499.999999999999833333", "272499.9999999999999"] },
      { x_total: "570000", xi: ["0", "293749.999999999999833333", "276249.9999999999999"] },
      { x_total: "580000", xi: ["0", "299999.999999999999833333", "279999.9999999999999"] },
      { x_total: "590000", xi: ["0", "306249.999999999999833333", "283749.9999999999999"] },
      { x_total: "600000", xi: ["0", "312499.999999999999833333", "287499.9999999999999"] },
      { x_total: "610000", xi: ["0", "318749.999999999999833333", "291249.9999999999999"] },
      { x_total: "620000", xi: ["0", "324999.999999999999833333", "294999.9999999999999"] },
      { x_total: "630000", xi: ["0", "331249.999999999999833333", "298749.9999999999999"] },
      { x_total: "640000", xi: ["0", "337499.999999999999833333", "302499.9999999999999"] },
      { x_total: "650000", xi: ["0", "343749.999999999999833333", "306249.9999999999999"] },
      { x_total: "660000", xi: ["0", "349999.999999999999833333", "309999.9999999999999"] },
      { x_total: "670000", xi: ["0", "356249.999999999999833333", "313749.9999999999999"] },
      { x_total: "680000", xi: ["0", "362499.999999999999833333", "317499.9999999999999"] },
      { x_total: "690000", xi: ["0", "368749.999999999999833333", "321249.9999999999999"] },
      { x_total: "700000", xi: ["0", "374999.999999999999833333", "324999.9999999999999"] },
      { x_total: "710000", xi: ["0", "381249.999999999999833333", "328749.9999999999999"] },
      { x_total: "720000", xi: ["0", "387499.999999999999833333", "332499.9999999999999"] },
      { x_total: "730000", xi: ["0", "393749.999999999999833333", "336249.9999999999999"] },
      { x_total: "740000", xi: ["0", "399999.999999999999833333", "339999.9999999999999"] },
      { x_total: "750000", xi: ["0", "406249.999999999999833333", "343749.9999999999999"] },
      { x_total: "760000", xi: ["0", "412499.999999999999833333", "347499.9999999999999"] },
      { x_total: "770000", xi: ["0", "418749.999999999999833333", "351249.9999999999999"] },
      { x_total: "780000", xi: ["0", "424999.999999999999833333", "354999.9999999999999"] },
      { x_total: "790000", xi: ["0", "431249.999999999999833333", "358749.9999999999999"] },
      { x_total: "800000", xi: ["0", "437499.999999999999833333", "362499.9999999999999"] },
      { x_total: "810000", xi: ["0", "443749.999999999999833333", "366249.9999999999999"] },
      { x_total: "820000", xi: ["0", "449999.999999999999833333", "369999.9999999999999"] },
      { x_total: "830000", xi: ["0", "456249.999999999999833333", "373749.9999999999999"] },
      { x_total: "840000", xi: ["0", "462499.999999999999833333", "377499.9999999999999"] },
      { x_total: "850000", xi: ["0", "468749.999999999999833333", "381249.9999999999999"] },
      { x_total: "860000", xi: ["0", "474999.999999999999833333", "384999.9999999999999"] },
      { x_total: "870000", xi: ["0", "481249.999999999999833333", "388749.9999999999999"] },
      { x_total: "880000", xi: ["0", "487499.999999999999833333", "392499.9999999999999"] },
      { x_total: "890000", xi: ["0", "493749.999999999999833333", "396249.9999999999999"] },
      { x_total: "900000", xi: ["0", "499999.999999999999833333", "399999.9999999999999"] },
      { x_total: "910000", xi: ["6302.52100840336090909", "502310.924369747899", "401386.5546218487394"] },
      { x_total: "920000", xi: ["12605.042016806722272727", "504621.848739495798166666", "402773.1092436974789"] },
      { x_total: "930000", xi: ["18907.563025210083636363", "506932.773109243697333333", "404159.6638655462184"] },
      { x_total: "940000", xi: ["25210.084033613445", "509243.6974789915965", "405546.2184873949579"] },
      { x_total: "950000", xi: ["31512.605042016806363636", "511554.621848739495666666", "406932.7731092436974"] },
      { x_total: "960000", xi: ["37815.126050420167727272", "513865.546218487394833333", "408319.3277310924369"] },
      { x_total: "970000", xi: ["44117.647058823529090909", "516176.470588235294", "409705.8823529411764"] },
      { x_total: "980000", xi: ["50420.168067226890454545", "518487.394957983193166666", "411092.4369747899159"] },
      { x_total: "990000", xi: ["56722.689075630251818181", "520798.319327731092333333", "412478.9915966386554"] },
      { x_total: "1000000", xi: ["63025.210084033613181818", "523109.2436974789915", "413865.5462184873949"] },
      { x_total: "1010000", xi: ["69327.731092436974545454", "525420.168067226890666666", "415252.1008403361344"] },
      { x_total: "1020000", xi: ["75630.25210084033590909", "527731.092436974789833333", "416638.6554621848739"] },
      { x_total: "1030000", xi: ["81932.773109243697272727", "530042.016806722689", "418025.2100840336134"] },
      { x_total: "1040000", xi: ["88235.294117647058636363", "532352.941176470588166666", "419411.7647058823529"] },
      { x_total: "1050000", xi: ["94537.81512605042", "534663.865546218487333333", "420798.3193277310924"] },
      { x_total: "1060000", xi: ["100840.336134453781363636", "536974.7899159663865", "422184.8739495798319"] },
      { x_total: "1070000", xi: ["107142.857142857142727272", "539285.714285714285666666", "423571.4285714285714"] },
      { x_total: "1080000", xi: ["113445.378151260504090909", "541596.638655462184833333", "424957.9831932773109"] },
      { x_total: "1090000", xi: ["119747.899159663865454545", "543907.563025210084", "426344.5378151260504"] },
      { x_total: "1100000", xi: ["126050.420168067226818181", "546218.487394957983166666", "427731.0924369747899"] },
      { x_total: "1110000", xi: ["132352.941176470588181818", "548529.411764705882333333", "429117.6470588235294"] },
      { x_total: "1120000", xi: ["138655.462184873949545454", "550840.3361344537815", "430504.2016806722689"] },
      { x_total: "1130000", xi: ["144957.98319327731090909", "553151.260504201680666666", "431890.7563025210084"] },
      { x_total: "1140000", xi: ["151260.504201680671818181", "555462.184873949579666666", "433277.3109243697478"] },
      { x_total: "1150000", xi: ["157563.025210084033181818", "557773.109243697478833333", "434663.8655462184873"] },
      { x_total: "1160000", xi: ["163865.546218487394545454", "560084.033613445378", "436050.4201680672268"] },
      { x_total: "1170000", xi: ["170168.06722689075590909", "562394.957983193277166666", "437436.9747899159663"] },
      { x_total: "1180000", xi: ["176470.588235294117272727", "564705.882352941176333333", "438823.5294117647058"] },
      { x_total: "1190000", xi: ["182773.109243697478636363", "567016.8067226890755", "440210.0840336134453"] },
      { x_total: "1200000", xi: ["189075.63025210084", "569327.731092436974666666", "441596.6386554621848"] },
      { x_total: "1210000", xi: ["195378.151260504201363636", "571638.655462184873833333", "442983.1932773109243"] },
      { x_total: "1220000", xi: ["201680.672268907562727272", "573949.579831932773", "444369.7478991596638"] },
      { x_total: "1230000", xi: ["207983.193277310924090909", "576260.504201680672166666", "445756.3025210084033"] },
      { x_total: "1240000", xi: ["214285.714285714285454545", "578571.428571428571333333", "447142.8571428571428"] },
      { x_total: "1250000", xi: ["220588.235294117646818181", "580882.3529411764705", "448529.4117647058823"] },
      { x_total: "1260000", xi: ["226890.756302521008181818", "583193.277310924369666666", "449915.9663865546218"] },
      { x_total: "1270000", xi: ["233193.277310924369545454", "585504.201680672268833333", "451302.5210084033613"] },
      { x_total: "1280000", xi: ["239495.79831932773090909", "587815.126050420168", "452689.0756302521008"] },
      { x_total: "1290000", xi: ["245798.319327731092272727", "590126.050420168067166666", "454075.6302521008403"] },
      { x_total: "1300000", xi: ["252100.840336134453636363", "592436.974789915966333333", "455462.1848739495798"] },
      { x_total: "1310000", xi: ["258403.361344537815", "594747.8991596638655", "456848.7394957983193"] },
      { x_total: "1320000", xi: ["264705.882352941176363636", "597058.823529411764666666", "458235.2941176470588"] },
      { x_total: "1330000", xi: ["271008.403361344537727272", "599369.747899159663833333", "459621.8487394957983"] },
      { x_total: "1340000", xi: ["277310.924369747899090909", "601680.672268907563", "461008.4033613445378"] },
      { x_total: "1350000", xi: ["283613.445378151260454545", "603991.596638655462166666", "462394.9579831932773"] },
      { x_total: "1360000", xi: ["289915.966386554621818181", "606302.521008403361333333", "463781.5126050420168"] },
      { x_total: "1370000", xi: ["296218.487394957983181818", "608613.4453781512605", "465168.0672268907563"] },
      { x_total: "1380000", xi: ["302521.008403361344090909", "610924.3697478991595", "466554.6218487394957"] },
      { x_total: "1390000", xi: ["308823.529411764705454545", "613235.294117647058666666", "467941.1764705882352"] },
      { x_total: "1400000", xi: ["315126.050420168066818181", "615546.218487394957833333", "469327.7310924369747"] },
      { x_total: "1410000", xi: ["321428.571428571428181818", "617857.142857142857", "470714.2857142857142"] },
      { x_total: "1420000", xi: ["327731.092436974789545454", "620168.067226890756166666", "472100.8403361344537"] },
      { x_total: "1430000", xi: ["334033.61344537815090909", "622478.991596638655333333", "473487.3949579831932"] },
      { x_total: "1440000", xi: ["340336.134453781512272727", "624789.9159663865545", "474873.9495798319327"] },
      { x_total: "1450000", xi: ["346638.655462184873636363", "627100.840336134453666666", "476260.5042016806722"] },
      { x_total: "1460000", xi: ["352941.176470588235", "629411.764705882352833333", "477647.0588235294117"] },
      { x_total: "1470000", xi: ["359243.697478991596363636", "631722.689075630252", "479033.6134453781512"] },
      { x_total: "1480000", xi: ["365546.218487394957727272", "634033.613445378151166666", "480420.1680672268907"] },
      { x_total: "1490000", xi: ["371848.739495798319090909", "636344.537815126050333333", "481806.7226890756302"] },
      { x_total: "1500000", xi: ["378151.260504201680454545", "638655.4621848739495", "483193.2773109243697"] },
      { x_total: "1510000", xi: ["384453.781512605041818181", "640966.386554621848666666", "484579.8319327731092"] },
      { x_total: "1520000", xi: ["390756.302521008403181818", "643277.310924369747833333", "485966.3865546218487"] },
      { x_total: "1530000", xi: ["397058.823529411764545454", "645588.235294117647", "487352.9411764705882"] },
      { x_total: "1540000", xi: ["403361.34453781512590909", "647899.159663865546166666", "488739.4957983193277"] },
      { x_total: "1550000", xi: ["409663.865546218487272727", "650210.084033613445333333", "490126.0504201680672"] },
      { x_total: "1560000", xi: ["415966.386554621848636363", "652521.0084033613445", "491512.6050420168067"] },
      { x_total: "1570000", xi: ["422268.90756302521", "654831.932773109243666666", "492899.1596638655462"] },
      { x_total: "1580000", xi: ["428571.428571428571363636", "657142.857142857142833333", "494285.7142857142857"] },
      { x_total: "1590000", xi: ["434873.949579831932727272", "659453.781512605042", "495672.2689075630252"] },
      { x_total: "1600000", xi: ["441176.470588235294090909", "661764.705882352941166666", "497058.8235294117647"] },
      { x_total: "1610000", xi: ["447478.991596638655454545", "664075.630252100840333333", "498445.3781512605042"] },
      { x_total: "1620000", xi: ["453781.512605042016363636", "666386.554621848739333333", "499831.9327731092436"] },
      { x_total: "1630000", xi: ["460084.033613445377727272", "668697.4789915966385", "501218.4873949579831"] },
      { x_total: "1640000", xi: ["466386.554621848739090909", "671008.403361344537666666", "502605.0420168067226"] },
      { x_total: "1650000", xi: ["472689.075630252100454545", "673319.327731092436833333", "503991.5966386554621"] },
      { x_total: "1660000", xi: ["478991.596638655461818181", "675630.252100840336", "505378.1512605042016"] },
      { x_total: "1670000", xi: ["485294.117647058823181818", "677941.176470588235166666", "506764.7058823529411"] },
      { x_total: "1680000", xi: ["491596.638655462184545454", "680252.100840336134333333", "508151.2605042016806"] },
      { x_total: "1690000", xi: ["497899.15966386554590909", "682563.0252100840335", "509537.8151260504201"] },
      { x_total: "1700000", xi: ["504201.680672268907272727", "684873.949579831932666666", "510924.3697478991596"] },
      { x_total: "1710000", xi: ["510504.201680672268636363", "687184.873949579831833333", "512310.9243697478991"] },
      { x_total: "1720000", xi: ["516806.72268907563", "689495.798319327731", "513697.4789915966386"] },
      { x_total: "1730000", xi: ["523109.243697478991363636", "691806.722689075630166666", "515084.0336134453781"] },
      { x_total: "1740000", xi: ["529411.764705882352727272", "694117.647058823529333333", "516470.5882352941176"] },
      { x_total: "1750000", xi: ["535714.285714285714090909", "696428.5714285714285", "517857.1428571428571"] },
      { x_total: "1760000", xi: ["542016.806722689075454545", "698739.495798319327666666", "519243.6974789915966"] },
      { x_total: "1770000", xi: ["548319.327731092436818181", "701050.420168067226833333", "520630.2521008403361"] },
      { x_total: "1780000", xi: ["554621.848739495798181818", "703361.344537815126", "522016.8067226890756"] },
      { x_total: "1790000", xi: ["560924.369747899159545454", "705672.268907563025166666", "523403.3613445378151"] },
      { x_total: "1800000", xi: ["567226.89075630252090909", "707983.193277310924333333", "524789.9159663865546"] },
      { x_total: "1810000", xi: ["573529.411764705882272727", "710294.1176470588235", "526176.4705882352941"] },
      { x_total: "1820000", xi: ["579831.932773109243636363", "712605.042016806722666666", "527563.0252100840336"] },
      { x_total: "1830000", xi: ["586134.453781512605", "714915.966386554621833333", "528949.5798319327731"] },
      { x_total: "1840000", xi: ["592436.974789915966363636", "717226.890756302521", "530336.1344537815126"] },
      { x_total: "1850000", xi: ["598739.495798319327727272", "719537.815126050420166666", "531722.6890756302521"] },
      { x_total: "1860000", xi: ["605042.016806722688636363", "721848.739495798319166666", "533109.2436974789915"] },
      { x_total: "1870000", xi: ["611344.53781512605", "724159.663865546218333333", "534495.798319327731"] },
      { x_total: "1880000", xi: ["617647.058823529411363636", "726470.5882352941175", "535882.3529411764705"] },
      { x_total: "1890000", xi: ["623949.579831932772727272", "728781.512605042016666666", "537268.90756302521"] },
      { x_total: "1900000", xi: ["630252.100840336134090909", "731092.436974789915833333", "538655.4621848739495"] },
      { x_total: "1910000", xi: ["636554.621848739495454545", "733403.361344537815", "540042.016806722689"] },
      { x_total: "1920000", xi: ["642857.142857142856818181", "735714.285714285714166666", "541428.5714285714285"] },
      { x_total: "1930000", xi: ["649159.663865546218181818", "738025.210084033613333333", "542815.126050420168"] },
      { x_total: "1940000", xi: ["655462.184873949579545454", "740336.1344537815125", "544201.6806722689075"] },
      { x_total: "1950000", xi: ["661764.70588235294090909", "742647.058823529411666666", "545588.235294117647"] },
      { x_total: "1960000", xi: ["668067.226890756302272727", "744957.983193277310833333", "546974.7899159663865"] },
      { x_total: "1970000", xi: ["674369.747899159663636363", "747268.90756302521", "548361.344537815126"] },
      { x_total: "1980000", xi: ["680672.268907563025", "749579.831932773109166666", "549747.8991596638655"] },
      { x_total: "1990000", xi: ["686974.789915966386363636", "751890.756302521008333333", "551134.453781512605"] },
      { x_total: "2000000", xi: ["693277.310924369747727272", "754201.6806722689075", "552521.0084033613445"] },
      { x_total: "2010000", xi: ["699579.831932773109090909", "756512.605042016806666666", "553907.563025210084"] },
      { x_total: "2020000", xi: ["705882.352941176470454545", "758823.529411764705833333", "555294.1176470588235"] },
      { x_total: "2030000", xi: ["712184.873949579831818181", "761134.453781512605", "556680.672268907563"] },
      { x_total: "2040000", xi: ["718487.394957983193181818", "763445.378151260504166666", "558067.2268907563025"] },
      { x_total: "2050000", xi: ["724789.915966386554545454", "765756.302521008403333333", "559453.781512605042"] },
      { x_total: "2060000", xi: ["731092.43697478991590909", "768067.2268907563025", "560840.3361344537815"] },
      { x_total: "2070000", xi: ["737394.957983193277272727", "770378.151260504201666666", "562226.890756302521"] },
      { x_total: "2080000", xi: ["743697.478991596638636363", "772689.075630252100833333", "563613.4453781512605"] },
      { x_total: "2090000", xi: ["749999.999999999999545454", "774999.999999999999833333", "564999.9999999999999"] },
      { x_total: "2100000", xi: ["756302.52100840336090909", "777310.924369747899", "566386.5546218487394"] },
      { x_total: "2110000", xi: ["762605.042016806722272727", "779621.848739495798166666", "567773.1092436974789"] },
      { x_total: "2120000", xi: ["768907.563025210083636363", "781932.773109243697333333", "569159.6638655462184"] },
      { x_total: "2130000", xi: ["775210.084033613445", "784243.6974789915965", "570546.2184873949579"] },
      { x_total: "2140000", xi: ["781512.605042016806363636", "786554.621848739495666666", "571932.7731092436974"] },
      { x_total: "2150000", xi: ["787815.126050420167727272", "788865.546218487394833333", "573319.3277310924369"] },
      { x_total: "2160000", xi: ["794117.647058823529090909", "791176.470588235294", "574705.8823529411764"] },
      { x_total: "2170000", xi: ["800420.168067226890454545", "793487.394957983193166666", "576092.4369747899159"] },
      { x_total: "2180000", xi: ["806722.689075630251818181", "795798.319327731092333333", "577478.9915966386554"] },
      { x_total: "2190000", xi: ["813025.210084033613181818", "798109.2436974789915", "578865.5462184873949"] },
      { x_total: "2200000", xi: ["819327.731092436974545454", "800420.168067226890666666", "580252.1008403361344"] },
      { x_total: "2210000", xi: ["825630.25210084033590909", "802731.092436974789833333", "581638.6554621848739"] },
      { x_total: "2220000", xi: ["831932.773109243697272727", "805042.016806722689", "583025.2100840336134"] },
      { x_total: "2230000", xi: ["838235.294117647058636363", "807352.941176470588166666", "584411.7647058823529"] },
      { x_total: "2240000", xi: ["844537.81512605042", "809663.865546218487333333", "585798.3193277310924"] },
      { x_total: "2250000", xi: ["850840.336134453781363636", "811974.7899159663865", "587184.8739495798319"] },
      { x_total: "2260000", xi: ["857142.857142857142727272", "814285.714285714285666666", "588571.4285714285714"] },
      { x_total: "2270000", xi: ["863445.378151260504090909", "816596.638655462184833333", "589957.9831932773109"] },
      { x_total: "2280000", xi: ["869747.899159663865454545", "818907.563025210084", "591344.5378151260504"] },
      { x_total: "2290000", xi: ["876050.420168067226818181", "821218.487394957983166666", "592731.0924369747899"] },
      { x_total: "2300000", xi: ["882352.941176470588181818", "823529.411764705882333333", "594117.6470588235294"] },
      { x_total: "2310000", xi: ["888655.462184873949545454", "825840.3361344537815", "595504.2016806722689"] },
      { x_total: "2320000", xi: ["894957.98319327731090909", "828151.260504201680666666", "596890.7563025210084"] },
      { x_total: "2330000", xi: ["901260.504201680671818181", "830462.184873949579666666", "598277.3109243697478"] },
      { x_total: "2340000", xi: ["907563.025210084033181818", "832773.109243697478833333", "599663.8655462184873"] },
      { x_total: "2350000", xi: ["913865.546218487394545454", "835084.033613445378", "601050.4201680672268"] },
      { x_total: "2360000", xi: ["920168.06722689075590909", "837394.957983193277166666", "602436.9747899159663"] },
      { x_total: "2370000", xi: ["926470.588235294117272727", "839705.882352941176333333", "603823.5294117647058"] },
      { x_total: "2380000", xi: ["932773.109243697478636363", "842016.8067226890755", "605210.0840336134453"] },
      { x_total: "2390000", xi: ["939075.63025210084", "844327.731092436974666666", "606596.6386554621848"] },
      { x_total: "2400000", xi: ["945378.151260504201363636", "846638.655462184873833333", "607983.1932773109243"] },
      { x_total: "2410000", xi: ["951680.672268907562727272", "848949.579831932773", "609369.7478991596638"] },
      { x_total: "2420000", xi: ["957983.193277310924090909", "851260.504201680672166666", "610756.3025210084033"] },
      { x_total: "2430000", xi: ["964285.714285714285454545", "853571.428571428571333333", "612142.8571428571428"] },
      { x_total: "2440000", xi: ["970588.235294117646818181", "855882.3529411764705", "613529.4117647058823"] },
      { x_total: "2450000", xi: ["976890.756302521008181818", "858193.277310924369666666", "614915.9663865546218"] },
      { x_total: "2460000", xi: ["983193.277310924369545454", "860504.201680672268833333", "616302.5210084033613"] },
      { x_total: "2470000", xi: ["989495.79831932773090909", "862815.126050420168", "617689.0756302521008"] },
      { x_total: "2480000", xi: ["995798.319327731092272727", "865126.050420168067166666", "619075.6302521008403"] },
      { x_total: "2490000", xi: ["1000000", "868749.999999999999999999", "621249.9999999999999"] },
      { x_total: "2500000", xi: ["1000000", "874999.999999999999833333", "624999.9999999999999"] },
      { x_total: "2510000", xi: ["1000000", "881249.999999999999999999", "628749.9999999999999"] },
      { x_total: "2520000", xi: ["1000000", "887499.999999999999999999", "632499.9999999999999"] },
      { x_total: "2530000", xi: ["1000000", "893749.999999999999833333", "636249.9999999999999"] },
      { x_total: "2540000", xi: ["1000000", "899999.999999999999999999", "639999.9999999999999"] },
      { x_total: "2550000", xi: ["1000000", "906249.999999999999999999", "643749.9999999999999"] },
      { x_total: "2560000", xi: ["1000000", "912499.999999999999833333", "647499.9999999999999"] },
      { x_total: "2570000", xi: ["1000000", "918749.999999999999833333", "651249.9999999999999"] },
      { x_total: "2580000", xi: ["1000000", "924999.999999999999999999", "654999.9999999999999"] },
      { x_total: "2590000", xi: ["1000000", "931249.999999999999999999", "658749.9999999999999"] },
      { x_total: "2600000", xi: ["1000000", "937499.999999999999833333", "662499.9999999999999"] },
      { x_total: "2610000", xi: ["1000000", "943749.999999999999999999", "666249.9999999999999"] },
      { x_total: "2620000", xi: ["1000000", "949999.999999999999999999", "669999.9999999999999"] },
      { x_total: "2630000", xi: ["1000000", "956249.999999999999833333", "673749.9999999999999"] },
      { x_total: "2640000", xi: ["1000000", "962499.999999999999999999", "677499.9999999999999"] },
      { x_total: "2650000", xi: ["1000000", "968749.999999999999999999", "681249.9999999999999"] },
      { x_total: "2660000", xi: ["1000000", "974999.999999999999833333", "684999.9999999999999"] },
      { x_total: "2670000", xi: ["1000000", "981249.999999999999999999", "688749.9999999999999"] },
      { x_total: "2680000", xi: ["1000000", "987499.999999999999999999", "692499.9999999999999"] },
      { x_total: "2690000", xi: ["1000000", "993749.999999999999833333", "696249.9999999999999"] },
      { x_total: "2700000", xi: ["1000000", "999999.999999999999999999", "699999.9999999999999"] },
      { x_total: "2710000", xi: ["1000000", "1000000", "710000"] },
      { x_total: "2720000", xi: ["1000000", "1000000", "720000"] },
      { x_total: "2730000", xi: ["1000000", "1000000", "730000"] },
      { x_total: "2740000", xi: ["1000000", "1000000", "740000"] },
      { x_total: "2750000", xi: ["1000000", "1000000", "750000"] },
      { x_total: "2760000", xi: ["1000000", "1000000", "760000"] },
      { x_total: "2770000", xi: ["1000000", "1000000", "770000"] },
      { x_total: "2780000", xi: ["1000000", "1000000", "780000"] },
      { x_total: "2790000", xi: ["1000000", "1000000", "790000"] },
      { x_total: "2800000", xi: ["1000000", "1000000", "800000"] },
      { x_total: "2810000", xi: ["1000000", "1000000", "810000"] },
      { x_total: "2820000", xi: ["1000000", "1000000", "820000"] },
      { x_total: "2830000", xi: ["1000000", "1000000", "830000"] },
      { x_total: "2840000", xi: ["1000000", "1000000", "840000"] },
      { x_total: "2850000", xi: ["1000000", "1000000", "850000"] },
      { x_total: "2860000", xi: ["1000000", "1000000", "860000"] },
      { x_total: "2870000", xi: ["1000000", "1000000", "870000"] },
      { x_total: "2880000", xi: ["1000000", "1000000", "880000"] },
      { x_total: "2890000", xi: ["1000000", "1000000", "890000"] },
      { x_total: "2900000", xi: ["1000000", "1000000", "900000"] },
      { x_total: "2910000", xi: ["1000000", "1000000", "910000"] },
      { x_total: "2920000", xi: ["1000000", "1000000", "920000"] },
      { x_total: "2930000", xi: ["1000000", "1000000", "930000"] },
      { x_total: "2940000", xi: ["1000000", "1000000", "940000"] },
      { x_total: "2950000", xi: ["1000000", "1000000", "950000"] },
      { x_total: "2960000", xi: ["1000000", "1000000", "960000"] },
      { x_total: "2970000", xi: ["1000000", "1000000", "970000"] },
      { x_total: "2980000", xi: ["1000000", "1000000", "980000"] },
      { x_total: "2990000", xi: ["1000000", "1000000", "990000"] },
      { x_total: "3000000", xi: ["1000000", "1000000", "1000000"] },
    ]
    for (const test of cases) {
      const result = await testLibExpBorrowingRate.allocate(pools, toWei(test.x_total))
      expect(result.length).to.equal(test.xi.length)
      for (let i = 0; i < test.xi.length; i++) {
        const expectedIndex = getIndexByPoolId(result[i].poolId)
        expect(result[i].xi).to.be.closeTo(toWei(test.xi[expectedIndex]), toWei("0.0000001"), `case ${test}`)
      }
    }

    // insufficient liquidity
    await expect(testLibExpBorrowingRate.allocate(pools, toWei("3000001"))).to.be.revertedWith("ExpBorrow: full")
  })

  it("full allocate: consume step by step. reserveRate = 100%", async () => {
    const pools = [
      {
        k: toWei("2.2"),
        b: toWei("-3"),
        poolSizeUsd: toWei("1000000"),
        reservedUsd: toWei("0"),
        poolId: toWei("1"),
        reserveRate: toWei("1.00"),
      },
      {
        k: toWei("6"),
        b: toWei("-6"),
        poolSizeUsd: toWei("1000000"),
        reservedUsd: toWei("0"),
        poolId: toWei("2"),
        reserveRate: toWei("1.00"),
      },
      {
        k: toWei("10"),
        b: toWei("-7"),
        poolSizeUsd: toWei("1000000"),
        reservedUsd: toWei("0"),
        poolId: toWei("3"),
        reserveRate: toWei("1.00"),
      },
    ]
    const cases = [
      { x_total: "10000", reserved: ["0", "0", "0"], xi: ["0", "0", "10000"] },
      { x_total: "20000", reserved: ["0", "0", "10000"], xi: ["0", "0", "10000"] },
      { x_total: "30000", reserved: ["0", "0", "20000"], xi: ["0", "0", "10000"] },
      { x_total: "40000", reserved: ["0", "0", "30000"], xi: ["0", "0", "10000"] },
      { x_total: "50000", reserved: ["0", "0", "40000"], xi: ["0", "0", "10000"] },
      { x_total: "60000", reserved: ["0", "0", "50000"], xi: ["0", "0", "10000"] },
      { x_total: "70000", reserved: ["0", "0", "60000"], xi: ["0", "0", "10000"] },
      { x_total: "80000", reserved: ["0", "0", "70000"], xi: ["0", "0", "10000"] },
      { x_total: "90000", reserved: ["0", "0", "80000"], xi: ["0", "0", "10000"] },
      { x_total: "100000", reserved: ["0", "0", "90000"], xi: ["0", "0", "10000"] },
      { x_total: "110000", reserved: ["0", "0", "100000"], xi: ["0", "6249.999999999999833333", "3749.9999999999999"] },
      {
        x_total: "120000",
        reserved: ["0", "6249.999999999999833333", "103749.9999999999999"],
        xi: ["0", "6250", "3749.9999999999999"],
      },
      {
        x_total: "130000",
        reserved: ["0", "12499.999999999999833333", "107499.9999999999998"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "140000",
        reserved: ["0", "18749.999999999999666666", "111249.9999999999997"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "150000",
        reserved: ["0", "24999.999999999999499999", "114999.9999999999996"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "160000",
        reserved: ["0", "31249.999999999999333332", "118749.9999999999995"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "170000",
        reserved: ["0", "37499.999999999999166665", "122499.9999999999994"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "180000",
        reserved: ["0", "43749.999999999998999998", "126249.9999999999993"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "190000",
        reserved: ["0", "49999.999999999998833331", "129999.9999999999992"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "200000",
        reserved: ["0", "56249.999999999998666664", "133749.9999999999991"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "210000",
        reserved: ["0", "62499.999999999998499997", "137499.999999999999"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "220000",
        reserved: ["0", "68749.99999999999833333", "141249.9999999999989"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "230000",
        reserved: ["0", "74999.999999999998166663", "144999.9999999999988"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "240000",
        reserved: ["0", "81249.999999999997999996", "148749.9999999999987"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "250000",
        reserved: ["0", "87499.999999999997833329", "152499.9999999999986"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "260000",
        reserved: ["0", "93749.999999999997666662", "156249.9999999999985"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "270000",
        reserved: ["0", "99999.999999999997499995", "159999.9999999999984"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "280000",
        reserved: ["0", "106249.999999999997333328", "163749.9999999999983"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "290000",
        reserved: ["0", "112499.999999999997166661", "167499.9999999999982"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "300000",
        reserved: ["0", "118749.999999999996999994", "171249.9999999999981"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "310000",
        reserved: ["0", "124999.999999999996833327", "174999.999999999998"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "320000",
        reserved: ["0", "131249.99999999999666666", "178749.9999999999979"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "330000",
        reserved: ["0", "137499.999999999996499993", "182499.9999999999978"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "340000",
        reserved: ["0", "143749.999999999996333326", "186249.9999999999977"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "350000",
        reserved: ["0", "149999.999999999996166659", "189999.9999999999976"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "360000",
        reserved: ["0", "156249.999999999995999992", "193749.9999999999975"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "370000",
        reserved: ["0", "162499.999999999995833325", "197499.9999999999974"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "380000",
        reserved: ["0", "168749.999999999995666658", "201249.9999999999973"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "390000",
        reserved: ["0", "174999.999999999995499991", "204999.9999999999972"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "400000",
        reserved: ["0", "181249.999999999995333324", "208749.9999999999971"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "410000",
        reserved: ["0", "187499.999999999995166657", "212499.999999999997"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "420000",
        reserved: ["0", "193749.99999999999499999", "216249.9999999999969"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "430000",
        reserved: ["0", "199999.999999999994833323", "219999.9999999999968"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "440000",
        reserved: ["0", "206249.999999999994666656", "223749.9999999999967"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "450000",
        reserved: ["0", "212499.999999999994499989", "227499.9999999999966"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "460000",
        reserved: ["0", "218749.999999999994333322", "231249.9999999999965"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "470000",
        reserved: ["0", "224999.999999999994166655", "234999.9999999999964"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "480000",
        reserved: ["0", "231249.999999999993999988", "238749.9999999999963"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "490000",
        reserved: ["0", "237499.999999999993833321", "242499.9999999999962"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "500000",
        reserved: ["0", "243749.999999999993666654", "246249.9999999999961"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "510000",
        reserved: ["0", "249999.999999999993499987", "249999.999999999996"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "520000",
        reserved: ["0", "256249.99999999999333332", "253749.9999999999959"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "530000",
        reserved: ["0", "262499.999999999993166653", "257499.9999999999958"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "540000",
        reserved: ["0", "268749.999999999992999986", "261249.9999999999957"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "550000",
        reserved: ["0", "274999.999999999992833319", "264999.9999999999956"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "560000",
        reserved: ["0", "281249.999999999992666652", "268749.9999999999955"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "570000",
        reserved: ["0", "287499.999999999992499985", "272499.9999999999954"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "580000",
        reserved: ["0", "293749.999999999992333318", "276249.9999999999953"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "590000",
        reserved: ["0", "299999.999999999992166651", "279999.9999999999952"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "600000",
        reserved: ["0", "306249.999999999991999984", "283749.9999999999951"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "610000",
        reserved: ["0", "312499.999999999991833317", "287499.999999999995"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "620000",
        reserved: ["0", "318749.99999999999166665", "291249.9999999999949"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "630000",
        reserved: ["0", "324999.999999999991499983", "294999.9999999999948"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "640000",
        reserved: ["0", "331249.999999999991333316", "298749.9999999999947"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "650000",
        reserved: ["0", "337499.999999999991166649", "302499.9999999999946"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "660000",
        reserved: ["0", "343749.999999999990999982", "306249.9999999999945"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "670000",
        reserved: ["0", "349999.999999999990833315", "309999.9999999999944"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "680000",
        reserved: ["0", "356249.999999999990666648", "313749.9999999999943"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "690000",
        reserved: ["0", "362499.999999999990499981", "317499.9999999999942"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "700000",
        reserved: ["0", "368749.999999999990333314", "321249.9999999999941"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "710000",
        reserved: ["0", "374999.999999999990166647", "324999.999999999994"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "720000",
        reserved: ["0", "381249.99999999998999998", "328749.9999999999939"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "730000",
        reserved: ["0", "387499.999999999989833313", "332499.9999999999938"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "740000",
        reserved: ["0", "393749.999999999989666646", "336249.9999999999937"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "750000",
        reserved: ["0", "399999.999999999989499979", "339999.9999999999936"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "760000",
        reserved: ["0", "406249.999999999989333312", "343749.9999999999935"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "770000",
        reserved: ["0", "412499.999999999989166645", "347499.9999999999934"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "780000",
        reserved: ["0", "418749.999999999988999978", "351249.9999999999933"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "790000",
        reserved: ["0", "424999.999999999988833311", "354999.9999999999932"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "800000",
        reserved: ["0", "431249.999999999988666644", "358749.9999999999931"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "810000",
        reserved: ["0", "437499.999999999988499977", "362499.999999999993"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "820000",
        reserved: ["0", "443749.99999999998833331", "366249.9999999999929"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "830000",
        reserved: ["0", "449999.999999999988166643", "369999.9999999999928"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "840000",
        reserved: ["0", "456249.999999999987999976", "373749.9999999999927"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "850000",
        reserved: ["0", "462499.999999999987833309", "377499.9999999999926"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "860000",
        reserved: ["0", "468749.999999999987666642", "381249.9999999999925"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "870000",
        reserved: ["0", "474999.999999999987499975", "384999.9999999999924"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "880000",
        reserved: ["0", "481249.999999999987333308", "388749.9999999999923"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "890000",
        reserved: ["0", "487499.999999999987166641", "392499.9999999999922"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "900000",
        reserved: ["0", "493749.999999999986999974", "396249.9999999999921"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "910000",
        reserved: ["0", "499999.999999999986833307", "399999.999999999992"],
        xi: ["6302.521008403347727272", "2310.9243697479075", "1386.5546218487445"],
      },
      {
        x_total: "920000",
        reserved: ["6302.521008403347727272", "502310.924369747894333307", "401386.5546218487365"],
        xi: ["6302.521008403361363636", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "930000",
        reserved: ["12605.042016806709090908", "504621.848739495793333307", "402773.1092436974759"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "940000",
        reserved: ["18907.563025210069999998", "506932.773109243692333307", "404159.6638655462153"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "950000",
        reserved: ["25210.084033613430909088", "509243.697478991591333307", "405546.2184873949547"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "960000",
        reserved: ["31512.605042016791818178", "511554.621848739490333307", "406932.7731092436941"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "970000",
        reserved: ["37815.126050420152727268", "513865.546218487389333307", "408319.3277310924335"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "980000",
        reserved: ["44117.647058823513636358", "516176.470588235288333307", "409705.8823529411729"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "990000",
        reserved: ["50420.168067226874545448", "518487.394957983187333307", "411092.4369747899123"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1000000",
        reserved: ["56722.689075630235454538", "520798.319327731086333307", "412478.9915966386517"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1010000",
        reserved: ["63025.210084033596363628", "523109.243697478985333307", "413865.5462184873911"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1020000",
        reserved: ["69327.731092436957272718", "525420.168067226884333307", "415252.1008403361305"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1030000",
        reserved: ["75630.252100840318181808", "527731.092436974783333307", "416638.6554621848699"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1040000",
        reserved: ["81932.773109243679090898", "530042.016806722682333307", "418025.2100840336093"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1050000",
        reserved: ["88235.294117647039999988", "532352.941176470581333307", "419411.7647058823487"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1060000",
        reserved: ["94537.815126050400909078", "534663.865546218480333307", "420798.3193277310881"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1070000",
        reserved: ["100840.336134453761818168", "536974.789915966379333307", "422184.8739495798275"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1080000",
        reserved: ["107142.857142857122727258", "539285.714285714278333307", "423571.4285714285669"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1090000",
        reserved: ["113445.378151260483636348", "541596.638655462177333307", "424957.9831932773063"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1100000",
        reserved: ["119747.899159663844545438", "543907.563025210076333307", "426344.5378151260457"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1110000",
        reserved: ["126050.420168067205454528", "546218.487394957975333307", "427731.0924369747851"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1120000",
        reserved: ["132352.941176470566363618", "548529.411764705874333307", "429117.6470588235245"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1130000",
        reserved: ["138655.462184873927272708", "550840.336134453773333307", "430504.2016806722639"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1140000",
        reserved: ["144957.983193277288181798", "553151.260504201672333307", "431890.7563025210033"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1150000",
        reserved: ["151260.504201680649090888", "555462.184873949571333307", "433277.3109243697427"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1160000",
        reserved: ["157563.025210084009999978", "557773.109243697470333307", "434663.8655462184821"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1170000",
        reserved: ["163865.546218487370909068", "560084.033613445369333307", "436050.4201680672215"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1180000",
        reserved: ["170168.067226890731818158", "562394.957983193268333307", "437436.9747899159609"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1190000",
        reserved: ["176470.588235294092727248", "564705.882352941167333307", "438823.5294117647003"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1200000",
        reserved: ["182773.109243697453636338", "567016.806722689066333307", "440210.0840336134397"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1210000",
        reserved: ["189075.630252100814545428", "569327.731092436965333307", "441596.6386554621791"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1220000",
        reserved: ["195378.151260504175454518", "571638.655462184864333307", "442983.1932773109185"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1230000",
        reserved: ["201680.672268907536363608", "573949.579831932763333307", "444369.7478991596579"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1240000",
        reserved: ["207983.193277310897272698", "576260.504201680662333307", "445756.3025210083973"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1250000",
        reserved: ["214285.714285714258181788", "578571.428571428561333307", "447142.8571428571367"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1260000",
        reserved: ["220588.235294117619090878", "580882.352941176460333307", "448529.4117647058761"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1270000",
        reserved: ["226890.756302520979999968", "583193.277310924359333307", "449915.9663865546155"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1280000",
        reserved: ["233193.277310924340909058", "585504.201680672258333307", "451302.5210084033549"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1290000",
        reserved: ["239495.798319327701818148", "587815.126050420157333307", "452689.0756302520943"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1300000",
        reserved: ["245798.319327731062727238", "590126.050420168056333307", "454075.6302521008337"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1310000",
        reserved: ["252100.840336134423636328", "592436.974789915955333307", "455462.1848739495731"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1320000",
        reserved: ["258403.361344537784545418", "594747.899159663854333307", "456848.7394957983125"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1330000",
        reserved: ["264705.882352941145454508", "597058.823529411753333307", "458235.2941176470519"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1340000",
        reserved: ["271008.403361344506363598", "599369.747899159652333307", "459621.8487394957913"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1350000",
        reserved: ["277310.924369747867272688", "601680.672268907551333307", "461008.4033613445307"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1360000",
        reserved: ["283613.445378151228181778", "603991.596638655450333307", "462394.9579831932701"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1370000",
        reserved: ["289915.966386554589090868", "606302.521008403349333307", "463781.5126050420095"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1380000",
        reserved: ["296218.487394957949999958", "608613.445378151248333307", "465168.0672268907489"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1390000",
        reserved: ["302521.008403361310909048", "610924.369747899147333307", "466554.6218487394883"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1400000",
        reserved: ["308823.529411764671818138", "613235.294117647046333307", "467941.1764705882277"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1410000",
        reserved: ["315126.050420168032727228", "615546.218487394945333307", "469327.7310924369671"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1420000",
        reserved: ["321428.571428571393636318", "617857.142857142844333307", "470714.2857142857065"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1430000",
        reserved: ["327731.092436974754545408", "620168.067226890743333307", "472100.8403361344459"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1440000",
        reserved: ["334033.613445378115454498", "622478.991596638642333307", "473487.3949579831853"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1450000",
        reserved: ["340336.134453781476363588", "624789.915966386541333307", "474873.9495798319247"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1460000",
        reserved: ["346638.655462184837272678", "627100.840336134440333307", "476260.5042016806641"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1470000",
        reserved: ["352941.176470588198181768", "629411.764705882339333307", "477647.0588235294035"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1480000",
        reserved: ["359243.697478991559090858", "631722.689075630238333307", "479033.6134453781429"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1490000",
        reserved: ["365546.218487394919999948", "634033.613445378137333307", "480420.1680672268823"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1500000",
        reserved: ["371848.739495798280909038", "636344.537815126036333307", "481806.7226890756217"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1510000",
        reserved: ["378151.260504201641818128", "638655.462184873935333307", "483193.2773109243611"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1520000",
        reserved: ["384453.781512605002727218", "640966.386554621834333307", "484579.8319327731005"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1530000",
        reserved: ["390756.302521008363636308", "643277.310924369733333307", "485966.3865546218399"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1540000",
        reserved: ["397058.823529411724545398", "645588.235294117632333307", "487352.9411764705793"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1550000",
        reserved: ["403361.344537815085454488", "647899.159663865531333307", "488739.4957983193187"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1560000",
        reserved: ["409663.865546218446363578", "650210.084033613430333307", "490126.0504201680581"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1570000",
        reserved: ["415966.386554621807272668", "652521.008403361329333307", "491512.6050420167975"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1580000",
        reserved: ["422268.907563025168181758", "654831.932773109228333307", "492899.1596638655369"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1590000",
        reserved: ["428571.428571428529090848", "657142.857142857127333307", "494285.7142857142763"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1600000",
        reserved: ["434873.949579831889999938", "659453.781512605026333307", "495672.2689075630157"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1610000",
        reserved: ["441176.470588235250909028", "661764.705882352925333307", "497058.8235294117551"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1620000",
        reserved: ["447478.991596638611818118", "664075.630252100824333307", "498445.3781512604945"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1630000",
        reserved: ["453781.512605041972727208", "666386.554621848723333307", "499831.9327731092339"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1640000",
        reserved: ["460084.033613445333636298", "668697.478991596622333307", "501218.4873949579733"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1650000",
        reserved: ["466386.554621848694545388", "671008.403361344521333307", "502605.0420168067127"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1660000",
        reserved: ["472689.075630252055454478", "673319.327731092420333307", "503991.5966386554521"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1670000",
        reserved: ["478991.596638655416363568", "675630.252100840319333307", "505378.1512605041915"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1680000",
        reserved: ["485294.117647058777272658", "677941.176470588218333307", "506764.7058823529309"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1690000",
        reserved: ["491596.638655462138181748", "680252.100840336117333307", "508151.2605042016703"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1700000",
        reserved: ["497899.159663865499090838", "682563.025210084016333307", "509537.8151260504097"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1710000",
        reserved: ["504201.680672268859999928", "684873.949579831915333307", "510924.3697478991491"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1720000",
        reserved: ["510504.201680672220909018", "687184.873949579814333307", "512310.9243697478885"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1730000",
        reserved: ["516806.722689075581818108", "689495.798319327713333307", "513697.4789915966279"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1740000",
        reserved: ["523109.243697478942727198", "691806.722689075612333307", "515084.0336134453673"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1750000",
        reserved: ["529411.764705882303636288", "694117.647058823511333307", "516470.5882352941067"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1760000",
        reserved: ["535714.285714285664545378", "696428.571428571410333307", "517857.1428571428461"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1770000",
        reserved: ["542016.806722689025454468", "698739.495798319309333307", "519243.6974789915855"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1780000",
        reserved: ["548319.327731092386363558", "701050.420168067208333307", "520630.2521008403249"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1790000",
        reserved: ["554621.848739495747272648", "703361.344537815107333307", "522016.8067226890643"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1800000",
        reserved: ["560924.369747899108181738", "705672.268907563006333307", "523403.3613445378037"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1810000",
        reserved: ["567226.890756302469090828", "707983.193277310905333307", "524789.9159663865431"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1820000",
        reserved: ["573529.411764705829999918", "710294.117647058804333307", "526176.4705882352825"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1830000",
        reserved: ["579831.932773109190909008", "712605.042016806703333307", "527563.0252100840219"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1840000",
        reserved: ["586134.453781512551818098", "714915.966386554602333307", "528949.5798319327613"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1850000",
        reserved: ["592436.974789915912727188", "717226.890756302501333307", "530336.1344537815007"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1860000",
        reserved: ["598739.495798319273636278", "719537.815126050400333307", "531722.6890756302401"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1870000",
        reserved: ["605042.016806722634545368", "721848.739495798299333307", "533109.2436974789795"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1880000",
        reserved: ["611344.537815125995454458", "724159.663865546198333307", "534495.7983193277189"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1890000",
        reserved: ["617647.058823529356363548", "726470.588235294097333307", "535882.3529411764583"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1900000",
        reserved: ["623949.579831932717272638", "728781.512605041996333307", "537268.9075630251977"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1910000",
        reserved: ["630252.100840336078181728", "731092.436974789895333307", "538655.4621848739371"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1920000",
        reserved: ["636554.621848739439090818", "733403.361344537794333307", "540042.0168067226765"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1930000",
        reserved: ["642857.142857142799999908", "735714.285714285693333307", "541428.5714285714159"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1940000",
        reserved: ["649159.663865546160908998", "738025.210084033592333307", "542815.1260504201553"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1950000",
        reserved: ["655462.184873949521818088", "740336.134453781491333307", "544201.6806722688947"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1960000",
        reserved: ["661764.705882352882727178", "742647.058823529390333307", "545588.2352941176341"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1970000",
        reserved: ["668067.226890756243636268", "744957.983193277289333307", "546974.7899159663735"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1980000",
        reserved: ["674369.747899159604545358", "747268.907563025188333307", "548361.3445378151129"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1990000",
        reserved: ["680672.268907562965454448", "749579.831932773087333307", "549747.8991596638523"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2000000",
        reserved: ["686974.789915966326363538", "751890.756302520986333307", "551134.4537815125917"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2010000",
        reserved: ["693277.310924369687272628", "754201.680672268885333307", "552521.0084033613311"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2020000",
        reserved: ["699579.831932773048181718", "756512.605042016784333307", "553907.5630252100705"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2030000",
        reserved: ["705882.352941176409090808", "758823.529411764683333307", "555294.1176470588099"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2040000",
        reserved: ["712184.873949579769999898", "761134.453781512582333307", "556680.6722689075493"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2050000",
        reserved: ["718487.394957983130908988", "763445.378151260481333307", "558067.2268907562887"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2060000",
        reserved: ["724789.915966386491818078", "765756.302521008380333307", "559453.7815126050281"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2070000",
        reserved: ["731092.436974789852727168", "768067.226890756279333307", "560840.3361344537675"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2080000",
        reserved: ["737394.957983193213636258", "770378.151260504178333307", "562226.8907563025069"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2090000",
        reserved: ["743697.478991596574545348", "772689.075630252077333307", "563613.4453781512463"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2100000",
        reserved: ["749999.999999999935454438", "774999.999999999976333307", "564999.9999999999857"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2110000",
        reserved: ["756302.521008403296363528", "777310.924369747875333307", "566386.5546218487251"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2120000",
        reserved: ["762605.042016806657272618", "779621.848739495774333307", "567773.1092436974645"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2130000",
        reserved: ["768907.563025210018181708", "781932.773109243673333307", "569159.6638655462039"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2140000",
        reserved: ["775210.084033613379090798", "784243.697478991572333307", "570546.2184873949433"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2150000",
        reserved: ["781512.605042016739999888", "786554.621848739471333307", "571932.7731092436827"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2160000",
        reserved: ["787815.126050420100908978", "788865.546218487370333307", "573319.3277310924221"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2170000",
        reserved: ["794117.647058823461818068", "791176.470588235269333307", "574705.8823529411615"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2180000",
        reserved: ["800420.168067226822727158", "793487.394957983168333307", "576092.4369747899009"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2190000",
        reserved: ["806722.689075630183636248", "795798.319327731067333307", "577478.9915966386403"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2200000",
        reserved: ["813025.210084033544545338", "798109.243697478966333307", "578865.5462184873797"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2210000",
        reserved: ["819327.731092436905454428", "800420.168067226865333307", "580252.1008403361191"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2220000",
        reserved: ["825630.252100840266363518", "802731.092436974764333307", "581638.6554621848585"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2230000",
        reserved: ["831932.773109243627272608", "805042.016806722663333307", "583025.2100840335979"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2240000",
        reserved: ["838235.294117646988181698", "807352.941176470562333307", "584411.7647058823373"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2250000",
        reserved: ["844537.815126050349090788", "809663.865546218461333307", "585798.3193277310767"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2260000",
        reserved: ["850840.336134453709999878", "811974.789915966360333307", "587184.8739495798161"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2270000",
        reserved: ["857142.857142857070908968", "814285.714285714259333307", "588571.4285714285555"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2280000",
        reserved: ["863445.378151260431818058", "816596.638655462158333307", "589957.9831932772949"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2290000",
        reserved: ["869747.899159663792727148", "818907.563025210057333307", "591344.5378151260343"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2300000",
        reserved: ["876050.420168067153636238", "821218.487394957956333307", "592731.0924369747737"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2310000",
        reserved: ["882352.941176470514545328", "823529.411764705855333307", "594117.6470588235131"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2320000",
        reserved: ["888655.462184873875454418", "825840.336134453754333307", "595504.2016806722525"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2330000",
        reserved: ["894957.983193277236363508", "828151.260504201653333307", "596890.7563025209919"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2340000",
        reserved: ["901260.504201680597272598", "830462.184873949552333307", "598277.3109243697313"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2350000",
        reserved: ["907563.025210083958181688", "832773.109243697451333307", "599663.8655462184707"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2360000",
        reserved: ["913865.546218487319090778", "835084.033613445350333307", "601050.4201680672101"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2370000",
        reserved: ["920168.067226890679999868", "837394.957983193249333307", "602436.9747899159495"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2380000",
        reserved: ["926470.588235294040908958", "839705.882352941148333307", "603823.5294117646889"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2390000",
        reserved: ["932773.109243697401818048", "842016.806722689047333307", "605210.0840336134283"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2400000",
        reserved: ["939075.630252100762727138", "844327.731092436946333307", "606596.6386554621677"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2410000",
        reserved: ["945378.151260504123636228", "846638.655462184845333307", "607983.1932773109071"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2420000",
        reserved: ["951680.672268907484545318", "848949.579831932744333307", "609369.7478991596465"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2430000",
        reserved: ["957983.193277310845454408", "851260.504201680643333307", "610756.3025210083859"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2440000",
        reserved: ["964285.714285714206363498", "853571.428571428542333307", "612142.8571428571253"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2450000",
        reserved: ["970588.235294117567272588", "855882.352941176441333307", "613529.4117647058647"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2460000",
        reserved: ["976890.756302520928181678", "858193.277310924340333307", "614915.9663865546041"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2470000",
        reserved: ["983193.277310924289090768", "860504.201680672239333307", "616302.5210084033435"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2480000",
        reserved: ["989495.798319327649999858", "862815.126050420138333307", "617689.0756302520829"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2490000",
        reserved: ["995798.319327731010908948", "865126.050420168037333307", "619075.6302521008223"],
        xi: ["4201.680672268989091052", "3623.949579831881666666", "2174.369747899129"],
      },
      {
        x_total: "2500000",
        reserved: ["1000000", "868749.999999999918999973", "621249.9999999999513"],
        xi: ["0", "6249.999999999999999999", "3750"],
      },
      {
        x_total: "2510000",
        reserved: ["1000000", "874999.999999999918999972", "624999.9999999999513"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "2520000",
        reserved: ["1000000", "881249.999999999918833305", "628749.9999999999512"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "2530000",
        reserved: ["1000000", "887499.999999999918666638", "632499.9999999999511"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "2540000",
        reserved: ["1000000", "893749.999999999918499971", "636249.999999999951"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "2550000",
        reserved: ["1000000", "899999.999999999918333304", "639999.9999999999509"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "2560000",
        reserved: ["1000000", "906249.999999999918166637", "643749.9999999999508"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "2570000",
        reserved: ["1000000", "912499.99999999991799997", "647499.9999999999507"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "2580000",
        reserved: ["1000000", "918749.999999999917833303", "651249.9999999999506"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "2590000",
        reserved: ["1000000", "924999.999999999917666636", "654999.9999999999505"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "2600000",
        reserved: ["1000000", "931249.999999999917499969", "658749.9999999999504"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "2610000",
        reserved: ["1000000", "937499.999999999917333302", "662499.9999999999503"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "2620000",
        reserved: ["1000000", "943749.999999999917166635", "666249.9999999999502"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "2630000",
        reserved: ["1000000", "949999.999999999916999968", "669999.9999999999501"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "2640000",
        reserved: ["1000000", "956249.999999999916833301", "673749.99999999995"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "2650000",
        reserved: ["1000000", "962499.999999999916666634", "677499.9999999999499"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "2660000",
        reserved: ["1000000", "968749.999999999916499967", "681249.9999999999498"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "2670000",
        reserved: ["1000000", "974999.9999999999163333", "684999.9999999999497"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "2680000",
        reserved: ["1000000", "981249.999999999916166633", "688749.9999999999496"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "2690000",
        reserved: ["1000000", "987499.999999999915999966", "692499.9999999999495"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "2700000",
        reserved: ["1000000", "993749.999999999915833299", "696249.9999999999494"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "2710000",
        reserved: ["1000000", "999999.999999999915666632", "699999.9999999999493"],
        xi: ["0", "0.000000000084333368", "9999.9999999999156"],
      },
      { x_total: "2720000", reserved: ["1000000", "1000000", "709999.9999999998649"], xi: ["0", "0", "10000"] },
      { x_total: "2730000", reserved: ["1000000", "1000000", "719999.9999999998649"], xi: ["0", "0", "10000"] },
      { x_total: "2740000", reserved: ["1000000", "1000000", "729999.9999999998649"], xi: ["0", "0", "10000"] },
      { x_total: "2750000", reserved: ["1000000", "1000000", "739999.9999999998649"], xi: ["0", "0", "10000"] },
      { x_total: "2760000", reserved: ["1000000", "1000000", "749999.9999999998649"], xi: ["0", "0", "10000"] },
      { x_total: "2770000", reserved: ["1000000", "1000000", "759999.9999999998649"], xi: ["0", "0", "10000"] },
      { x_total: "2780000", reserved: ["1000000", "1000000", "769999.9999999998649"], xi: ["0", "0", "10000"] },
      { x_total: "2790000", reserved: ["1000000", "1000000", "779999.9999999998649"], xi: ["0", "0", "10000"] },
      { x_total: "2800000", reserved: ["1000000", "1000000", "789999.9999999998649"], xi: ["0", "0", "10000"] },
      { x_total: "2810000", reserved: ["1000000", "1000000", "799999.9999999998649"], xi: ["0", "0", "10000"] },
      { x_total: "2820000", reserved: ["1000000", "1000000", "809999.9999999998649"], xi: ["0", "0", "10000"] },
      { x_total: "2830000", reserved: ["1000000", "1000000", "819999.9999999998649"], xi: ["0", "0", "10000"] },
      { x_total: "2840000", reserved: ["1000000", "1000000", "829999.9999999998649"], xi: ["0", "0", "10000"] },
      { x_total: "2850000", reserved: ["1000000", "1000000", "839999.9999999998649"], xi: ["0", "0", "10000"] },
      { x_total: "2860000", reserved: ["1000000", "1000000", "849999.9999999998649"], xi: ["0", "0", "10000"] },
      { x_total: "2870000", reserved: ["1000000", "1000000", "859999.9999999998649"], xi: ["0", "0", "10000"] },
      { x_total: "2880000", reserved: ["1000000", "1000000", "869999.9999999998649"], xi: ["0", "0", "10000"] },
      { x_total: "2890000", reserved: ["1000000", "1000000", "879999.9999999998649"], xi: ["0", "0", "10000"] },
      { x_total: "2900000", reserved: ["1000000", "1000000", "889999.9999999998649"], xi: ["0", "0", "10000"] },
      { x_total: "2910000", reserved: ["1000000", "1000000", "899999.9999999998649"], xi: ["0", "0", "10000"] },
      { x_total: "2920000", reserved: ["1000000", "1000000", "909999.9999999998649"], xi: ["0", "0", "10000"] },
      { x_total: "2930000", reserved: ["1000000", "1000000", "919999.9999999998649"], xi: ["0", "0", "10000"] },
      { x_total: "2940000", reserved: ["1000000", "1000000", "929999.9999999998649"], xi: ["0", "0", "10000"] },
      { x_total: "2950000", reserved: ["1000000", "1000000", "939999.9999999998649"], xi: ["0", "0", "10000"] },
      { x_total: "2960000", reserved: ["1000000", "1000000", "949999.9999999998649"], xi: ["0", "0", "10000"] },
      { x_total: "2970000", reserved: ["1000000", "1000000", "959999.9999999998649"], xi: ["0", "0", "10000"] },
      { x_total: "2980000", reserved: ["1000000", "1000000", "969999.9999999998649"], xi: ["0", "0", "10000"] },
      { x_total: "2990000", reserved: ["1000000", "1000000", "979999.9999999998649"], xi: ["0", "0", "10000"] },
      { x_total: "3000000", reserved: ["1000000", "1000000", "989999.9999999998649"], xi: ["0", "0", "10000"] },
    ]
    const step = 10000
    let progress = 0
    for (const test of cases) {
      progress += step
      expect(progress.toString()).to.equal(test.x_total)
      for (let i = 0; i < test.reserved.length; i++) {
        pools[i].reservedUsd = toWei(test.reserved[i])
      }
      const result = await testLibExpBorrowingRate.allocate(pools, toWei(step.toString()))
      expect(result.length).to.equal(test.xi.length)
      for (let i = 0; i < test.xi.length; i++) {
        const expectedIndex = getIndexByPoolId(result[i].poolId)
        expect(result[i].xi).to.be.closeTo(toWei(test.xi[expectedIndex]), toWei("0.0000001"), `case ${test}`)
      }
    }
    {
      // insufficient liquidity
      pools[0].reservedUsd = toWei("1000000")
      pools[1].reservedUsd = toWei("1000000")
      pools[2].reservedUsd = toWei("1000000")
      await expect(testLibExpBorrowingRate.allocate(pools, toWei("1"))).to.be.revertedWith("ExpBorrow: full")
    }
  })

  it("full allocate: consume step by step. reserveRate != 100%", async () => {
    const pools = [
      {
        k: toWei("2.2"),
        b: toWei("-3"),
        poolSizeUsd: toWei("1250000"),
        reservedUsd: toWei("0"),
        poolId: toWei("1"),
        reserveRate: toWei("1.25"),
      },
      {
        k: toWei("6"),
        b: toWei("-6"),
        poolSizeUsd: toWei("1000000"),
        reservedUsd: toWei("0"),
        poolId: toWei("2"),
        reserveRate: toWei("1.00"),
      },
      {
        k: toWei("10"),
        b: toWei("-7"),
        poolSizeUsd: toWei("800000"),
        reservedUsd: toWei("0"),
        poolId: toWei("3"),
        reserveRate: toWei("0.80"),
      },
    ]
    const cases = [
      { x_total: "10000", reserved: ["0", "0", "0"], xi: ["0", "0", "10000"] },
      { x_total: "20000", reserved: ["0", "0", "8000"], xi: ["0", "0", "10000"] },
      { x_total: "30000", reserved: ["0", "0", "16000"], xi: ["0", "0", "10000"] },
      { x_total: "40000", reserved: ["0", "0", "24000"], xi: ["0", "0", "10000"] },
      { x_total: "50000", reserved: ["0", "0", "32000"], xi: ["0", "0", "10000"] },
      { x_total: "60000", reserved: ["0", "0", "40000"], xi: ["0", "0", "10000"] },
      { x_total: "70000", reserved: ["0", "0", "48000"], xi: ["0", "0", "10000"] },
      { x_total: "80000", reserved: ["0", "0", "56000"], xi: ["0", "0", "10000"] },
      { x_total: "90000", reserved: ["0", "0", "64000"], xi: ["0", "0", "10000"] },
      { x_total: "100000", reserved: ["0", "0", "72000"], xi: ["0", "0", "10000"] },
      { x_total: "110000", reserved: ["0", "0", "80000"], xi: ["0", "6249.999999999999833333", "3749.9999999999999"] },
      {
        x_total: "120000",
        reserved: ["0", "6249.999999999999833333", "82999.99999999999992"],
        xi: ["0", "6250", "3749.9999999999999"],
      },
      {
        x_total: "130000",
        reserved: ["0", "12499.999999999999833333", "85999.99999999999984"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "140000",
        reserved: ["0", "18749.999999999999666666", "88999.99999999999976"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "150000",
        reserved: ["0", "24999.999999999999499999", "91999.99999999999968"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "160000",
        reserved: ["0", "31249.999999999999333332", "94999.9999999999996"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "170000",
        reserved: ["0", "37499.999999999999166665", "97999.99999999999952"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "180000",
        reserved: ["0", "43749.999999999998999998", "100999.99999999999944"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "190000",
        reserved: ["0", "49999.999999999998833331", "103999.99999999999936"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "200000",
        reserved: ["0", "56249.999999999998666664", "106999.99999999999928"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "210000",
        reserved: ["0", "62499.999999999998499997", "109999.9999999999992"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "220000",
        reserved: ["0", "68749.99999999999833333", "112999.99999999999912"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "230000",
        reserved: ["0", "74999.999999999998166663", "115999.99999999999904"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "240000",
        reserved: ["0", "81249.999999999997999996", "118999.99999999999896"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "250000",
        reserved: ["0", "87499.999999999997833329", "121999.99999999999888"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "260000",
        reserved: ["0", "93749.999999999997666662", "124999.9999999999988"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "270000",
        reserved: ["0", "99999.999999999997499995", "127999.99999999999872"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "280000",
        reserved: ["0", "106249.999999999997333328", "130999.99999999999864"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "290000",
        reserved: ["0", "112499.999999999997166661", "133999.99999999999856"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "300000",
        reserved: ["0", "118749.999999999996999994", "136999.99999999999848"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "310000",
        reserved: ["0", "124999.999999999996833327", "139999.9999999999984"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "320000",
        reserved: ["0", "131249.99999999999666666", "142999.99999999999832"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "330000",
        reserved: ["0", "137499.999999999996499993", "145999.99999999999824"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "340000",
        reserved: ["0", "143749.999999999996333326", "148999.99999999999816"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "350000",
        reserved: ["0", "149999.999999999996166659", "151999.99999999999808"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "360000",
        reserved: ["0", "156249.999999999995999992", "154999.999999999998"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "370000",
        reserved: ["0", "162499.999999999995833325", "157999.99999999999792"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "380000",
        reserved: ["0", "168749.999999999995666658", "160999.99999999999784"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "390000",
        reserved: ["0", "174999.999999999995499991", "163999.99999999999776"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "400000",
        reserved: ["0", "181249.999999999995333324", "166999.99999999999768"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "410000",
        reserved: ["0", "187499.999999999995166657", "169999.9999999999976"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "420000",
        reserved: ["0", "193749.99999999999499999", "172999.99999999999752"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "430000",
        reserved: ["0", "199999.999999999994833323", "175999.99999999999744"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "440000",
        reserved: ["0", "206249.999999999994666656", "178999.99999999999736"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "450000",
        reserved: ["0", "212499.999999999994499989", "181999.99999999999728"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "460000",
        reserved: ["0", "218749.999999999994333322", "184999.9999999999972"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "470000",
        reserved: ["0", "224999.999999999994166655", "187999.99999999999712"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "480000",
        reserved: ["0", "231249.999999999993999988", "190999.99999999999704"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "490000",
        reserved: ["0", "237499.999999999993833321", "193999.99999999999696"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "500000",
        reserved: ["0", "243749.999999999993666654", "196999.99999999999688"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "510000",
        reserved: ["0", "249999.999999999993499987", "199999.9999999999968"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "520000",
        reserved: ["0", "256249.99999999999333332", "202999.99999999999672"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "530000",
        reserved: ["0", "262499.999999999993166653", "205999.99999999999664"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "540000",
        reserved: ["0", "268749.999999999992999986", "208999.99999999999656"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "550000",
        reserved: ["0", "274999.999999999992833319", "211999.99999999999648"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "560000",
        reserved: ["0", "281249.999999999992666652", "214999.9999999999964"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "570000",
        reserved: ["0", "287499.999999999992499985", "217999.99999999999632"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "580000",
        reserved: ["0", "293749.999999999992333318", "220999.99999999999624"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "590000",
        reserved: ["0", "299999.999999999992166651", "223999.99999999999616"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "600000",
        reserved: ["0", "306249.999999999991999984", "226999.99999999999608"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "610000",
        reserved: ["0", "312499.999999999991833317", "229999.999999999996"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "620000",
        reserved: ["0", "318749.99999999999166665", "232999.99999999999592"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "630000",
        reserved: ["0", "324999.999999999991499983", "235999.99999999999584"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "640000",
        reserved: ["0", "331249.999999999991333316", "238999.99999999999576"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "650000",
        reserved: ["0", "337499.999999999991166649", "241999.99999999999568"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "660000",
        reserved: ["0", "343749.999999999990999982", "244999.9999999999956"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "670000",
        reserved: ["0", "349999.999999999990833315", "247999.99999999999552"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "680000",
        reserved: ["0", "356249.999999999990666648", "250999.99999999999544"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "690000",
        reserved: ["0", "362499.999999999990499981", "253999.99999999999536"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "700000",
        reserved: ["0", "368749.999999999990333314", "256999.99999999999528"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "710000",
        reserved: ["0", "374999.999999999990166647", "259999.9999999999952"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "720000",
        reserved: ["0", "381249.99999999998999998", "262999.99999999999512"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "730000",
        reserved: ["0", "387499.999999999989833313", "265999.99999999999504"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "740000",
        reserved: ["0", "393749.999999999989666646", "268999.99999999999496"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "750000",
        reserved: ["0", "399999.999999999989499979", "271999.99999999999488"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "760000",
        reserved: ["0", "406249.999999999989333312", "274999.9999999999948"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "770000",
        reserved: ["0", "412499.999999999989166645", "277999.99999999999472"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "780000",
        reserved: ["0", "418749.999999999988999978", "280999.99999999999464"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "790000",
        reserved: ["0", "424999.999999999988833311", "283999.99999999999456"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "800000",
        reserved: ["0", "431249.999999999988666644", "286999.99999999999448"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "810000",
        reserved: ["0", "437499.999999999988499977", "289999.9999999999944"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "820000",
        reserved: ["0", "443749.99999999998833331", "292999.99999999999432"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "830000",
        reserved: ["0", "449999.999999999988166643", "295999.99999999999424"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "840000",
        reserved: ["0", "456249.999999999987999976", "298999.99999999999416"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "850000",
        reserved: ["0", "462499.999999999987833309", "301999.99999999999408"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "860000",
        reserved: ["0", "468749.999999999987666642", "304999.999999999994"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "870000",
        reserved: ["0", "474999.999999999987499975", "307999.99999999999392"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "880000",
        reserved: ["0", "481249.999999999987333308", "310999.99999999999384"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "890000",
        reserved: ["0", "487499.999999999987166641", "313999.99999999999376"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "900000",
        reserved: ["0", "493749.999999999986999974", "316999.99999999999368"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "910000",
        reserved: ["0", "499999.999999999986833307", "319999.9999999999936"],
        xi: ["6302.521008403347727272", "2310.9243697479075", "1386.5546218487445"],
      },
      {
        x_total: "920000",
        reserved: ["7878.15126050418465909", "502310.924369747894333307", "321109.2436974789892"],
        xi: ["6302.521008403361363636", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "930000",
        reserved: ["15756.302521008386363635", "504621.848739495793333307", "322218.48739495798072"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "940000",
        reserved: ["23634.453781512587499997", "506932.773109243692333307", "323327.73109243697224"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "950000",
        reserved: ["31512.605042016788636359", "509243.697478991591333307", "324436.97478991596376"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "960000",
        reserved: ["39390.756302520989772721", "511554.621848739490333307", "325546.21848739495528"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "970000",
        reserved: ["47268.907563025190909083", "513865.546218487389333307", "326655.4621848739468"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "980000",
        reserved: ["55147.058823529392045445", "516176.470588235288333307", "327764.70588235293832"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "990000",
        reserved: ["63025.210084033593181807", "518487.394957983187333307", "328873.94957983192984"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1000000",
        reserved: ["70903.361344537794318169", "520798.319327731086333307", "329983.19327731092136"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1010000",
        reserved: ["78781.512605041995454531", "523109.243697478985333307", "331092.43697478991288"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1020000",
        reserved: ["86659.663865546196590893", "525420.168067226884333307", "332201.6806722689044"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1030000",
        reserved: ["94537.815126050397727255", "527731.092436974783333307", "333310.92436974789592"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1040000",
        reserved: ["102415.966386554598863617", "530042.016806722682333307", "334420.16806722688744"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1050000",
        reserved: ["110294.117647058799999979", "532352.941176470581333307", "335529.41176470587896"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1060000",
        reserved: ["118172.268907563001136341", "534663.865546218480333307", "336638.65546218487048"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1070000",
        reserved: ["126050.420168067202272703", "536974.789915966379333307", "337747.899159663862"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1080000",
        reserved: ["133928.571428571403409065", "539285.714285714278333307", "338857.14285714285352"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1090000",
        reserved: ["141806.722689075604545427", "541596.638655462177333307", "339966.38655462184504"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1100000",
        reserved: ["149684.873949579805681789", "543907.563025210076333307", "341075.63025210083656"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1110000",
        reserved: ["157563.025210084006818151", "546218.487394957975333307", "342184.87394957982808"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1120000",
        reserved: ["165441.176470588207954513", "548529.411764705874333307", "343294.1176470588196"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1130000",
        reserved: ["173319.327731092409090875", "550840.336134453773333307", "344403.36134453781112"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1140000",
        reserved: ["181197.478991596610227237", "553151.260504201672333307", "345512.60504201680264"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1150000",
        reserved: ["189075.630252100811363599", "555462.184873949571333307", "346621.84873949579416"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1160000",
        reserved: ["196953.781512605012499961", "557773.109243697470333307", "347731.09243697478568"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1170000",
        reserved: ["204831.932773109213636323", "560084.033613445369333307", "348840.3361344537772"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1180000",
        reserved: ["212710.084033613414772685", "562394.957983193268333307", "349949.57983193276872"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1190000",
        reserved: ["220588.235294117615909047", "564705.882352941167333307", "351058.82352941176024"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1200000",
        reserved: ["228466.386554621817045409", "567016.806722689066333307", "352168.06722689075176"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1210000",
        reserved: ["236344.537815126018181771", "569327.731092436965333307", "353277.31092436974328"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1220000",
        reserved: ["244222.689075630219318133", "571638.655462184864333307", "354386.5546218487348"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1230000",
        reserved: ["252100.840336134420454495", "573949.579831932763333307", "355495.79831932772632"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1240000",
        reserved: ["259978.991596638621590857", "576260.504201680662333307", "356605.04201680671784"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1250000",
        reserved: ["267857.142857142822727219", "578571.428571428561333307", "357714.28571428570936"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1260000",
        reserved: ["275735.294117647023863581", "580882.352941176460333307", "358823.52941176470088"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1270000",
        reserved: ["283613.445378151224999943", "583193.277310924359333307", "359932.7731092436924"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1280000",
        reserved: ["291491.596638655426136305", "585504.201680672258333307", "361042.01680672268392"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1290000",
        reserved: ["299369.747899159627272667", "587815.126050420157333307", "362151.26050420167544"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1300000",
        reserved: ["307247.899159663828409029", "590126.050420168056333307", "363260.50420168066696"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1310000",
        reserved: ["315126.050420168029545391", "592436.974789915955333307", "364369.74789915965848"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1320000",
        reserved: ["323004.201680672230681753", "594747.899159663854333307", "365478.99159663865"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1330000",
        reserved: ["330882.352941176431818115", "597058.823529411753333307", "366588.23529411764152"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1340000",
        reserved: ["338760.504201680632954477", "599369.747899159652333307", "367697.47899159663304"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1350000",
        reserved: ["346638.655462184834090839", "601680.672268907551333307", "368806.72268907562456"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1360000",
        reserved: ["354516.806722689035227201", "603991.596638655450333307", "369915.96638655461608"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1370000",
        reserved: ["362394.957983193236363563", "606302.521008403349333307", "371025.2100840336076"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1380000",
        reserved: ["370273.109243697437499925", "608613.445378151248333307", "372134.45378151259912"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1390000",
        reserved: ["378151.260504201638636287", "610924.369747899147333307", "373243.69747899159064"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1400000",
        reserved: ["386029.411764705839772649", "613235.294117647046333307", "374352.94117647058216"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1410000",
        reserved: ["393907.563025210040909011", "615546.218487394945333307", "375462.18487394957368"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1420000",
        reserved: ["401785.714285714242045373", "617857.142857142844333307", "376571.4285714285652"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1430000",
        reserved: ["409663.865546218443181735", "620168.067226890743333307", "377680.67226890755672"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1440000",
        reserved: ["417542.016806722644318097", "622478.991596638642333307", "378789.91596638654824"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1450000",
        reserved: ["425420.168067226845454459", "624789.915966386541333307", "379899.15966386553976"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1460000",
        reserved: ["433298.319327731046590821", "627100.840336134440333307", "381008.40336134453128"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1470000",
        reserved: ["441176.470588235247727183", "629411.764705882339333307", "382117.6470588235228"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1480000",
        reserved: ["449054.621848739448863545", "631722.689075630238333307", "383226.89075630251432"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1490000",
        reserved: ["456932.773109243649999907", "634033.613445378137333307", "384336.13445378150584"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1500000",
        reserved: ["464810.924369747851136269", "636344.537815126036333307", "385445.37815126049736"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1510000",
        reserved: ["472689.075630252052272631", "638655.462184873935333307", "386554.62184873948888"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1520000",
        reserved: ["480567.226890756253408993", "640966.386554621834333307", "387663.8655462184804"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1530000",
        reserved: ["488445.378151260454545355", "643277.310924369733333307", "388773.10924369747192"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1540000",
        reserved: ["496323.529411764655681717", "645588.235294117632333307", "389882.35294117646344"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1550000",
        reserved: ["504201.680672268856818079", "647899.159663865531333307", "390991.59663865545496"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1560000",
        reserved: ["512079.831932773057954441", "650210.084033613430333307", "392100.84033613444648"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1570000",
        reserved: ["519957.983193277259090803", "652521.008403361329333307", "393210.084033613438"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1580000",
        reserved: ["527836.134453781460227165", "654831.932773109228333307", "394319.32773109242952"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1590000",
        reserved: ["535714.285714285661363527", "657142.857142857127333307", "395428.57142857142104"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1600000",
        reserved: ["543592.436974789862499889", "659453.781512605026333307", "396537.81512605041256"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1610000",
        reserved: ["551470.588235294063636251", "661764.705882352925333307", "397647.05882352940408"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1620000",
        reserved: ["559348.739495798264772613", "664075.630252100824333307", "398756.3025210083956"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1630000",
        reserved: ["567226.890756302465908975", "666386.554621848723333307", "399865.54621848738712"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1640000",
        reserved: ["575105.042016806667045337", "668697.478991596622333307", "400974.78991596637864"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1650000",
        reserved: ["582983.193277310868181699", "671008.403361344521333307", "402084.03361344537016"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1660000",
        reserved: ["590861.344537815069318061", "673319.327731092420333307", "403193.27731092436168"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1670000",
        reserved: ["598739.495798319270454423", "675630.252100840319333307", "404302.5210084033532"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1680000",
        reserved: ["606617.647058823471590785", "677941.176470588218333307", "405411.76470588234472"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1690000",
        reserved: ["614495.798319327672727147", "680252.100840336117333307", "406521.00840336133624"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1700000",
        reserved: ["622373.949579831873863509", "682563.025210084016333307", "407630.25210084032776"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1710000",
        reserved: ["630252.100840336074999871", "684873.949579831915333307", "408739.49579831931928"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1720000",
        reserved: ["638130.252100840276136233", "687184.873949579814333307", "409848.7394957983108"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1730000",
        reserved: ["646008.403361344477272595", "689495.798319327713333307", "410957.98319327730232"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1740000",
        reserved: ["653886.554621848678408957", "691806.722689075612333307", "412067.22689075629384"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1750000",
        reserved: ["661764.705882352879545319", "694117.647058823511333307", "413176.47058823528536"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1760000",
        reserved: ["669642.857142857080681681", "696428.571428571410333307", "414285.71428571427688"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1770000",
        reserved: ["677521.008403361281818043", "698739.495798319309333307", "415394.9579831932684"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1780000",
        reserved: ["685399.159663865482954405", "701050.420168067208333307", "416504.20168067225992"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1790000",
        reserved: ["693277.310924369684090767", "703361.344537815107333307", "417613.44537815125144"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1800000",
        reserved: ["701155.462184873885227129", "705672.268907563006333307", "418722.68907563024296"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1810000",
        reserved: ["709033.613445378086363491", "707983.193277310905333307", "419831.93277310923448"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1820000",
        reserved: ["716911.764705882287499853", "710294.117647058804333307", "420941.176470588226"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1830000",
        reserved: ["724789.915966386488636215", "712605.042016806703333307", "422050.42016806721752"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1840000",
        reserved: ["732668.067226890689772577", "714915.966386554602333307", "423159.66386554620904"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1850000",
        reserved: ["740546.218487394890908939", "717226.890756302501333307", "424268.90756302520056"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1860000",
        reserved: ["748424.369747899092045301", "719537.815126050400333307", "425378.15126050419208"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1870000",
        reserved: ["756302.521008403293181663", "721848.739495798299333307", "426487.3949579831836"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1880000",
        reserved: ["764180.672268907494318025", "724159.663865546198333307", "427596.63865546217512"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1890000",
        reserved: ["772058.823529411695454387", "726470.588235294097333307", "428705.88235294116664"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1900000",
        reserved: ["779936.974789915896590749", "728781.512605041996333307", "429815.12605042015816"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1910000",
        reserved: ["787815.126050420097727111", "731092.436974789895333307", "430924.36974789914968"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1920000",
        reserved: ["795693.277310924298863473", "733403.361344537794333307", "432033.6134453781412"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1930000",
        reserved: ["803571.428571428499999835", "735714.285714285693333307", "433142.85714285713272"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1940000",
        reserved: ["811449.579831932701136197", "738025.210084033592333307", "434252.10084033612424"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1950000",
        reserved: ["819327.731092436902272559", "740336.134453781491333307", "435361.34453781511576"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1960000",
        reserved: ["827205.882352941103408921", "742647.058823529390333307", "436470.58823529410728"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1970000",
        reserved: ["835084.033613445304545283", "744957.983193277289333307", "437579.8319327730988"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1980000",
        reserved: ["842962.184873949505681645", "747268.907563025188333307", "438689.07563025209032"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "1990000",
        reserved: ["850840.336134453706818007", "749579.831932773087333307", "439798.31932773108184"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2000000",
        reserved: ["858718.487394957907954369", "751890.756302520986333307", "440907.56302521007336"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2010000",
        reserved: ["866596.638655462109090731", "754201.680672268885333307", "442016.80672268906488"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2020000",
        reserved: ["874474.789915966310227093", "756512.605042016784333307", "443126.0504201680564"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2030000",
        reserved: ["882352.941176470511363455", "758823.529411764683333307", "444235.29411764704792"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2040000",
        reserved: ["890231.092436974712499817", "761134.453781512582333307", "445344.53781512603944"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2050000",
        reserved: ["898109.243697478913636179", "763445.378151260481333307", "446453.78151260503096"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2060000",
        reserved: ["905987.394957983114772541", "765756.302521008380333307", "447563.02521008402248"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2070000",
        reserved: ["913865.546218487315908903", "768067.226890756279333307", "448672.268907563014"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2080000",
        reserved: ["921743.697478991517045265", "770378.151260504178333307", "449781.51260504200552"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2090000",
        reserved: ["929621.848739495718181627", "772689.075630252077333307", "450890.75630252099704"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2100000",
        reserved: ["937499.999999999919317989", "774999.999999999976333307", "451999.99999999998856"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2110000",
        reserved: ["945378.151260504120454351", "777310.924369747875333307", "453109.24369747898008"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2120000",
        reserved: ["953256.302521008321590713", "779621.848739495774333307", "454218.4873949579716"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2130000",
        reserved: ["961134.453781512522727075", "781932.773109243673333307", "455327.73109243696312"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2140000",
        reserved: ["969012.605042016723863437", "784243.697478991572333307", "456436.97478991595464"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2150000",
        reserved: ["976890.756302520924999799", "786554.621848739471333307", "457546.21848739494616"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2160000",
        reserved: ["984768.907563025126136161", "788865.546218487370333307", "458655.46218487393768"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2170000",
        reserved: ["992647.058823529327272523", "791176.470588235269333307", "459764.7058823529292"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2180000",
        reserved: ["1000525.210084033528408885", "793487.394957983168333307", "460873.94957983192072"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2190000",
        reserved: ["1008403.361344537729545247", "795798.319327731067333307", "461983.19327731091224"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2200000",
        reserved: ["1016281.512605041930681609", "798109.243697478966333307", "463092.43697478990376"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2210000",
        reserved: ["1024159.663865546131817971", "800420.168067226865333307", "464201.68067226889528"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2220000",
        reserved: ["1032037.815126050332954333", "802731.092436974764333307", "465310.9243697478868"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2230000",
        reserved: ["1039915.966386554534090695", "805042.016806722663333307", "466420.16806722687832"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2240000",
        reserved: ["1047794.117647058735227057", "807352.941176470562333307", "467529.41176470586984"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2250000",
        reserved: ["1055672.268907562936363419", "809663.865546218461333307", "468638.65546218486136"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2260000",
        reserved: ["1063550.420168067137499781", "811974.789915966360333307", "469747.89915966385288"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2270000",
        reserved: ["1071428.571428571338636143", "814285.714285714259333307", "470857.1428571428444"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2280000",
        reserved: ["1079306.722689075539772505", "816596.638655462158333307", "471966.38655462183592"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2290000",
        reserved: ["1087184.873949579740908867", "818907.563025210057333307", "473075.63025210082744"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2300000",
        reserved: ["1095063.025210083942045229", "821218.487394957956333307", "474184.87394957981896"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2310000",
        reserved: ["1102941.176470588143181591", "823529.411764705855333307", "475294.11764705881048"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2320000",
        reserved: ["1110819.327731092344317953", "825840.336134453754333307", "476403.361344537802"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2330000",
        reserved: ["1118697.478991596545454315", "828151.260504201653333307", "477512.60504201679352"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2340000",
        reserved: ["1126575.630252100746590677", "830462.184873949552333307", "478621.84873949578504"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2350000",
        reserved: ["1134453.781512604947727039", "832773.109243697451333307", "479731.09243697477656"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2360000",
        reserved: ["1142331.932773109148863401", "835084.033613445350333307", "480840.33613445376808"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2370000",
        reserved: ["1150210.084033613349999763", "837394.957983193249333307", "481949.5798319327596"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2380000",
        reserved: ["1158088.235294117551136125", "839705.882352941148333307", "483058.82352941175112"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2390000",
        reserved: ["1165966.386554621752272487", "842016.806722689047333307", "484168.06722689074264"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2400000",
        reserved: ["1173844.537815125953408849", "844327.731092436946333307", "485277.31092436973416"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2410000",
        reserved: ["1181722.689075630154545211", "846638.655462184845333307", "486386.55462184872568"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2420000",
        reserved: ["1189600.840336134355681573", "848949.579831932744333307", "487495.7983193277172"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2430000",
        reserved: ["1197478.991596638556817935", "851260.504201680643333307", "488605.04201680670872"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2440000",
        reserved: ["1205357.142857142757954297", "853571.428571428542333307", "489714.28571428570024"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2450000",
        reserved: ["1213235.294117646959090659", "855882.352941176441333307", "490823.52941176469176"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2460000",
        reserved: ["1221113.445378151160227021", "858193.277310924340333307", "491932.77310924368328"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2470000",
        reserved: ["1228991.596638655361363383", "860504.201680672239333307", "493042.0168067226748"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2480000",
        reserved: ["1236869.747899159562499745", "862815.126050420138333307", "494151.26050420166632"],
        xi: ["6302.52100840336090909", "2310.924369747899", "1386.5546218487394"],
      },
      {
        x_total: "2490000",
        reserved: ["1244747.899159663763636107", "865126.050420168037333307", "495260.50420168065784"],
        xi: ["4201.680672268989091115", "3623.949579831881666666", "2174.369747899129"],
      },
      {
        x_total: "2500000",
        reserved: ["1250000", "868749.999999999918999973", "496999.99999999996104"],
        xi: ["0", "6249.999999999999999999", "3750"],
      },
      {
        x_total: "2510000",
        reserved: ["1250000", "874999.999999999918999972", "499999.99999999996104"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "2520000",
        reserved: ["1250000", "881249.999999999918833305", "502999.99999999996096"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "2530000",
        reserved: ["1250000", "887499.999999999918666638", "505999.99999999996088"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "2540000",
        reserved: ["1250000", "893749.999999999918499971", "508999.9999999999608"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "2550000",
        reserved: ["1250000", "899999.999999999918333304", "511999.99999999996072"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "2560000",
        reserved: ["1250000", "906249.999999999918166637", "514999.99999999996064"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "2570000",
        reserved: ["1250000", "912499.99999999991799997", "517999.99999999996056"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "2580000",
        reserved: ["1250000", "918749.999999999917833303", "520999.99999999996048"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "2590000",
        reserved: ["1250000", "924999.999999999917666636", "523999.9999999999604"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "2600000",
        reserved: ["1250000", "931249.999999999917499969", "526999.99999999996032"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "2610000",
        reserved: ["1250000", "937499.999999999917333302", "529999.99999999996024"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "2620000",
        reserved: ["1250000", "943749.999999999917166635", "532999.99999999996016"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "2630000",
        reserved: ["1250000", "949999.999999999916999968", "535999.99999999996008"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "2640000",
        reserved: ["1250000", "956249.999999999916833301", "538999.99999999996"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "2650000",
        reserved: ["1250000", "962499.999999999916666634", "541999.99999999995992"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "2660000",
        reserved: ["1250000", "968749.999999999916499967", "544999.99999999995984"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "2670000",
        reserved: ["1250000", "974999.9999999999163333", "547999.99999999995976"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "2680000",
        reserved: ["1250000", "981249.999999999916166633", "550999.99999999995968"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "2690000",
        reserved: ["1250000", "987499.999999999915999966", "553999.9999999999596"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "2700000",
        reserved: ["1250000", "993749.999999999915833299", "556999.99999999995952"],
        xi: ["0", "6249.999999999999833333", "3749.9999999999999"],
      },
      {
        x_total: "2710000",
        reserved: ["1250000", "999999.999999999915666632", "559999.99999999995944"],
        xi: ["0", "0.000000000084333368", "9999.9999999999156"],
      },
      { x_total: "2720000", reserved: ["1250000", "1000000", "567999.99999999989192"], xi: ["0", "0", "10000"] },
      { x_total: "2730000", reserved: ["1250000", "1000000", "575999.99999999989192"], xi: ["0", "0", "10000"] },
      { x_total: "2740000", reserved: ["1250000", "1000000", "583999.99999999989192"], xi: ["0", "0", "10000"] },
      { x_total: "2750000", reserved: ["1250000", "1000000", "591999.99999999989192"], xi: ["0", "0", "10000"] },
      { x_total: "2760000", reserved: ["1250000", "1000000", "599999.99999999989192"], xi: ["0", "0", "10000"] },
      { x_total: "2770000", reserved: ["1250000", "1000000", "607999.99999999989192"], xi: ["0", "0", "10000"] },
      { x_total: "2780000", reserved: ["1250000", "1000000", "615999.99999999989192"], xi: ["0", "0", "10000"] },
      { x_total: "2790000", reserved: ["1250000", "1000000", "623999.99999999989192"], xi: ["0", "0", "10000"] },
      { x_total: "2800000", reserved: ["1250000", "1000000", "631999.99999999989192"], xi: ["0", "0", "10000"] },
      { x_total: "2810000", reserved: ["1250000", "1000000", "639999.99999999989192"], xi: ["0", "0", "10000"] },
      { x_total: "2820000", reserved: ["1250000", "1000000", "647999.99999999989192"], xi: ["0", "0", "10000"] },
      { x_total: "2830000", reserved: ["1250000", "1000000", "655999.99999999989192"], xi: ["0", "0", "10000"] },
      { x_total: "2840000", reserved: ["1250000", "1000000", "663999.99999999989192"], xi: ["0", "0", "10000"] },
      { x_total: "2850000", reserved: ["1250000", "1000000", "671999.99999999989192"], xi: ["0", "0", "10000"] },
      { x_total: "2860000", reserved: ["1250000", "1000000", "679999.99999999989192"], xi: ["0", "0", "10000"] },
      { x_total: "2870000", reserved: ["1250000", "1000000", "687999.99999999989192"], xi: ["0", "0", "10000"] },
      { x_total: "2880000", reserved: ["1250000", "1000000", "695999.99999999989192"], xi: ["0", "0", "10000"] },
      { x_total: "2890000", reserved: ["1250000", "1000000", "703999.99999999989192"], xi: ["0", "0", "10000"] },
      { x_total: "2900000", reserved: ["1250000", "1000000", "711999.99999999989192"], xi: ["0", "0", "10000"] },
      { x_total: "2910000", reserved: ["1250000", "1000000", "719999.99999999989192"], xi: ["0", "0", "10000"] },
      { x_total: "2920000", reserved: ["1250000", "1000000", "727999.99999999989192"], xi: ["0", "0", "10000"] },
      { x_total: "2930000", reserved: ["1250000", "1000000", "735999.99999999989192"], xi: ["0", "0", "10000"] },
      { x_total: "2940000", reserved: ["1250000", "1000000", "743999.99999999989192"], xi: ["0", "0", "10000"] },
      { x_total: "2950000", reserved: ["1250000", "1000000", "751999.99999999989192"], xi: ["0", "0", "10000"] },
      { x_total: "2960000", reserved: ["1250000", "1000000", "759999.99999999989192"], xi: ["0", "0", "10000"] },
      { x_total: "2970000", reserved: ["1250000", "1000000", "767999.99999999989192"], xi: ["0", "0", "10000"] },
      { x_total: "2980000", reserved: ["1250000", "1000000", "775999.99999999989192"], xi: ["0", "0", "10000"] },
      { x_total: "2990000", reserved: ["1250000", "1000000", "783999.99999999989192"], xi: ["0", "0", "10000"] },
      { x_total: "3000000", reserved: ["1250000", "1000000", "791999.99999999989192"], xi: ["0", "0", "10000"] },
    ]
    const step = 10000
    let progress = 0
    for (const test of cases) {
      progress += step
      expect(progress.toString()).to.equal(test.x_total)
      for (let i = 0; i < test.reserved.length; i++) {
        pools[i].reservedUsd = toWei(test.reserved[i])
      }
      const result = await testLibExpBorrowingRate.allocate(pools, toWei(step.toString()))
      expect(result.length).to.equal(test.xi.length)
      for (let i = 0; i < test.xi.length; i++) {
        const expectedIndex = getIndexByPoolId(result[i].poolId)
        expect(result[i].xi).to.be.closeTo(toWei(test.xi[expectedIndex]), toWei("0.0000001"), `case ${test}`)
      }
    }
    {
      // insufficient liquidity
      pools[0].reservedUsd = toWei("1250000")
      pools[1].reservedUsd = toWei("1000000")
      pools[2].reservedUsd = toWei("800000")
      await expect(testLibExpBorrowingRate.allocate(pools, toWei("1"))).to.be.revertedWith("ExpBorrow: full")
    }
  })
})
